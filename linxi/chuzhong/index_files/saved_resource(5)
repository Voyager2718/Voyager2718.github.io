var Observe=Observe||{};!function(n,t,e){"use strict";var r="function"==typeof define,o="undefined"!=typeof module&&module.exports;r?define(t):o?module.exports=t():e[n]=t()}("observe",function(){var n=[],t=[],e=function(n){function t(){e(),a=n}function e(){o(c.generic,function(t){t(n,a)})}function r(n,t){o(c.create,function(e){e(n,t)})}function i(n,t,e){o(c.update,function(t){t(n,old_item,e)})}function u(n,t){o(c["delete"],function(e){e(n,t)})}function f(){var e=a.length,o=n.length;if(e!==o||$.json.encode(a)!==$.json.encode(n))for(var f=Math.max(o,e),c=f;c>=0;c--){var p=a[c],s=n[c];c>e-1?r(s,c):c>o-1?u(p,c):s!==p&&i(s,p,c)}t()}var a=[],c={generic:[],create:[],update:[],"delete":[]};return n.pop=function(){f();var n=Array.prototype.pop.call(this,arguments),e=this.length;return u(n,e),t(),n},n.push=function(){f();var n=arguments[0],e=Array.prototype.push.apply(this,arguments);return r(n,e-1),t(),e},n.splice=function(n){f();for(var e=Array.prototype.slice.call(arguments,2),i=Array.prototype.splice.apply(this,arguments),a=i.length-1;a>=0;a--)u(i[a],n+a);return o(e,function(t,e){r(t,n+e)}),t(),i},{bind:function(n,t){if("undefined"==typeof c[n])throw"type is not allow";c[n].push(t)},unbind:function(){}}},r=function(n,t){return Object.prototype.toString.call(n)==="[object "+t+"]"},o=function(n,t){for(var e,r=0,o=n.length;o>r&&(e=t.call(n[r],n[r],r),e!==!1);r++);},i=function(n,t){var e=0;if(Array.prototype.indexOf)return n.indexOf(t);for(;e<n.length;e++)if(n[e]===t)return e;return-1};return function(o,u,f){if(arguments.length<2)throw"arguments length is not right";if(!r(o,"Array"))throw"first argument must be an array";r(u,"Function")&&(f=u,u="generic");var a=i(n,o);if(-1===a){a=n.length,n.push(o);var c=new e(o);t.push(c)}return t[a].bind(u,f),o}},Observe);
;_.Module.define({path:"comforum/widget/BasketLottery",sub:{_container:null,_lotteryHelper:null,_singleLottery:null,_index:0,_selected:[],_t:null,_bubble:null,_page:"",initial:function(t,e,i,n){this._container=$("#basket_lottery"),this._page=n,this._lotteryHelper=this.use("comforum/widget/LotteryHelper"),this._singleLottery=this._formatData(e),this._bindEvents(),i||1!==t?this._selected.push(3):this._selected.push(0),this._t=this._countTime(),this._stats()},_formatData:function(t){for(var e=$.parseJSON(t),i=0,n=e.length;n>i;i++)e[i].scale_home.toString().length>5&&(e[i].scale_home=e[i].scale_home.toPrecision(4)),e[i].scale_away.toString().length>5&&(e[i].scale_away=e[i].scale_away.toPrecision(4));return e},_formatTime:function(t){if(0>t)return"00:00:00";var e=new Date(1e3*t),i=function(t){return 10>t?"0"+t:t},n=i(Math.floor(t/3600))+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds());return n},_bindEvents:function(){var t=this;t._container.on("keydown",".j_quick_ipt",function(e){return t._lotteryHelper.numberKeyOnly(e)}).on("change",".j_quick_ipt",function(){var t=$(this).val();t||$(this).val(1)}).on("keyup",".j_quick_ipt",function(){var t=$(this).val();t&&(t=t.replace(/\D/g,"")),0===parseInt(t,10)&&(t=1),$(this).val(t)}),Observe.observe(t._selected,"create",function(e){var i=t._container.find(".lottery_basket_"+e),n=t._container.find(".j_quick_tz");i.addClass("lottery_select"),t._bubble&&t._bubble.hideBubble(),t._setBtnTips(),n.toggleClass("disable",0===t._selected.length)}),Observe.observe(t._selected,"delete",function(e){var i=t._container.find(".lottery_basket_"+e),n=t._container.find(".j_quick_tz");i.removeClass("lottery_select"),t._setBtnTips(),n.toggleClass("disable",0===t._selected.length)}),t._container.on("click",".j_lottery_select",function(){var e=$(this).data("rel");$(this).hasClass("lottery_select")?t._selected.splice($.inArray(e,t._selected),1):t._selected.push(e)}),t._container.on("click",".j_quick_tz",function(){return $(this).hasClass("disable")?(t._bubble||(t._bubble=t._showBubble({content:"至少选择一种比赛结果",wrap:t._container.find(".j_lottery_bubble")})),t._bubble.showBubble(),void 0):(window.open(t._buildUrl()),void 0)}),t._container.on("click",".j_quick_refresh",function(){t._index++,t._selected.length=0,t._index===t._singleLottery.length&&(t._index=0);var e=t._singleLottery[t._index];e.format_lotttery_end=t._formatTime(e.lottery_end_time-Math.floor((new Date).getTime()/1e3));var i=$.tb.format(t._tpl1,e),n=$.tb.format(t._tpl2,e);t._container.find(".j_quick_rpl1").replaceWith(i),t._container.find(".j_quick_rpl2").replaceWith(n),t._selected.push(3);var o=t._container.find(".j_bottom_tip");o.length&&o.remove(),clearInterval(t._t),t._t=t._countTime()})},_setBtnTips:function(){var t=this._singleLottery[this._index],e=this._container.find(".j_quick_tz"),i=e.children("span");1===this._selected.length?(3==this._selected[0]&&i.text("支持"+t.home+" 立即投注"),0==this._selected[0]&&i.text("支持"+t.away+" 立即投注")):i.text("眼光不错 立即投注")},_tpl1:['<div class="lottery_logo clearfix j_quick_rpl1">','<div class="lottery_logo_home">','<img src="http://tb1.bdstatic.com/tb/cms/com/lottery/team/#{home_imgsrc}">',"<p>#{home}</p>",'<div class="lottery_logo_cover lottery_icon_logo_frs"></div>',"</div>",'<div class="lottery_middle">','<div class="lottery_middle_info">','<p class="lottey_middle_time j_lottery_deadline" data-end="#{lottery_end_time}">#{format_lotttery_end}</p>',"<p>#{race}</p>","</div>",'<i class="lottery_icon_vs_small"></i>',"</div>",'<div class="lottery_logo_away">','<img src="http://tb1.bdstatic.com/tb/cms/com/lottery/team/#{away_imgsrc}">',"<p>#{away}</p>",'<div class="lottery_logo_cover lottery_icon_logo_frs"></div>',"</div>","</div>"].join(""),_tpl2:['<div class="lottery_btn j_quick_rpl2 clearfix">','<div class="lottery_basket_3 j_lottery_select" data-match="#{match_num}" data-rel="3" title="数字越小中奖可能越大" data-log="lottery_sp_3">主胜<span>#{scale_home}</span></div>','<div class="lottery_basket_0 j_lottery_select" data-match="#{match_num}" data-rel="0" title="数字越小中奖可能越大" data-log="lottery_sp_0">客胜<span>#{scale_away}</span></div>',"</div>"].join(""),_buildUrl:function(){var t=this,e="http://tieba.lecai.com/user/cooperator/baidu/bet_confirm.php?lottery_type=70",i="7001:7002%",n=parseInt($(".j_quick_ipt").val(),10);return i+=t._singleLottery[t._index].match_num+"("+t._selected.join(";")+")",e+"&content="+encodeURIComponent(i)+"&multiple="+n},_countTime:function(){var t=this,e=t._container.find(".j_lottery_deadline"),i=parseInt(e.data("end"))-Math.floor((new Date).getTime()/1e3),n=function(t){return 10>t?"0"+t:t},o=setInterval(function(){var l,_;return 0>=i?(t._container.find(".j_quick_tz").addClass("disable"),$(t._bottomTip("本场比赛投注已截止")).insertAfter(t._container.find(".j_quick_options")),t._singleLottery[t._index].isEnd=!0,clearInterval(o),void 0):(i-=1,l=new Date(1e3*i),_=n(Math.floor(i/3600))+":"+n(l.getUTCMinutes())+":"+n(l.getUTCSeconds()),e.text(_),void 0)},1e3);return o},_bottomTip:function(t){var e='<div class="lottery_nomatch_tip j_bottom_tip">'+t+"</div>";return e},_showBubble:function(t){var e={content:'<div class="lottery_bubble_content">'+t.content+"</div>",arrow_dir:"down",bubble_css:{top:-20,right:10,width:t.width||150},arrow_pos:{right:0},attr:" id='tb_message_tip_n' ",wrap:t.wrap,closeBtn:!1,level:1,arrowReq:!0},i=new UiBubbleTipBase(e);return i},_stats:function(){var t=this;t._container.on("click",function(e){var i=e.target||e.srcElement,n=$(i).data("log");n&&$.stats.track(n,"竞彩蓝球",t._page,"click")})}}});_.Module.define({path:"comforum/widget/LotteryHelper",sub:{initial:function(){},permute:function(r,n){for(var t=1,e=0;n>e;e++)t*=r-e;return parseInt(t,10)},combine:function(r,n){var t=this,e=t.permute(r,n);return e/=t.permute(n,n),parseInt(e,10)},fullCombination:function(r,n){for(var t=[],e=r.length,o=[],a=0;n>=a;a++)o.push(a-1);for(var u=n,i=!0;-1==o[0];){if(i){for(var f=[],a=1;n>=a;a++)f.push(r[o[a]]);t.push(f),i=!1}o[u]++,o[u]!=e?n>u?(u++,o[u]=o[u-1]):u==n&&(i=!0):(o[u]=0,u--)}return t},fullCombinationDantuo:function(r,n,t){var e=this,o=0;n&&(o=n.length);var a=t.length;if(r>o+a)return!1;for(var u=r-o,i=e.fullCombination(t,u),f=0,h=i.length;h>f;f++)i[f]=i[f].concat(n);return i},countCombinationDantuo:function(r,n,t){var e=this;n="undefined"==typeof n?0:n;var o=r-n;return e.combine(t,o)},arrayFullCombination:function(r){for(var n=this,t=function(r,n){for(var t=r,e=[];n.length>0;){for(var o=0;o<t.length;o++){for(var a=[n[0]],u=0;u<t[o].length;u++)a.push(t[o][u]);e.push(a)}n=n.slice(1,n.length)}return e},e=n.fullCombination(r[0],1),o=1;o<r.length;o++)e=t(e,r[o]);return e},arrayIsNoRepeat:function(r){for(var n=0,t={};n<r.length;n++){if(void 0!==t[r[n]])return!1;t[r[n]]=!0}return!0},arrayIsHasNoRepeat:function(r){for(var n=this,t=r.length,e=[],o=[],a=[],u=[],i=1,f=0;t>f;f++)e[f]=r[f].length,i*=e[f],o[f]=0;for(var f=0;i>f;f++)a[f]=[];for(var h=0;;){for(var f=0;t>f;f++)a[h][f]=o[f]+1,u[f]=r[f][a[h][f]-1];if(n.arrayIsNoRepeat(u))return!0;h++;for(var f=t-1;f>=0&&o[f]==e[f]-1;f--)o[f]=0;if(0>f)break;o[f]++}return!1},generateRandom:function(r,n,t){if(t>n-r)return[];for(var e=[],o=0;t>o;){var a=Math.round(Math.random()*(n-1)+r);-1===$.inArray(a,e)&&(e.push(a),o++)}return e},numberKeyOnly:function(r){var n=r.which,t=!1;return r.shiftKey&&(9==n&&(t=!0),t=!1),(57>=n&&n>=48||37==n||39==n||8==n||9==n||46==n||105>=n&&n>=96||229==n)&&(t=!0),t}}});var Observe=Observe||{};!function(n,t,e){"use strict";var r="function"==typeof define,o="undefined"!=typeof module&&module.exports;r?define(t):o?module.exports=t():e[n]=t()}("observe",function(){var n=[],t=[],e=function(n){function t(){e(),a=n}function e(){o(c.generic,function(t){t(n,a)})}function r(n,t){o(c.create,function(e){e(n,t)})}function i(n,t,e){o(c.update,function(t){t(n,old_item,e)})}function u(n,t){o(c["delete"],function(e){e(n,t)})}function f(){var e=a.length,o=n.length;if(e!==o||$.json.encode(a)!==$.json.encode(n))for(var f=Math.max(o,e),c=f;c>=0;c--){var p=a[c],s=n[c];c>e-1?r(s,c):c>o-1?u(p,c):s!==p&&i(s,p,c)}t()}var a=[],c={generic:[],create:[],update:[],"delete":[]};return n.pop=function(){f();var n=Array.prototype.pop.call(this,arguments),e=this.length;return u(n,e),t(),n},n.push=function(){f();var n=arguments[0],e=Array.prototype.push.apply(this,arguments);return r(n,e-1),t(),e},n.splice=function(n){f();for(var e=Array.prototype.slice.call(arguments,2),i=Array.prototype.splice.apply(this,arguments),a=i.length-1;a>=0;a--)u(i[a],n+a);return o(e,function(t,e){r(t,n+e)}),t(),i},{bind:function(n,t){if("undefined"==typeof c[n])throw"type is not allow";c[n].push(t)},unbind:function(){}}},r=function(n,t){return Object.prototype.toString.call(n)==="[object "+t+"]"},o=function(n,t){for(var e,r=0,o=n.length;o>r&&(e=t.call(n[r],n[r],r),e!==!1);r++);},i=function(n,t){var e=0;if(Array.prototype.indexOf)return n.indexOf(t);for(;e<n.length;e++)if(n[e]===t)return e;return-1};return function(o,u,f){if(arguments.length<2)throw"arguments length is not right";if(!r(o,"Array"))throw"first argument must be an array";r(u,"Function")&&(f=u,u="generic");var a=i(n,o);if(-1===a){a=n.length,n.push(o);var c=new e(o);t.push(c)}return t[a].bind(u,f),o}},Observe);
;_.Module.define({path:"comforum/widget/LecaiLotteryB",requires:["comforum/widget/LotteryHelper"],sub:{_container:null,_lotteryHelper:null,_singleLottery:null,_index:0,_selected:[],_t:null,_bubble:null,_page:"",initial:function(t,e,i,n,o){this._container=$("#lecai_lottery"),this._page=o,this._lotteryHelper=this.use("comforum/widget/LotteryHelper"),this._singleLottery=this._formatData(e),this._bindEvents(),i||1!==t?this._selected.push(3):this._selected.push(0),this._t=this._countTime(),this._stats(n)},_formatData:function(t){for(var e=$.parseJSON(t),i=0,n=e.length;n>i;i++)e[i].scale_home.toString().length>5&&(e[i].scale_home=e[i].scale_home.toPrecision(4)),e[i].scale_away.toString().length>5&&(e[i].scale_away=e[i].scale_away.toPrecision(4)),e[i].scale_equal.toString().length>5&&(e[i].scale_equal=e[i].scale_equal.toPrecision(4));return e},_formatTime:function(t){if(0>t)return"00:00:00";var e=new Date(1e3*t),i=function(t){return 10>t?"0"+t:t},n=i(Math.floor(t/3600))+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds());return n},_bindEvents:function(){var t=this;t._container.on("keydown",".j_quick_ipt",function(e){return t._lotteryHelper.numberKeyOnly(e)}).on("change",".j_quick_ipt",function(){var t=$(this).val();t||$(this).val(1)}).on("keyup",".j_quick_ipt",function(){var t=$(this).val();t&&(t=t.replace(/\D/g,"")),0===parseInt(t,10)&&(t=1),$(this).val(t)}),Observe.observe(t._selected,"create",function(e){var i=t._container.find(".lottery_icon_btn_"+e),n=t._container.find(".j_quick_tz");i.addClass("select"),t._bubble&&t._bubble.hideBubble(),t._setBtnTips(),n.toggleClass("disable",0===t._selected.length)}),Observe.observe(t._selected,"delete",function(e){var i=t._container.find(".lottery_icon_btn_"+e),n=t._container.find(".j_quick_tz");i.removeClass("select"),t._setBtnTips(),n.toggleClass("disable",0===t._selected.length)}),t._container.on("click",".j_lottery_select",function(){var e=$(this).data("rel");$(this).hasClass("select")?t._selected.splice($.inArray(e,t._selected),1):t._selected.push(e)}),t._container.on("click",".j_quick_tz",function(){return $(this).hasClass("disable")?(t._bubble||(t._bubble=t._showBubble({content:"至少选择一种比赛结果",wrap:t._container.find(".j_lottery_bubble")})),t._bubble.showBubble(),void 0):(window.open(t._buildUrl()),void 0)}),t._container.on("click",".j_quick_refresh",function(){t._index++,t._selected.length=0,t._index===t._singleLottery.length&&(t._index=0);var e=t._singleLottery[t._index];e.format_lotttery_end=t._formatTime(e.lottery_end_time-Math.floor((new Date).getTime()/1e3));var i=$.tb.format(t._tpl1,e),n=$.tb.format(t._tpl2,e);t._container.find(".j_quick_rpl1").replaceWith(i),t._container.find(".j_quick_rpl2").replaceWith(n),t._selected.push(3);var o=t._container.find(".j_bottom_tip");o.length&&o.remove(),clearInterval(t._t),t._t=t._countTime()})},_setBtnTips:function(){var t=this._singleLottery[this._index],e=this._container.find(".j_quick_tz"),i=e.children("span");1===this._selected.length?(3==this._selected[0]&&i.text("支持"+t.home+" 立即投注"),1==this._selected[0]&&i.text("眼光不错 立即投注"),0==this._selected[0]&&i.text("支持"+t.away+" 立即投注")):i.text("眼光不错 立即投注")},_tpl1:['<div class="lottery_logo clearfix j_quick_rpl1">','<div class="lottery_logo_home">','<img src="http://tb1.bdstatic.com/tb/cms/com/lottery/team/#{home_imgsrc}">',"<p>#{home}</p>",'<div class="lottery_logo_cover lottery_icon_logo_frs"></div>',"</div>",'<div class="lottery_middle">','<div class="lottery_middle_info">','<p class="lottey_middle_time j_lottery_deadline" data-end="#{lottery_end_time}">#{format_lotttery_end}</p>',"<p>#{race}</p>","</div>",'<i class="lottery_icon_vs_small"></i>',"</div>",'<div class="lottery_logo_away">','<img src="http://tb1.bdstatic.com/tb/cms/com/lottery/team/#{away_imgsrc}">',"<p>#{away}</p>",'<div class="lottery_logo_cover lottery_icon_logo_frs"></div>',"</div>","</div>"].join(""),_tpl2:['<div class="lottery_btn j_quick_rpl2">','<div class="lottery_icon_btn_3 j_lottery_select" data-match="#{match_num}" data-rel="3" title="数字越小中奖可能越大" data-log="lottery_sp_3">主胜<span>#{scale_home}</span></div>','<div class="lottery_icon_btn_1 j_lottery_select" data-match="#{match_num}" data-rel="1" title="数字越小中奖可能越大" data-log="lottery_sp_1">平局<span>#{scale_equal}</span></div>','<div class="lottery_icon_btn_0 j_lottery_select" data-match="#{match_num}" data-rel="0" title="数字越小中奖可能越大" data-log="lottery_sp_0">客胜<span>#{scale_away}</span></div>',"</div>"].join(""),_buildUrl:function(){var t=this,e="http://tieba.lecai.com/user/cooperator/baidu/bet_confirm.php?lottery_type=85",i="8501:8502%",n=parseInt($(".j_quick_ipt").val(),10);return i+=t._singleLottery[t._index].match_num+"("+t._selected.join(";")+")",e+"&content="+encodeURIComponent(i)+"&multiple="+n},_countTime:function(){var t=this,e=t._container.find(".j_lottery_deadline"),i=parseInt(e.data("end"))-Math.floor((new Date).getTime()/1e3),n=function(t){return 10>t?"0"+t:t},o=setInterval(function(){var _,l;return 0>=i?(t._container.find(".j_quick_tz").addClass("disable"),$(t._bottomTip("本场比赛投注已截止")).insertAfter(t._container.find(".j_quick_options")),t._singleLottery[t._index].isEnd=!0,clearInterval(o),void 0):(i-=1,_=new Date(1e3*i),l=n(Math.floor(i/3600))+":"+n(_.getUTCMinutes())+":"+n(_.getUTCSeconds()),e.text(l),void 0)},1e3);return o},_bottomTip:function(t){var e='<div class="lottery_nomatch_tip j_bottom_tip">'+t+"</div>";return e},_showBubble:function(t){var e={content:'<div class="lottery_bubble_content">'+t.content+"</div>",arrow_dir:"down",bubble_css:{top:-20,right:10,width:t.width||150},arrow_pos:{right:0},attr:" id='tb_message_tip_n' ",wrap:t.wrap,closeBtn:!1,level:1,arrowReq:!0},i=new UiBubbleTipBase(e);return i},_stats:function(t){var e=this;e._container.on("click",function(i){var n=i.target||i.srcElement,o=$(n).data("log");o&&($.stats.sendRequest("fr=tb0_forum&st_page="+e._page+"&st_mod=lottery_footer_new&st_fid="+t.forum.id+"&first_class="+encodeURIComponent(t.forum.first_class)+"&second_class="+encodeURIComponent(t.forum.second_class)+"&enfirst_class="+t.forum.first_class+"&ensecond_class="+t.forum.second_class+"&st_type="+o),$.stats.track(o,"新版足彩样式",e._page,"click"))})}}});_.Module.define({path:"comforum/widget/SsqLottery",requires:["comforum/widget/LotteryHelper"],sub:{_container:null,_red:[],_blue:[],_lotteryHelper:null,_redTpl:'<li><a href="javascript:;" class="ssq_icon_red">#{red}</a></li>',_blueTpl:'<li class="ssq_item_last"><a href="javascript:;" class="ssq_icon_blue">#{blue}</a></li>',initial:function(t,e,n){this._container=$("#ssq_lottery"),this._red=t,this._blue=e,this._lotteryHelper=this.use("comforum/widget/LotteryHelper"),this._countTime(n),this._bindEvent(),this._stats()},_countTime:function(t){var e=this,n=e._container.find(".j_count_time"),r=function(t){return 10>t?"0"+t:t},i=setInterval(function(){if(t--,0>=t)clearInterval(i),n.text("00:00:00");else{var e=new Date(1e3*t),o=r(Math.floor(t/3600)),l=r(e.getUTCMinutes()),s=r(e.getUTCSeconds());n.text(o+":"+l+":"+s)}},1e3)},_bindEvent:function(){var t=this,e=function(t){return 10>t?"0"+t:t};t._container.on("click",".j_ssq_go",function(){for(var n="http://tieba.lecai.com/user/cooperator/baidu/bet_confirm.php?lottery_type=50",r="5001%",i=0,o=t._red.length;o>i;i++)r+=e(t._red[i])+",";r=r.slice(0,-1),r+="|"+t._blue,n+="&content="+encodeURIComponent(r)+"&mutiple=1",window.open(n)}),t._container.on("click",".j_ssq_refresh",function(){var e=t._lotteryHelper.generateRandom(1,33,6),n=t._lotteryHelper.generateRandom(1,16,1),r="",i=function(t){return 10>t?"0"+t:t};e.sort(function(t,e){return t-e}),t._red=e,t._blue=n;for(var o=0,l=e.length;l>o;o++)r+=$.tb.format(t._redTpl,{red:i(e[o])});r+=$.tb.format(t._blueTpl,{blue:i(n[0])}),t._container.find(".j_ssq_lists").html(r)})},_stats:function(){this._container.on("click",function(t){var e=t.target||t.srcElement,n=$(e).data("log");n&&$.stats.track(n,"双色球","frs","click")})}}});_.Module.define({path:"comforum/widget/LotteryWrapper",requires:[],sub:{initial:function(t){var i=1==t.type?"lot_football":"lot_ssq";this.lotHead=$(".lot_wrap_head"),this.lotBody=$(".lot_wrap_body"),this.bindEvents(),this.lotHead.find("span."+i).trigger("click")},bindEvents:function(){var t=this;this.lotHead.on("click","span",function(){t.selBlock($(this))})},selBlock:function(t){if(!t.hasClass("sel")){var i=t.data("lot");this.lotHead.find("span").removeClass("sel"),t.addClass("sel"),this.lotBody.children("div").hide().end().children("."+i).show()}}}});_.Module.define({path:"common/widget/asidead",sub:{initial:function(t,s){if(t.length>0&&t.getData()){var a=t.getData(),i=this;t.find(".aside_ad_pic").on("click",function(){i._stats(s,"右侧","商业推广位统计",a,"点击"),i._stats(s,"frs页_右侧推广_图","PC端商业化游戏统计",a,"点击")}),i._stats(s,"右侧","商业推广位统计",a,"展现"),i._stats(s,"frs页_右侧推广_图","PC端商业化游戏统计",a,"展现")}},_stats:function(t,s,a,i,_){$.stats.track(s,a,t,_,{obj_id:i.id||"",obj_name:i.title||"",obj_url:i.pic||"",obj_type:"游戏",obj_subtype:i.subtype||""})}}});
;_.Module.define({path:"common/widget/asidead/asidead_slide",requires:["common/component/SlideShow"],sub:{_slideConfig:{target:"#aside_ad .asidead_slidewrap",nav:"#aside_ad .asidead_navs",activeClass:"active",interval:5e3,auto:!0,prev:"#aside_ad .asidead_control_left",next:"#aside_ad .asidead_control_right",delayLoadPic:!0,slide:{speed:400}},initial:function(){console.log(9),this.use("common/component/SlideShow",this._slideConfig)}}});_.Module.define({path:"comforum/widget/LoanAd",sub:{initial:function(){this._bindEvent()},_loan_config_data:{amountNoType:{3:"3<span>万元</span>",5:"5<span>万元</span>",10:"10<span>万元</span>",15:"15<span>万元</span>",20:"20<span>万元</span>",25:"25<span>万元</span>",30:"30<span>万元</span>"},amountEnterprise:{3:"10<span>万元</span>",5:"20<span>万元</span>",10:"30<span>万元</span>",15:"50<span>万元</span>",20:"100<span>万元</span>",25:"200<span>万元</span>",30:"500<span>万元</span>"},amountBuyCar:{10:"10<span>万元</span>",15:"15<span>万元</span>",20:"20<span>万元</span>",30:"30<span>万元</span>",50:"50<span>万元</span>"},amountBuyHouse:{30:"30<span>万元</span>",50:"50<span>万元</span>",80:"80<span>万元</span>",100:"100<span>万元</span>",200:"200<span>万元</span>"},amountNormal:{5:"5<span>万元</span>",10:"10<span>万元</span>",15:"15<span>万元</span>",20:"20<span>万元</span>",25:"25<span>万元</span>",30:"30<span>万元</span>"},timeNoType:{3:"3<span>个月</span>",6:"6<span>个月</span>",12:"1<span>年</span>",18:"18<span>个月</span>",24:"2<span>年</span>",36:"3<span>年</span>",60:"5<span>年</span>",120:"10<span>年</span>"},timeEnterprise:{6:"6<span>个月</span>",12:"1<span>年</span>",18:"18<span>个月</span>",24:"2<span>年</span>",36:"3<span>年</span>",60:"5<span>年</span>",120:"10<span>年</span>"},timeBuyCar:{12:"1<span>年</span>",24:"2<span>年</span>",36:"3<span>年</span>"},timeBuyHouse:{36:"3<span>年</span>",60:"5<span>年</span>",120:"10<span>年</span>",180:"15<span>年</span>",240:"20<span>年</span>",300:"25<span>年</span>",360:"30<span>年</span>"},timeNormal:{6:"6<span>个月</span>",12:"1<span>年</span>",18:"18<span>个月</span>",24:"2<span>年</span>",36:"3<span>年</span>",60:"5<span>年</span>",120:"10<span>年</span>"}},_parseListTpl:function(a){var n=[];return $.each(a,function(a,s){n.push("<li data-id="+a+" >"+s+"</li>")}),n.join("")},_parseDoubleList:function(a,n){var s=$("ul#loan_amount_list"),t=$("ul#loan_time_list"),p=this._parseListTpl(a),i=this._parseListTpl(n);s.empty().append(p),t.empty().append(i)},_refreshTpl:function(a){switch(a){case"企业":this._parseDoubleList(this._loan_config_data.amountEnterprise,this._loan_config_data.timeEnterprise);break;case"购车":this._parseDoubleList(this._loan_config_data.amountBuyCar,this._loan_config_data.timeBuyCar);break;case"购房":this._parseDoubleList(this._loan_config_data.amountBuyHouse,this._loan_config_data.timeBuyHouse);break;case"消费":this._parseDoubleList(this._loan_config_data.amountNormal,this._loan_config_data.timeNormal);break;default:this._parseDoubleList(this._loan_config_data.amountNoType,this._loan_config_data.timeNoType)}},_bindEvent:function(){var a=this;$("#loan_ad_mod").on("click",function(n){var s=n.target,t=$(s);if(("loan_type_btn"==s.id||"loan_type"===s.id)&&t.closest(".input_box").find(".sub_select li").addClass("loan_type_list"),"P"===s.tagName||"inner_box_btn"===s.className){t.closest(".input_box").css({}),t.closest(".input_box").find(".sub_select").toggle(),t.closest(".input_box").siblings().find(".sub_select").hide();var p=$("p#loan_type").text();a._refreshTpl(p)}if("LI"===s.tagName&&($targetInputBox=t.closest(".input_box"),$targetInputBox.find("p").html($(n.target).html()),$targetInputBox.find("p").tbattr("data-id",t.tbattr("data-id")),$targetInputBox.find(".sub_select").hide()),"loan_type_list"===s.className){var i=$("p#loan_amount"),e=$("p#loan_time");switch(t.text()){case"企业":i.html("50<span>万元</span>").tbattr("data-id","50"),e.html("1<span>年</span>").tbattr("data-id","12");break;case"购车":i.html("10<span>万元</span>").tbattr("data-id","10"),e.html("1<span>年</span>").tbattr("data-id","12");break;case"购房":i.html("50<span>万元</span>").tbattr("data-id","50"),e.html("5<span>年</span>").tbattr("data-id","60");break;case"消费":i.html("10<span>万元</span>").tbattr("data-id","10"),e.html("3<span>个月</span>").tbattr("data-id","3");break;default:i.html("5<span>万元</span>").tbattr("data-id","3"),e.html("1<span>年</span>").tbattr("data-id","12")}}}),$("#loan_search_btn").on("click",function(){var a="http://www.haodai.com/"+$("#loan_type").tbattr("data-id")+"-"+$("#loan_amount").tbattr("data-id")+"x"+$("#loan_time").tbattr("data-id")+"-0x0x9999/?ref=hd_1101746";$("#loan_search_btn").tbattr("href",a),$.stats.track("pb-aside金融吧好贷select广告","pb页","pb","click")})}}});_.Module.define({path:"pb/widget/NewsRecommend",requires:["common/component/Follower"],sub:{initial:function(){try{var e=$(".left_section");$(".left_section").height()>$(".right_section").height()&&($("#news_rcm").wrap('<div id="news_rcm_wrapper"></div>'),_.Module.use("common/component/Follower",{ctn:$("#news_rcm"),getLimitTop:function(){return{minTop:$("#news_rcm_wrapper").offset().top,maxTop:e.offset().top+e.height()-$("#news_rcm").height()}}}))}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"pb:widget/news_recommend/news_recommend.js",method:"",ln:24}),$.se({msg:(o.message||o.description).replace(/\s+/g,"-"),locator:"pb:widget/news_recommend/news_recommend.js",linenum:24}),console.log("errormsg:"+(o.message||o.description).replace(/\s+/g,"-"),"locator:pb:widget/news_recommend/news_recommend.js","linenum:24")}}}});_.Module.define({path:"comforum/widget/Rank",sub:{_container:null,initial:function(){this._container=$("#j_game_rank"),this._rightSection=$(".content .right_section"),this._bindEvents(),this._showTrack()},_showTrack:function(){for(var t=this._container.find(".game_rank_item"),a=0,o=t.length;o>a;a++){var e=$(t[a]).find(".rank_game_pic");"frs"===PageData.product?$.stats.track("frs页_右侧下方_排行榜","PC端商业化游戏统计",PageData.product||"","展现",{obj_url:e.tbattr("src"),obj_name:e.tbattr("alt"),obj_type:"游戏"}):"pb"===PageData.product&&$.stats.track("pb页_右侧下方_排行榜","PC端商业化游戏统计",PageData.product||"","展现",{obj_url:e.tbattr("src"),obj_name:e.tbattr("alt"),obj_type:"游戏"})}},_bindEvents:function(){var t=this;if(t._container.on("click",".game_rank_item",function(){var t=$(this).find(".rank_game_pic");"frs"===PageData.product?$.stats.track("frs页_右侧下方_排行榜","PC端商业化游戏统计",PageData.product||"","点击",{obj_url:t.tbattr("src"),obj_name:t.tbattr("alt"),obj_type:"游戏"}):"pb"===PageData.product&&$.stats.track("pb页_右侧下方_排行榜","PC端商业化游戏统计",PageData.product||"","点击",{obj_url:t.tbattr("src"),obj_name:t.tbattr("alt"),obj_type:"游戏"})}).on("mouseenter",".game_rank_item",function(){$(this).hasClass("game_rank_item_fold")&&$(this).removeClass("game_rank_item_fold").siblings(".game_rank_item").addClass("game_rank_item_fold")}),"frs"==PageData.product)var a=$("#game_rank").position().top+$(".core_title_wrap").height()-35,o=$(".content .forum_foot").position().top-$("#game_rank").height()-300;else if("pb"==PageData.product)var a=$("#game_rank").position().top+$(".search_main").height()+48,o=$(".content .pb_footer").position().top-$("#game_rank").height()-300;o-a>0&&_.Module.use("common/component/Follower",{ctn:$("#game_rank"),getLimitTop:{minTop:a,maxTop:o}},function(){})}}});_.Module.define({path:"pb/widget/top10",sub:{initial:function(t){try{this._addStats(),this._setFollow(t)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/top10/top10.js",method:"",ln:7}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/top10/top10.js",linenum:7}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/top10/top10.js","linenum:7")}},_addStats:function(){var t=PageData.forum.name,e="fr=tb0_forum&fname="+t;$.inArray(PageData.forum.name,["笑傲江湖电视剧","热带鱼","ac米兰","lol","圣堂","柯南"])>=0&&($.stats.sendRequest(e+"&st_type=pb_top10_show"),$("#follow_wrapper").find(".j_tieba_top10_content").delegate("a","click",function(){try{$.stats.sendRequest(e+"&st_type=pb_top10_click")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"pb:widget/top10/top10.js",method:"",ln:16}),$.se({msg:(t.message||t.description).replace(/\s+/g,"-"),locator:"pb:widget/top10/top10.js",linenum:16}),console.log("errormsg:"+(t.message||t.description).replace(/\s+/g,"-"),"locator:pb:widget/top10/top10.js","linenum:16")}}))},_setFollow:function(t){$(".left_section").height()>$(".right_section").height()&&$("#tieba_top10").length>0&&($("#tieba_top10").wrap('<div id="tieba_top10_wrapper"></div>'),_.Module.use("common/component/Follower",{ctn:$("#tieba_top10"),getLimitTop:function(){var e=t?$("#pb_content"):$(".left_section");return{minTop:$("#tieba_top10_wrapper").offset().top,maxTop:e.offset().top+e.height()-$("#tieba_top10").height()}}}))}}});(function(){window.TED=window.TED||{};window.TED["extend"]=h;window.TED["EventDispatcher"]=f;function h(n,o,j){function l(){}l.prototype=o.prototype;var m=new l();m.constructor=n;n.superclass=o;for(var k in j){m[k]=j[k]}n.prototype=m}function f(){this._events={}}f.prototype={on:function(k,l,j,i){j=j||this;this._events[k]=this._events[k]||[];this._events[k].push({listener:l,scope:j,args:i})},fireEvent:function(p,o,l){var q,n,k,m=this._events[p];if(!m){return false}else{for(n=0,k=m.length;n<k;n++){q=m[n];o=q.scope;l=l||q.args||[];q.listener.apply(o,l)}}},remove:function(n,o){if(!this._events[n]){return false}var m=this._events[n],l,k;for(l=0,k=m.length;l<k;l++){if(m[l].listener===o){m.splice(l,1);break}}if(m.length===0){delete this._events[n]}}};var b={addEvent:function(j,i,k){var l;if(j.addEventListener){l=function(n,m,o){n.addEventListener(m,o,false)}}else{l=function(n,m,o){n.attachEvent("on"+m,o)}}l(j,i,k);this.addEvent=l},removeEvent:function(k,j,l){var i;if(k.addEventListener){i=function(n,m,o){n.removeEventListener(m,linstener,false)}}else{i=function(n,m,o){n.detachEvent("on"+m,o)}}i(k,j,l);this.addEvent=i}};window.TED["Event"]=b;window.TED["HoverOverlay"]=d;function d(i){d.superclass.call(this);this.timer=null;this.container=i;this.holder=document.createElement("div");this.holder.className="tb-editor-overlay";this.holder.style.display="none";var j=this;b.addEvent(this.holder,"mouseover",function(){j.mouseover()});b.addEvent(this.holder,"mouseout",function(){j.mouseout()});this.content=document.createElement("div");this.content.className="overlay-content";this.arrow=document.createElement("span");this.arrow.className="arrow";this.holder.appendChild(this.arrow);this.holder.appendChild(this.content);this.container.appendChild(this.holder)}h(d,f,{container:null,holder:null,content:null,currentOpen:null,isOpen:false,closefunction:null,open:function(o,n,m,i,p,j,l){this.isOpen=true;this.currentOpen=l;this.arrow.style.left=p;var k=this.holder.style;k.left=o;k.top=n;k.width=m;k.height=i;k.display="block";this.content.innerHTML='<iframe width="100%" height="100%" frameborder="0" scrolling="no" src="'+j+'"></iframe>'},close:function(){this.isOpen=false;this.content.innerHTML="";this.holder.style.display="none";if(this.currentOpen){this.currentOpen.className=this.currentOpen.className.replace(" open","");this.currentOpen=null}this.fireEvent("close")},mouseover:function(){this.closefunction=this.close;this.close=function(){};if(this.timer!=null){clearTimeout(this.timer)}},mouseout:function(){var i=this;i.close=i.closefunction;i.timer=setTimeout(function(){i.close()},500)}});window.TED["Overlay"]=a;function a(i){a.superclass.call(this);this.container=i;this.holder=document.createElement("div");this.holder.className="tb-editor-overlay";this.holder.style.display="none";this.closeBtn=document.createElement("span");this.closeBtn.className="close";var j=this;b.addEvent(this.closeBtn,"click",function(){j.close()});this.content=document.createElement("div");this.content.className="overlay-content";this.arrow=document.createElement("span");this.arrow.className="arrow";this.holder.appendChild(this.closeBtn);this.holder.appendChild(this.arrow);this.holder.appendChild(this.content);this.container.appendChild(this.holder)}h(a,f,{closeButton:null,container:null,holder:null,content:null,currentOpen:null,isOpen:false,open:function(l,p,k,q,m,j){if(this.isOpen==true&&TED.Editor&&TED.Editor.Status.isPicassoOpen===true){var n=this;var o=$.dialog.confirm('<div id="maincontent" style="position:absolute;"><img style="margin:10px 10px 10px 10px;width:68px;height:68px;" src="http://static.tieba.baidu.com/tb/editor/v2/picasso/alarm.gif" /><div id="tipscontent" style="position:absolute;left:100px;top:15px;width:270px;font-size:14px;font-family:\u5b8b\u4f53" ><b>\u60a8\u6b63\u5728\u7f16\u8f91\u6d82\u9e26\uff0c\u73b0\u5728\u9000\u51fa\u5c06\u4e0d\u4f1a\u4fdd\u5b58\uff0c\u60a8\u786e\u5b9a\u8981\u9000\u51fa\uff1f</b></div></div>',{title:"\u6d82\u9e26\u7f16\u8f91\u5668",acceptValue:"\u786e\u5b9a",cancelValue:"\u53d6\u6d88"});o.width(420);o.height(90);o.bind("onaccept",function(){TED.Editor.Status.isPicassoOpen=false;if(n.picassoPanel){n.picassoPanel.destroy();n.picassoPanel=null}n.isOpen=true;n.arrow.style.left=m;var r=n.holder.style;r.left=l;r.top=p;r.width=k;r.height=q;r.display="block";n.content.innerHTML='<iframe width="100%" height="100%" frameborder="0" scrolling="no" src="'+j+'"></iframe>'})}else{this.isOpen=true;this.arrow.style.left=m;var i=this.holder.style;i.left=l;i.top=p;i.width=k;i.height=q;i.display="block";this.content.innerHTML='<iframe width="100%" height="100%" frameborder="0" scrolling="no" src="'+j+'"></iframe>'}this.fireEvent("open")},close:function(j){if(TED.Editor&&TED.Editor.Status.isPicassoOpen===true&&j!==true){var k=this;var i=$.dialog.confirm('<div id="maincontent" style="position:absolute;"><img style="margin:10px 10px 10px 10px;width:68px;height:68px;" src="http://static.tieba.baidu.com/tb/editor/v2/picasso/alarm.gif" /><div id="tipscontent" style="position:absolute;left:100px;top:15px;width:270px;font-size:14px;font-family:\u5b8b\u4f53"><b>\u60a8\u6b63\u5728\u7f16\u8f91\u6d82\u9e26\uff0c\u73b0\u5728\u9000\u51fa\u5c06\u4e0d\u4f1a\u4fdd\u5b58\uff0c\u60a8\u786e\u5b9a\u8981\u9000\u51fa\uff1f</b></div></div>',{title:"\u6d82\u9e26\u7f16\u8f91\u5668",acceptValue:"\u786e\u5b9a",cancelValue:"\u53d6\u6d88"});i.width(420);i.height(90);i.bind("onaccept",function(){TED.Editor.Status.isPicassoOpen=false;if(k.picassoPanel){k.picassoPanel.destroy();k.picassoPanel=null}k.isOpen=false;k.content.innerHTML="";k.holder.style.display="none";if(k.currentOpen){k.currentOpen.className=k.currentOpen.className.replace(" open","");k.currentOpen=null}k.fireEvent("close")})}else{if(j==true){TED.Editor&&(TED.Editor.Status.isPicassoOpen=false)}this.isOpen=false;this.content.innerHTML="";this.holder.style.display="none";if(this.currentOpen){this.currentOpen.className=this.currentOpen.className.replace(" open","");this.currentOpen=null}this.fireEvent("close")}},toggle:function(n,m,l,i,o,j,k){if(this.currentOpen&&this.currentOpen===k){this.close()}else{k.className=k.className+" open";this.currentOpen=k;this.open(n,m,l,i,o,j)}}});window.TED["augmentObject"]=c;function c(k,j){for(var i in j){if(j.hasOwnProperty(i)){k[i]=k[i]!==undefined?k[i]:j[i]}}}var e={get:function(j,l,i){var k=this.getXHR();k.open("GET",j,true);k.setRequestHeader("cache",false);k.onreadystatechange=function(){if(k.readyState!==4){return}if(k.status==200){if(typeof l==="function"){l(k.responseText)}}else{if(typeof i==="function"){i(k.statusText)}}k=null};k.send(null)},getXHR:(function(){if(window.XMLHttpRequest){return function(){return new window.XMLHttpRequest()}}else{if(window.ActiveXObject){return function(){return new window.ActiveXObject("Microsoft.XMLHTTP")}}else{throw"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301AJAX!"}}})()};window.TED["SimpleAjax"]=e;var g=(function(){var k="tieba";function o(p){return p.replace(/[_\s]/g,function(q){return q=="_"?"__":"_s"})}function l(){return document.getElementById(k+"-storage")}function n(p){return{}.toString.call(p)==="[object Date]"&&p.toString()!=="Invalid Date"&&!isNaN(p)}function j(){var p;if(window.localStorage){p=m()}else{if(window.ActiveXObject){p=i()}}return p}function i(){var p=document.createElement("div");p.style.display="none";p.id=k+"-storage";document.body.appendChild(p);l().addBehavior("#default#userData");return{set:function(r,t,q){var s=l(),w=o(r),v=q&&q.expires?q.expires:new Date().getTime()+365*24*60*60*1000;n(v)&&(v=v.getTime());s.expires=new Date(v).toUTCString();try{s.setAttribute(w,t);s.save(w)}catch(u){throw"baidu.data.storage.set error! Maybe space overflow."}s=null},get:function(q){var r=l(),u=o(q),t=null;try{r.load(u);t=r.getAttribute(u);return t}catch(s){throw s.message}},del:function(q){var r=l(),u=o(q),t;try{r.load(u);t=r.getAttribute(u);if(t){r.removeAttribute(u);r.expires=new Date(315532799000).toUTCString();r.save(u);return true}else{return false}}catch(s){return false}}}}function m(){return{set:function(q,r,p){var v=window.localStorage,u=o(q),t=p&&p.expires?p.expires:0;n(t)&&(t=t.getTime());try{v.setItem(u,t+"|"+r)}catch(s){throw"baidu.data.storage.set error! Maybe space overflow."}},get:function(q){var v=window.localStorage,u=o(q),t=null,p,s;try{t=v.getItem(u)}catch(r){return null}if(t){p=t.indexOf("|");s=parseInt(t.substring(0,p),10);if(new Date(s).getTime()>new Date().getTime()||s==0){t=t.substring(p+1,t.length);return t}else{t=null;this.del(q);return null}}else{return null}},del:function(p){var t=window.localStorage,s=o(p),r=null;try{r=t.getItem(s)}catch(q){return false}if(r){r=r.substring(r.indexOf("|")+1,r.length);r&&t.removeItem(s);return true}else{return false}}}}return{set:function(q,s,t,p){var r=this;!r._storage&&(r._storage=j());r._storage.set.apply(r._storage,arguments)},get:function(p){var q=this;!q._storage&&(q._storage=j());return q._storage.get.apply(q._storage,arguments)},remove:function(p,r){var q=this;!q._storage&&(q._storage=j());return q._storage.del.apply(q._storage,arguments)},isSupport:function(){return !!(window.localStorage||window.ActiveXObject)}}})();window.TED["Storage"]=g})();;(function(){var extend=TED.extend,EventDispatcher=TED.EventDispatcher,Event=TED.Event,Overlay=TED.Overlay,augmentObject=TED.augmentObject,Ajax=TED.SimpleAjax,Storage=TED.Storage;window.TED["EditorPlugins"]=window.TED["EditorPlugins"]||{};window.TED["EditorPlugins"]["Refer"]=Refer;function Refer(attrs){attrs=attrs||{};augmentObject(attrs,this.constructor.defaultConfig);this.config=attrs}Refer.defaultConfig={checkDelay:100,offsetLeft:1,offsetTop:18,dataUrl:"/at-sug",uid:null};Refer.prototype={constructor:Refer,disabled:false,boxWrapper:null,init:function(editor){editor.on("keydown",this.onEditorKeydown,this);editor.on("keyup",this.onEditorKeyup,this);editor.on("click",this.onEditorClick,this);editor.on("blur",function(){this.hide()},this);this.box=new Box(editor.editAreaWrapper);this.box.on("select",this.onSelect,this);this.data=new Data(this.config.dataUrl,this.config.uid);this.data.on("datachange",this.box.update,this.box);this.editor=editor},destroy:function(){},enable:function(){this.disabled=false},disable:function(){this.disabled=true},query:function(key){this.data.getData(key)},onSelect:function(value){var el=this.editor.getSelectedElement();if(value!==null){el.innerHTML="@"+value}this.breakMode(32)},onEditorKeydown:function(e){if(this.disabled){return}if(this.box.isShow){switch(e.keyCode){case 38:this.box.pre();break;case 40:this.box.next();break;case 13:this.onSelect(this.box.getValue());this.box.hide();break;default:return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}e.exitFunction=true}},onEditorKeyup:function(e){if(this.disabled){return}var code=e.keyCode;if((code===50&&e.shiftKey)||(code===50&&this.lastUpCode===16)){this.checkEnterMode()}var that=this;clearTimeout(this.timer);this.timer=setTimeout(function(){that.checkShowBox()},this.config.checkDelay);this.lastUpCode=e.keyCode},onEditorClick:function(){var that=this;clearTimeout(this.timer);this.timer=setTimeout(function(){that.checkShowBox()},this.config.checkDelay)},checkEnterMode:function(){var that=this.editor;var s=that.getSelection(),r,c;if(that.ua.ie?s.type.toLowerCase()!=="none":!s.isCollapsed){return}r=that.getRange();if(that.ua.ie){if(this.editor.isEmpty()){return}r.moveStart("character",-1);r.select();c=r.text}else{var con=r.startContainer,offset=r.startOffset;if(con.nodeType===1&&offset>0){con=con.childNodes[offset-1];offset=con.length}if(con.nodeType===3&&offset>0){r.setStart(con,offset-1);s.removeAllRanges();s.addRange(r);c=s.toString()}}var el=that.getSelectedElement();if(c==="@"&&(el.className!=="at"||el.innerHTML!=="@")){that.execCommand("inserthtml",'<span class="at">@</span>')}else{if(that.ua.ie){r.collapse(false);r.select()}else{s.collapseToEnd()}}},checkShowBox:function(){var el=this.editor.getSelectedElement(),value=el.innerHTML,key;if(el.className==="at"&&value.charAt(0)==="@"){key=value.substring(1).replace(/<br.*>$/i,"");if(key.search(/[^\w\u4E00-\u9FA5]/)===-1){this.show(el.offsetLeft+this.config.offsetLeft-this.editor.editArea.scrollLeft,el.offsetTop+this.config.offsetTop-this.editor.editArea.scrollTop);this.query(key)}else{this.hide()}}else{this.hide()}},hide:function(){this.box.hide();this.data.getting=null},show:function(x,y){this.box.show(x,y)},breakMode:function(charcode){var that=this.editor,el=that.getSelectedElement(),node,r;if(charcode===32){node=document.createElement("span");node.innerHTML="&nbsp;";node=node.firstChild}else{node=document.createTextNode(String.fromCharCode(charcode))}if(el.nextSibling){el.parentNode.insertBefore(node,el.nextSibling)}else{el.parentNode.appendChild(node)}if(that.ua.ie){r=document.selection.createRange();r.moveEnd("character",1);r.collapse(false);r.select()}else{s=window.getSelection();r=document.createRange();r.selectNode(node);s.removeAllRanges();s.addRange(r);s.collapseToEnd()}}};function Box(container){Box.superclass.call(this);this.container=container;this.holder=document.createElement("div");this.holder.innerHTML='<span class="box-title">\u60f3\u7528@\u63d0\u5230\u8c01\uff1f<span>';this.holder.className="box-holder";this.holder.style.display="none";this.ul=document.createElement("ul");this.ul.className="box-ul-empty";this.holder.appendChild(this.ul);container.appendChild(this.holder);this.initEvents()}extend(Box,EventDispatcher,{isShow:false,index:null,length:0,initEvents:function(){var that=this;this.bindClick=function(){that.onClick.apply(that,arguments)};this.bindMousedown=function(){that.onMousedown.apply(that,arguments)};Event.addEvent(this.ul,"click",this.bindClick);Event.addEvent(this.ul,"mousedown",this.bindMousedown)},onMousedown:function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},onClick:function(e){var target=e.target||e.srcElement;if(target.tagName.toLowerCase()==="li"){this.fireEvent("select",null,[target.innerHTML]);this.hide()}},update:function(data){if(!this.isShow){return}if(data.length===0){this.ul.innerHTML="";this.ul.className="box-ul-empty"}else{this.ul.className="";this.ul.innerHTML='<li unselectable="on">'+data.join('</li><li unselectable="on">')+"</li>"}this.length=data.length},pre:function(){if(this.length===0){return}if(this.index===null){this.select(this.length-1)}else{this.select(this.index===0?this.length-1:this.index-1)}},next:function(){if(this.length===0){return}if(this.index===null){this.select(0)}else{this.select(this.index===this.length-1?0:this.index+1)}},select:function(index){if(this.index!==null){this.ul.childNodes[this.index].className=""}this.ul.childNodes[index].className="focus";this.index=index},getValue:function(){return this.index!==null?this.ul.childNodes[this.index].innerHTML:null},show:function(x,y){if(this.isShow){if(x===this.x&&y===this.y){return}else{this.reset()}}else{this.holder.style.display="block";this.isShow=true}this.holder.style.left=x+"px";this.holder.style.top=y+"px";this.x=x;this.y=y},hide:function(){if(!this.isShow){return}this.reset();this.holder.style.display="none";this.isShow=false},reset:function(){this.ul.innerHTML="";this.length=0;this.ul.className="box-ul-empty"}});function Data(url,uid){Data.superclass.call(this);this.url=url;this.uid=uid}extend(Data,EventDispatcher,{dataCache:{},queryCache:{},data:null,getData:function(key){if(this.getting===key){return}this.getting=key;if(key===""){this.setData([],true);return}if(this.dataCache[key]){this.setData(this.dataCache[key],true);return}if(this.queryCache[key]){return}this.queryCache[key]=true;var that=this;Ajax.get(this.url+"?query="+encodeURIComponent(key)+"&uid="+this.uid+"&ie=utf-8",function(data){delete that.queryCache[key];data=that.parseData(data);that.dataCache[key]=data;that.setData(data,key===that.getting)},function(error){delete that.queryCache[key];that.fireEvent("error",[error])})},setData:function(value,need){this.data=value;if(need){this.fireEvent("datachange",null,[value])}},parseData:function(data){try{data=eval("("+data+")");if(data.error===0){return data.msg}else{throw new Error("\u670d\u52a1\u5668\u8fd4\u56de\u9519\u8bef\uff1a"+data.error)}}catch(e){throw new Error("\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u6709\u8bef\uff01")}}})})();;(function(){var f=TED.extend,c=TED.EventDispatcher,b=TED.EditorPlugins.Refer;function e(g){e.superclass.call(this);this.init(g||{})}e.defaultConfig={height:"200px",width:"400px",maxHeight:null,autoFocus:true,autoEnable:true,autoHeight:false,editAreaClassName:"tb-editor-editarea",editAreaWrapperClassName:"tb-editor-editarea-wrapper",wrapperClassName:"tb-editor-wrapper",disabledEditAreaClassName:"tb-editor-editarea disabled",disabledWrapperClassName:"tb-editor-wrapper disabled",imageClassName:"BDE_Image",smileyClassName:"BDE_Smiley",emptyClassName:"BDE_Empty",musicClassName:"BDE_Music",didaDelay:300,imageWidthLimit:560};e.ResizeImage=function(h){h.removeAttribute("onload");h.removeAttribute("onerror");if(h.width>e.defaultConfig.imageWidthLimit){var i=h.width;var g=h.height;h.setAttribute("width",e.defaultConfig.imageWidthLimit);h.setAttribute("height",e.defaultConfig.imageWidthLimit*g/i);h.setAttribute("changedsize",true)}};f(e,c,{config:null,enabled:false,focused:false,autoHeighted:false,wrapper:null,editArea:null,container:null,id:null,editValidHTML:["br","embed"],submitValidHTML:["br","embed"],execCommand:function(l,k){if(!this.enabled){return false}if(!this.focused){this.focus()}var h=true,l=l.toLowerCase(),n;if(typeof this["cmd_"+l]==="function"){var g=[];for(var j=1;j<arguments.length;j++){g.push(arguments[j])}n=this["cmd_"+l].apply(this,g);h=n[0];if(n[1]){l=n[1]}if(n[2]){k=n[2]}}if(h){try{document.execCommand(l,false,k)}catch(m){throw new Error("\u6267\u884caction\u65f6\uff0c\u53d1\u751f\u5f02\u5e38\uff1a"+m.message)}}if(!this.ua.ie){this.saveRange()}},getImageNum:function(){return this.getTagNum("img",this.config.imageClassName)},getSmileyNum:function(){return this.getTagNum("img",this.config.smileyClassName)},getHtml:function(){this.fireEvent("gethtml");return this.filteSubmitHTML()},setHtml:function(g){this.editArea.innerHTML=g},enable:function(){if(!this.enabled){this.attachEvents();this.editArea.style.display="none";this.editArea.contentEditable=true;this.editArea.style.display="block";if(this.ua.gecko&&this.editArea.innerHTML===""){this.editArea.innerHTML="<br>"}this.editArea.className=this.config.editAreaClassName;this.wrapper.className=this.config.wrapperClassName;if(this.config.autoFocus){this.focus()}this.enabled=true}else{if(this.config.autoFocus&&!this.focused){this.focus()}}},disable:function(){if(!this.enabled){return}if(this.focused){this.blur()}this.detachEvents();this.editArea.contentEditable=false;this.wrapper.className=this.config.disabledWrapperClassName;this.editArea.className=this.config.disabledEditAreaClassName;this.enabled=false},focus:function(){this.editArea.focus();if(this.ua.webkit){this.resumeRange()}},blur:function(){if(!this.ua.ie){this.saveRange()}this.editArea.blur()},isEmpty:function(){return this.isEmptyContent(this.editArea.innerHTML)},enableAutoHeight:function(h){if(h&&h<=parseInt(this.config.height)){if(this.autoHeighted){this.disableAutoHeight()}return}h=h||this.config.maxHeight;if(this.ua.ie>0&&this.ua.ie<=6){var g=parseInt(this.config.height),i;if(h){i="this.scrollHeight <= "+g+' ? "'+g+'px" : (this.scrollHeight >= '+h+' ? "'+h+'px" : "auto")'}else{i="this.scrollHeight <= "+g+' ? "'+g+'px" : "auto"'}this.editArea.style.setExpression("height",i)}else{this.editArea.style.minHeight=this.config.height;this.editArea.style.height="auto";if(h){this.editArea.style.maxHeight=h+"px"}}this.autoHeighted=true},disableAutoHeight:function(){if(this.ua.ie>0&&this.ua.ie<=6){this.editArea.style.removeExpression("height")}this.editArea.style.height=this.config.height;this.autoHeighted=false},empty:function(){this.editArea.innerHTML=""},ua:function(){var k=function(m){var o=0;return parseFloat(m.replace(/\./g,function(){return(o++==1)?"":"."}))},p=navigator,n={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:p.cajaVersion,secure:false,os:null},j=navigator&&navigator.userAgent,l=window&&window.location,h=l&&l.href,g;n.secure=h&&(h.toLowerCase().indexOf("https")===0);if(j){if((/windows|win32/i).test(j)){n.os="windows"}else{if((/macintosh/i).test(j)){n.os="macintosh"}}var i;if(i=/Trident\/(\d+)/.exec(j)){n.trident=i[1]}if((/KHTML/).test(j)){n.webkit=1}g=j.match(/AppleWebKit\/([^\s]*)/);if(g&&g[1]){n.webkit=k(g[1]);if(/ Mobile\//.test(j)){n.mobile="Apple"}else{g=j.match(/NokiaN[^\/]*/);if(g){n.mobile=g[0]}}g=j.match(/AdobeAIR\/([^\s]*)/);if(g){n.air=g[0]}}if(!n.webkit){g=j.match(/Opera[\s\/]([^\s]*)/);if(g&&g[1]){n.opera=k(g[1]);g=j.match(/Opera Mini[^;]*/);if(g){n.mobile=g[0]}}else{g=j.match(/MSIE\s([^;]*)/);if(g&&g[1]){n.ie=k(g[1])}else{g=j.match(/Gecko\/([^\s]*)/);if(g){n.gecko=1;g=j.match(/rv:([^\s\)]*)/);if(g&&g[1]){n.gecko=k(g[1])}}}}}}return n}(),isUCWeb:function(){var g=navigator.userAgent.toString();if(g.indexOf("X11;")>-1&&g.indexOf("Linux i686;")>-1&&g.indexOf("Gecko")>-1&&g.indexOf("Firefox")<0&&g.indexOf("Opera")<0){return true}return false},isAndroidOS:function(){var g=navigator.userAgent.toString();if(g.match(/android/i)!=null){return true}return false},isEmptyContent:function(g){if(!g){return true}return(""===g.replace(/<br[^>]*>/gi,"").replace(/<\/?(?:span|a)[^>]*>/gi,"").replace(/[\u3000\s]+/g,"").replace(/&nbsp;/g,""))},init:function(g){this.augmentObject(g,this.constructor.defaultConfig||{});this.config=g;if(this.constructor.registerInstance){this.id=this.constructor.registerInstance(this,g.id)}this.initComponents(g);this.appendToDom();this.initEvents();this.initConfig(g)},initComponents:function(g){if(g.container){if(typeof g.container==="string"){this.container=document.getElementById(g.container)}else{if(typeof g.container==="object"&&g.container.nodeType===1){this.container=g.container}}}this.container=this.container||document.body;this.editArea=document.createElement("div");this.editArea.className=g.disabledEditAreaClassName;this.wrapper=document.createElement("div");this.wrapper.className=g.disabledWrapperClassName;this.editAreaWrapper=document.createElement("div");this.editAreaWrapper.className=g.editAreaWrapperClassName;this.editArea.style.height=g.height;this.wrapper.style.width=g.width},appendToDom:function(){this.editAreaWrapper.appendChild(this.editArea);this.wrapper.appendChild(this.editAreaWrapper);this.container.appendChild(this.wrapper)},initConfig:function(g){if(g.autoHeight){this.enableAutoHeight()}if(g.enableRefer){this.addPlugin("refer",new b({uid:this.config.uid}))}if(g.autoEnable){var h=this;setTimeout(function(){h.enable();h.fireEvent("initcomplete")},10)}else{this.fireEvent("initcomplete")}},initEvents:function(){var g=this;this.bindMousedown=function(){g.onMousedown.apply(g,arguments)};this.bindMouseup=function(){g.onMouseup.apply(g,arguments)};this.bindClick=function(){g.onClick.apply(g,arguments)};this.bindDoubleclick=function(){g.onDoubleclick.apply(g,arguments)};this.bindKeydown=function(){g.onKeydown.apply(g,arguments)};this.bindKeyup=function(){g.onKeyup.apply(g,arguments)};this.bindKeypress=function(){g.onKeypress.apply(g,arguments)};this.bindPaste=function(){g.onPaste.apply(g,arguments)};this.bindBlur=function(){g.onBlur.apply(g,arguments)};this.bindFocus=function(){g.onFocus.apply(g,arguments)}},attachEvents:function(){var g=this.editArea;if(!this.ua.ie){g.addEventListener("mousedown",this.bindMousedown,false);g.addEventListener("mouseup",this.bindMouseup,false);g.addEventListener("click",this.bindClick,false);g.addEventListener("dblclick",this.bindDoubleclick,false);g.addEventListener("keypress",this.bindKeypress,false);g.addEventListener("keyup",this.bindKeyup,false);g.addEventListener("keydown",this.bindKeydown,false);g.addEventListener("paste",this.bindPaste,false);g.addEventListener("blur",this.bindBlur,false);g.addEventListener("focus",this.bindFocus,false)}else{g.attachEvent("onmousedown",this.bindMousedown);g.attachEvent("onmouseup",this.bindMouseup);g.attachEvent("onclick",this.bindClick);g.attachEvent("ondblclick",this.bindDoubleclick);g.attachEvent("onkeypress",this.bindKeypress);g.attachEvent("onkeyup",this.bindKeyup);g.attachEvent("onkeydown",this.bindKeydown);g.attachEvent("onpaste",this.bindPaste);g.attachEvent("onbeforedeactivate",this.bindBlur);g.attachEvent("onbeforeactivate",this.bindFocus)}this.on("dida",this.onDida,this)},detachEvents:function(){var g=this.editArea;if(!this.ua.ie){g.removeEventListener("mousedown",this.bindMousedown,false);g.removeEventListener("mouseup",this.bindMouseup,false);g.removeEventListener("click",this.bindClick,false);g.removeEventListener("dblclick",this.bindDoubleclick,false);g.removeEventListener("keypress",this.bindKeypress,false);g.removeEventListener("keyup",this.bindKeyup,false);g.removeEventListener("keydown",this.bindKeydown,false);g.removeEventListener("paste",this.bindPaste,false);g.removeEventListener("blur",this.bindBlur,false);g.removeEventListener("focus",this.bindFocus,false)}else{g.detachEvent("onmousedown",this.bindMousedown);g.detachEvent("onmouseup",this.bindMouseup);g.detachEvent("onclick",this.bindClick);g.detachEvent("ondblclick",this.bindDoubleclick);g.detachEvent("onkeypress",this.bindKeypress);g.detachEvent("onkeyup",this.bindKeyup);g.detachEvent("onkeydown",this.bindKeydown);g.detachEvent("onpaste",this.bindPaste);g.detachEvent("onbeforedeactivate",this.bindBlur);g.detachEvent("onbeforeactivate",this.bindFocus)}this.remove("dida",this.onDida)},onMousedown:function(g){if(g.target&&g.target.tagName==="IMG"){if(g.preventDefault){g.preventDefault()}}this.fireEvent("mousedown",null,[g]);if(g.exitFunction){return}},onMouseup:function(g){this.fireEvent("mouseup",null,[g]);if(g.exitFunction){return}if(!this.ua.ie){this.saveRange()}},onClick:function(g){this.fireEvent("click",null,[g]);if(g.exitFunction){return}},onDoubleclick:function(g){this.fireEvent("doubleclick",null,[g]);if(g.exitFunction){return}},onKeydown:function(h){this.fireEvent("keydown",null,[h]);if(h.exitFunction){return}if(h.keyCode===8){if(this.ua.ie){var g=this.getRange();if(g.item){g.item(0).outerHTML="";h.returnValue=false}}}},onKeypress:function(i){this.fireEvent("keypress",null,[i]);if(i.exitFunction){return}var g=i.keyCode;switch(g){case 13:if(this.ua.ie){var h=this.getRange();if(h){h.pasteHTML("<br>");h.collapse(false);h.select()}i.returnValue=false}else{if(this.ua.webkit){document.execCommand("insertlinebreak");i.preventDefault()}}break}},onKeyup:function(g){this.fireEvent("keyup",null,[g]);if(g.exitFunction){return}if(!this.ua.ie){this.saveRange()}if(g.stopPropagation){g.stopPropagation()}},onPaste:function(h){this.fireEvent("paste",null,[h]);if(h.exitFunction){return}if(this.ua.ie){this.doPasteIE(h);this.fireEvent("afterpaste",null,[h])}else{var g=this;setTimeout(function(){g.doPaste();g.fireEvent("afterpaste",null,[h])},5)}},didaTimer:null,savedHeight:null,startDida:function(){var g=this;this.didaTimer=setInterval(function(){g.fireEvent("dida")},this.config.didaDelay)},stopDida:function(){clearInterval(this.didaTimer)},onDida:function(){if(this.autoHeighted){if(this.savedHeight===null){this.savedHeight=this.wrapper.scrollHeight;return}var g=this.wrapper.scrollHeight;if(this.savedHeight&&g!==this.savedHeight){this.fireEvent("heightChanged",null,[g,g-this.savedHeight]);this.savedHeight=g}}},onBlur:function(g){this.stopDida();this.focused=false;this.fireEvent("blur",null,[g]);if(g.exitFunction){return}if(this.ua.ie){this.saveRange()}},onFocus:function(g){this.startDida();this.focused=true;this.fireEvent("focus",null,[g]);if(g.exitFunction){return}this.resumeRange()},augmentObject:function(i,h){for(var g in h){if(h.hasOwnProperty(g)){i[g]=i[g]!==undefined?i[g]:h[g]}}},getSelection:function(){return window.getSelection?window.getSelection():document.selection},getRange:function(){return this.ua.ie?document.selection.createRange():window.getSelection().getRangeAt(0)},createRange:function(){return this.ua.ie?document.body.createTextRange():document.createRange()},getSelectedElement:function(){var g=this.getRange();if(this.ua.ie){return g.item?g.item(0):g.parentElement()}var h=g.commonAncestorContainer;if(h.nodeType===3){h=h.parentNode}return h},doPasteIE:function(g){var h=clipboardData.getData("Text");if((!h)||h==""){return true}h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\s/g,"&nbsp;").replace(/\u3000/g,"&nbsp;&nbsp;");this.execCommand("inserthtml",h);g.returnValue=false},doPaste:function(){this.saveCursor();this.editArea.innerHTML=this.filteEditHTML();this.ensureCursor()},filteEditHTML:function(){return html=this.editArea.innerHTML.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(/<\/ ?tr[^>]*>/gi,"[br]").replace(/<\/ ?td[^>]*>/gi,"&nbsp;&nbsp;").replace(/<(ul|dl|ol)[^>]*>/gi,"[br]").replace(/<(li|dd)[^>]*>/gi,"[br]").replace(/<p [^>]*>/gi,"[br]").replace(new RegExp("<(/?(?:"+this.editValidHTML.join("|")+")[^>]*)>","gi"),"[$1]").replace(new RegExp('<span([^>]*class="?at"?[^>]*)>',"gi"),"[span$1]").replace(new RegExp('<img([^>]*class="?(?:'+this.config.imageClassName+"|"+this.config.emptyClassName+"|"+this.config.smileyClassName+"|"+this.config.flashClassName+"|"+this.config.musicClassName+'"?[^>]*)>',"gi"),"[img$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+this.editValidHTML.join("|")+"|img|span)[^\\]]*)\\]","gi"),"<$1>").replace(/\r?\n/gi,"<br>")},filteSubmitHTML:function(){this.reLayout(true);var o=this.editArea.innerHTML.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(new RegExp("<(/?(?:"+this.submitValidHTML.join("|")+")[^>]*)>","gi"),"[$1]").replace(/<strong[^>]*>/gi,"[strong]").replace(/<\/strong[^>]*>/gi,"[/strong]").replace(/<b[^>]*>/gi,"[strong]").replace(/<\/b[^>]*>/gi,"[/strong]").replace(new RegExp('<span([^>]*class="?edit_font_normal"?[^>]*)>@</span>',"gi"),"@").replace(/<span([^>]*)>/gi,"[span$1]").replace(/<\/span[^>]*>/gi,"[/span]").replace(/<font[^>]*color=(\")?#E10602(\")?[^>]*>/gi,'[span class="edit_font_color"]').replace(/<font[^>]*color=(\")?#333333(\")?[^>]*>/gi,'[span class="edit_font_normal"]').replace(/<font[^>]*>/gi,'[span class="edit_font_normal"]').replace(/<\/font[^>]*>/gi,"[/span]").replace(new RegExp('<img([^>]*class="?(?:'+this.config.imageClassName+"|"+this.config.smileyClassName+"|"+this.config.flashClassName+"|"+this.config.musicClassName+')"?[^>]*)>',"gi"),"[img$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+this.submitValidHTML.join("|")+"|img|span|strong)[^\\]]*)\\]","gi"),"<$1>").replace(new RegExp("<span[^>]*>@</span>","gi"),"@").replace(new RegExp("<span[^>]*>@(.*?)</span>","gi"),"@$1 ");var m=document.createElement("div");m.innerHTML=o;var g=m.getElementsByTagName("span"),k=[],q,p,l,h;for(l=0,h=g.length;l<h;l++){if(g[l].className==="edit_font_normal"){k.push(g[l])}}for(l=0,h=k.length;l<h;l++){p=k[l];q=document.createDocumentFragment();while(p.firstChild){q.appendChild(p.firstChild)}p.parentNode.replaceChild(q,p)}this.parseURL(m);return m.innerHTML},filteHTML:function(h,g){return h.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(new RegExp("<(/?(?:"+g.join("|")+")[^>]*)>","gi"),"[$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+g.join("|")+")[^\\]]*)\\]","gi"),"<$1>")},selectNodeContents:function(h,j){if(!h){return}var g,i;if(this.ua.ie){g=document.body.createTextRange();g.moveToElementText(h);if(j){g.collapse(false)}g.select()}else{i=this.getSelection();g=document.createRange();g.selectNodeContents(h);i.removeAllRanges();i.addRange(g);if(j){i.collapseToEnd()}}},hasSelection:function(){var g=this.getSelection();if(this.ua.ie){if(g.type){return g.type.toLowerCase()!=="none"}else{return false}}else{if(this.ua.opera){var h=this.getRange();return !(g.isCollapsed&&h.startContainer&&h.startContainer===h.endContainer&&h.startOffset===h.endOffset)}else{return !g.isCollapsed}}},saveCursor:function(){if(!this.focused){return}var g=document.getElementById("editor-tmp-img");if(g){g.parentNode.removeChild(g)}this.execCommand("inserthtml",'<img class="'+this.config.emptyClassName+'" id="editor-tmp-img" style="width:1px;height:1px">')},ensureCursor:function(){if(!this.focused){this.focus()}var h=document.getElementById("editor-tmp-img");if(h){if(this.ua.ie&&(!document.documentMode||document.documentMode<9)){this.selectNodeContents(h);this.execCommand("delete")}else{var g=document.createRange();g.selectNode(h);var i=window.getSelection();i.removeAllRanges();i.addRange(g);this.execCommand("delete")}}},savedRange:null,saveRange:function(){this.savedRange=this.getRange()},resumeRange:function(g){g=g||this.savedRange;if(!g){return false}if(this.ua.ie){try{g.select()}catch(i){}}else{var h=this.getSelection();h.removeAllRanges();h.addRange(g)}},cmd_inserthtml:function(h){if(this.ua.ie){var j=this.getRange();if(j.item){j.item(0).outerHTML=h}else{j.pasteHTML(h)}return[false]}else{if(this.ua.trident==7){var g=this.savedRange||window.getSelection().getRangeAt(0);var i=document.createElement("span");i.innerHTML=h;g.insertNode(i.firstChild);g.collapse(true);return[false]}}return[true]},insertImage:function(g,i,p,l,h,q){var m="";if(typeof l!=="undefined"){m=l}var o=' onload="TED.EditorCore.ResizeImage(this);"';if(h>0){if(h>e.defaultConfig.imageWidthLimit){var s=h;var n=q;h=e.defaultConfig.imageWidthLimit;q=e.defaultConfig.imageWidthLimit*n/s}o=' height="'+q+'" width="'+h+'"'}if(this.ua.ie===8){this.execCommand("inserthtml",'<img unselectable="on"  pic_type="'+m+'"  class="'+i+'" id="editor-tmp-img" src="'+g+'" '+o+">");var j=document.getElementById("editor-tmp-img");j.removeAttribute("id");if(j.parentNode.lastChild===j){var r=document.createElement("br");j.parentNode.appendChild(r);var k=document.body.createTextRange();k.moveToElementText(r);if(p){k.collapse(false)}else{k.collapse(true)}k.select()}else{if(p){this.execCommand("insertlinebreak")}}}else{this.execCommand("inserthtml",'<img unselectable="on"   pic_type="'+m+'" class="'+i+'" src="'+g+'" '+o+">");if(p){this.execCommand("insertlinebreak")}}},cmd_insertlinebreak:function(){if(this.ua.webkit){document.execCommand("insertlinebreak",false,null)}else{if(this.ua.gecko){document.execCommand("inserthtml",false,'<br id="editor-tmp-br">');var h=document.getElementById("editor-tmp-br");h.removeAttribute("id");if(h.parentNode.lastChild===h){h.parentNode.removeChild(h);document.execCommand("inserthtml",false,'<br><br id="editor-tmp-br">');h=document.getElementById("editor-tmp-br");h.removeAttribute("id");var i=window.getSelection();var j=document.createRange();j.setStartBefore(h);j.setEndBefore(h);i.removeAllRanges();i.addRange(j)}}else{if(this.ua.ie){var g=this.getRange();if(g){g.pasteHTML("<br>");g.collapse(false);g.select()}}}}return[false]},cmd_insertsmiley:function(g){this.insertImage(g,this.config.smileyClassName);return[false]},cmd_insertimage:function(h,l,m){if(typeof h=="string"){this.insertImage(h,this.config.imageClassName,true,l)}else{if(Object.prototype.toString.apply(h)==="[object Array]"){if(m=="obj"){for(var k=0,g=h.length;k<g;k++){this.insertImage(h[k].url,this.config.imageClassName,true,l,h[k].width,h[k].height)}}else{for(var k=0,g=h.length;k<g;k++){this.insertImage(h[k],this.config.imageClassName,true,l)}}}}return[false]},cmd_focus2end:function(){var g=this.editArea;if(this.ua.ie){g.innerHTML=g.innerHTML}else{if(g.lastChild){var i=document.createRange(),h=window.getSelection();i.setStartAfter(g.lastChild);i.setEndAfter(g.lastChild);h.removeAllRanges();h.addRange(i)}else{g.focus()}}return[false]},editorPlugins:null,addPlugin:function(h,g){g.init(this);this.editorPlugins=this.editorPlugins||{};this.editorPlugins[h]=g},augmentObject:function(i,h){for(var g in h){if(h.hasOwnProperty(g)){i[g]=i[g]!==undefined?i[g]:h[g]}}},setStatsRequest:function(h){var g=new Image();window["bd_pv_"+(new Date).getTime()]=g;g.src="http://static.tieba.baidu.com/tb/img/pv.gif?fr=tb0_forum&st_mod=frspb&st_type=editor&st_value="+h+"&t="+(new Date).getTime();g=null},getTagNum:function(l,m){var h=this.editArea.getElementsByTagName(l),n=h.length;if(m){n=0;for(var k=0,g=h.length;k<g;k++){if(h[k].className===m){n++}}}return n},reLayout:function(n){var m=this.editArea.getElementsByTagName("img"),g=this.config.imageWidthLimit;var l=[];for(var k=0,h=m.length;k<h;k++){img=m[k];if(img.width===0||img.height===0){l.push(img);continue}if(n){img.removeAttribute("unselectable")}if(img.className===this.config.imageClassName){if(img.width>g){img.setAttribute("width",g);img.setAttribute("changedsize",true)}else{img.setAttribute("width",img.width)}img.setAttribute("height",img.height)}else{if(img.className===this.config.smileyClassName){if(img.width>100){img.setAttribute("width",100)}else{img.setAttribute("width",img.width)}img.setAttribute("height",img.height)}else{img.setAttribute("width",img.width);img.setAttribute("height",img.height)}}img.removeAttribute("onload")}for(var k=0,h=l.length;k<h;k++){l[k].parentNode.removeChild(l[k])}},parseURL:function(k){var h="(=*+)",g="(+*=)";var j=4;var i=function(l){if(l.nodeType==3){var m=l.nodeValue;if(m&&m.length>j){m="."+m;m=m.replace(/([^0-9a-zA-Z])((www\.|http:\/\/|mms:\/\/|rtsp:\/\/|ftp:\/\/|https:\/\/)[0-9a-zA-Z\.\!\~\#\?\:\/\&\%\-\+\*\'\=\@\_\$]+)/gi,"$1"+h+'a href="$2" target="_blank"'+g+"$2"+h+"/a"+g);m=m.substring(1);l.nodeValue=m}}else{if(l.nodeType==1){var n=l.firstChild;while(n){if(n.nodeName.toUpperCase()!="A"){i(n)}n=n.nextSibling}}}};i(k);k.innerHTML=k.innerHTML.replace(/\(\=\*\+\)a\ href="www\./gi,'<a href="http://www.').replace(/\(\=\*\+\)/gi,"<").replace(/\(\+\*\=\)/gi,">")}});window.TED["EditorCore"]=e;var a={instanceNum:0,idPrefix:"tb-editor-",registerInstance:function(g,h){this.instances=this.instances||{};h=h||this.generateID();this.instances[h]=g;return h},generateID:function(){return this.idPrefix+ ++this.instanceNum},getInstanceById:function(g){return(g&&this.instances)?this.instances[g]:null}};window.TED["EditorInstanceManager"]=a;function d(g){d.superclass.call(this);this.area=document.createElement("textarea");if(g.is_ipad){this.area.className="textarea_ipad"}this.area.style.width=g.width;this.area.style.height=g.height;if(g.autoEnable===false){this.area.disabled=true}document.getElementById(g.container).appendChild(this.area);this.init()}f(d,c,{isMobile:true,init:function(){var g=this;this.area.onfocus=function(){g.fireEvent("focus")};this.area.onclick=function(){g.fireEvent("click")};if(this.constructor.registerInstance){this.id=this.constructor.registerInstance(this)}},getImageNum:function(){return 0},getSmileyNum:function(){return 0},getFlashNum:function(){return 0},getMusicNum:function(){return 0},getHtml:function(){return this.area.value.replace(/&/gi,"&amp;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\r?\n/gi,"<br>").replace(/[\u3000\s]/gi,"&nbsp;").replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;")},focus:function(){this.area.focus()},blur:function(){this.area.blur()},isEmpty:function(){var g=this.area;return !(g&&g.value&&g.value.replace(/[\u3000\s]/gi,"").replace(/\r?\n/gi,"").replace(/\t/gi,"")!="")},quoteContainer:null,quote:function(j,g,k){j=parseInt(j);if(j>1){if(this.quoteContainer===null){this.quoteContainer=document.createElement("div");this.quoteContainer.className="editor-quote";this.area.parentNode.insertBefore(this.quoteContainer,this.area)}var i=document.getElementById("post_content_"+g).innerHTML.replace(/<img[^>]*>/gi,"[\u56fe\u7247]").replace(/<embed[^>]*>/gi,"[\u89c6\u9891]").replace(/<br[^>]*>/gi," ").replace(/<a[^>]*>/gi,"").replace(/<\/a>/gi,"").subByte(270);this.quoteContainer.innerHTML='<blockquote class="quote quote_simple"><a href="javascript:void(0);" onmousedown="return false;" onclick="TED.TextInput.getInstanceById(\''+this.id+'\').unQuote();Stats.sendRequest(\'fr=tb0_forum&st_mod=pb&st_type=quote&st_value=delete\');" class="close" title="\u5220\u9664\u5f15\u7528">\u2573</a><p class="quote_title">\u5f15\u7528&nbsp;'+k+'&nbsp;(<a href="#'+g+'">'+j+'\u697c</a>)</p><p class="quote_content">'+i+"</p></blockquote>";this.quoteContainer.style.display="block";this.fireEvent("quote",null,[g])}else{this.unQuote();Stats.sendRequest("fr=tb0_forum&st_mod=pb&st_type=quote&st_value=replyfirst")}var h=this;setTimeout(function(){h.focus()},100)},unQuote:function(){if(this.quoteContainer){this.quoteContainer.style.display="none"}this.fireEvent("unquote")}});TED.augmentObject(d,a);window.TED["TextInput"]=d})();;(function(){var b=window.TED["Overlay"],a=window.TED["Event"];window.TED["EditorPlugins"]["InsertSmiley"]=c;function c(e,f){this.container=e;this.holder=document.createElement("div");this.holder.style.position="relative";this.holder.className="insertsmiley_holder";this.options=f;this.container.appendChild(this.holder)}c.prototype={init:function(f){this.editor=f;var e=this;this.overlay=new b(this.holder);_.Module.use("common/component/EditorLayer",[{container:$(this.holder)}],function(g){e.editor.overlay=g;window.PAGESMILELAYER=e.editor.overlay;a.addEvent(e.holder,"click",function(i){var h=i.target||i.srcElement;if(h===e.holder){e.clickHandler(i);if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}})})},clickHandler:function(){var f={layerPos:{left:-472,top:29},layerSize:{height:315,width:552},arrowPos:{left:472,top:-7},content:{height:313},arrowType:"arrow_up",layerType:""};f=$.extend(f,this.options);var e=this;if(this.smileLayer){e.editor.overlay.toggle(f,this.smileLayer,this.editor,e.holder,"smile")}else{_.Module.use("common/component/EditorSmiley",[],function(g){e.smileLayer=g;e.editor.overlay.toggle(f,e.smileLayer,e.editor,e.holder,"smile")})}},closeOverlay:function(){this.editor.overlay.close()}};window.TED["EditorPlugins"]["WordLimit"]=d;function d(e){this.maxNum=e||130;this.holder=document.createElement("div");this.holder.className="wordlimit-holder";this.holder.style.visibility="hidden"}d.prototype={showLimit:10,checkTimer:null,checkDelay:300,isShow:false,exceed:false,init:function(e){this.editor=e;this.container=e.wrapper;this.container.appendChild(this.holder);e.on("keyup",this.handlerEvent,this);e.on("focus",this.handlerEvent,this);this.check()},handlerEvent:function(g){clearTimeout(this.checkTimer);var f=this;this.checkTimer=setTimeout(function(){f.check()},this.checkDelay)},check:function(e){var f=this.maxNum-this.editor.getContentLength();if(f<=this.showLimit){this.holder.style.visibility="visible";this.isShow=true;if(f<0){if(!this.exceed){this.editor.fireEvent("overflow");this.exceed=true}this.holder.innerHTML='\u5df2\u7ecf\u8d85\u51fa<span style="font-size:18px;font-family:Arial;color:#f00;">'+-f+"</span>\u4e2a\u5b57"}else{if(this.exceed){this.editor.fireEvent("unoverflow");this.exceed=false}this.holder.innerHTML='\u8fd8\u80fd\u8f93\u5165<span style="font-size:18px;font-family:Arial;">'+f+"</span>\u4e2a\u5b57"}}else{if(this.isShow){this.holder.style.visibility="hidden";this.isShow=false;if(this.exceed){this.editor.fireEvent("unoverflow");this.exceed=false}}}}}})();;(function(){var d=TED.EditorCore,e=TED.extend,a=TED.EditorInstanceManager,b=TED.augmentObject;window.TED["SimpleEditor"]=c;function c(f){c.superclass.call(this,f)}c.defaultConfig={height:"100px",width:"400px",maxHeight:null,autoFocus:true,autoEnable:true,autoHeight:false,wrapperClassName:"tb-simpleeditor-wrapper",editAreaClassName:"tb-editor-editarea",editAreaWrapperClassName:"tb-editor-editarea-wrapper",disabledEditAreaClassName:"tb-editor-editarea tb-editor-editarea-disabled",disabledWrapperClassName:"tb-simpleeditor-wrapper tb-simpleeditor-wrapper-disabled",imageClassName:"BDE_Image",smileyClassName:"BDE_Smiley",rootPath:"/tb/static-common/",enableRefer:true,emptyClassName:"BDE_Empty",flashClassName:"BDE_Flash",flashNumLimit:10,didaDelay:300,imageWidthLimit:570};e(c,d,{getContentLength:function(){return Math.ceil(this.filteHTML(this.editArea.innerHTML,["img","br"]).replace(/<img[^>]*>/gi,"mm").replace(/<br[^>]*>/gi,"m").replace(/&nbsp;/gi,"m").replace(/[^\x00-\xff]/g,"mm").length/2)},filteEditHTML:function(){return html=this.editArea.innerHTML.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(new RegExp("<(/?(?:br)[^>]*)>","gi"),"[$1]").replace(new RegExp('<span([^>]*class="?at"?[^>]*)>',"gi"),"[span$1]").replace(new RegExp('<img([^>]*class="?(?:'+this.config.emptyClassName+"|"+this.config.smileyClassName+')"?[^>]*)>',"gi"),"[img$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:br|img|span)[^\\]]*)\\]","gi"),"<$1>")},getConfig:function(){return this.config},filteSubmitHTML:function(){this.reLayout();var g=this.editArea.innerHTML.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(new RegExp("<(/?(?:"+this.submitValidHTML.join("|")+")[^>]*)>","gi"),"[$1]").replace(new RegExp('<img([^>]*class="?(?:'+this.config.imageClassName+"|"+this.config.smileyClassName+"|"+this.config.flashClassName+"|"+this.config.musicClassName+')"?[^>]*)>',"gi"),"[img$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+this.submitValidHTML.join("|")+"|img)[^\\]]*)\\]","gi"),"<$1>");var f=document.createElement("div");f.innerHTML=g;this.parseURL(f);return f.innerHTML}});b(c,a)})();;var FORUM_POST_PREFIX="/f/commit/";var FORUM_POST_URL={threadAdd:FORUM_POST_PREFIX+"thread/add",postAdd:FORUM_POST_PREFIX+"post/add",threadVoteAdd:FORUM_POST_PREFIX+"vote/add ",forumCreate:FORUM_POST_PREFIX+"forum/create",threadDelete:FORUM_POST_PREFIX+"thread/delete",postDelete:FORUM_POST_PREFIX+"post/delete",goodAdd:FORUM_POST_PREFIX+"thread/good/add",goodCancel:FORUM_POST_PREFIX+"thread/good/cancel",threadTopAdd:FORUM_POST_PREFIX+"thread/top/add",threadTopCancel:FORUM_POST_PREFIX+"thread/top/cancel",threadTopicAdd:"/zhibo/commit/add",threadTopicCancel:"/zhibo/commit/set",get_tbs:"/dc/common/tbs"};var FORUM_ERROR_INFO={24:"\u767b\u5f55\u9519\u8bef\uff0c\u53ef\u80fd\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u53e3\u4ee4\u4e0d\u6b63\u786e\uff0c\u8bf7\u5355\u51fb\u786e\u5b9a\u91cd\u8bd5",102:"\u6ce8\u518c\u7528\u6237email\u975e\u6cd5",103:"\u6ce8\u518c\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u975e\u6cd5",107:"\u7528\u6237\u540d\u6216\u81ea\u6211\u4ecb\u7ecd\u7684\u6587\u5b57\u4e2d\u542b\u6709\u4e00\u4e9b\u4e0d\u6070\u5f53\u7684\u8bcd\u6c47\uff0c\u8bf7\u60a8\u91cd\u65b0\u63d0\u4ea4\u6ce8\u518c\u4fe1\u606f",108:"\u7528\u6237\u540d\u4e3a\u7a7a",266:"\u6dfb\u52a0\u597d\u53cb\u91cd\u590d",205:"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6ca1\u6709\u6b64\u4fee\u6539\u6743\u9650\uff0c\u8bf7\u5230\u60a8\u6ce8\u518c\u7684\u7cfb\u7edf\u4e2d\u4fee\u6539\u4fe1\u606f",305:"\u6dfb\u52a0\u8bcd\u8bed\u5230\u8fbe\u6700\u5927\u503c",306:"\u6dfb\u52a0\u8bcd\u8bed\u5230\u8fbe\u6700\u5927\u503c",309:"\u6dfb\u52a0\u8bcd\u8bed\u5230\u8fbe\u6700\u5927\u503c",260:"\u8ba8\u8bba\u533a\u5df2\u6ee1\u4e09\u4e2a\u5427\u4e3b",261:"\u8be5\u7528\u6237\u5df2\u7ecf\u662f\u8be5\u5427\u7684\u5427\u4e3b",262:"\u8be5\u7528\u6237\u5df2\u7ecf\u662f\u4e09\u4e2a\u8d34\u5427\u7684\u5427\u4e3b",263:"\u7528\u6237\u6307\u5b9a\u597d\u53cb\u540d\u4e0d\u5b58\u5728",264:"\u7528\u6237\u597d\u53cb\u6570\u5230\u8fbe\u6700\u5927",265:"\u7528\u6237\u672a\u767b\u9646",267:"\u6dfb\u52a0\u6536\u85cf\u5939\u5230\u6700\u5927\u503c",300:"\u8fbe\u5230\u7cfb\u7edf\u6700\u5927\u8fc7\u6ee4\u7528\u6237\u5bb9\u91cf",301:"\u8fbe\u5230\u7cfb\u7edf\u6700\u5927\u8fc7\u6ee4IP\u5bb9\u91cf",302:"\u7ba1\u7406\u5458\u6307\u5b9a\u7684\u5173\u952e\u5b57\u4e0d\u5b58\u5728\u8d34\u5427",303:"\u7ba1\u7406\u5458\u6307\u5b9a\u7684\u7528\u6237\u540d\u4e0d\u5b58\u5728",304:"\u7ba1\u7406\u5458\u6307\u5b9a\u7684IP\u6709\u8bef",316:"\u64cd\u4f5c\u5931\u8d25\uff01\u8be5IP\u5730\u5740\u4e3a\u624b\u673a\u4e0a\u7f51\u4f7f\u7528\uff0c\u65e0\u6cd5\u76f4\u63a5\u5c01\u7981\u3002",401:"\u6839\u636eforum_id \u4e0d\u80fd\u5f97\u5230\u8ba8\u8bba\u540d",402:"\u5f97\u5230\u7684\u8d34\u5427\u540d\u592a\u957f",870:"\u697c\u9ad8\u4eba\u591a\uff0c\u8bf7\u52ff\u63a8\u5012",871:"\u697c\u9ad8\u614e\u63a8\uff0c\u51b7\u9759\u4f1a\u513f\u5427",872:"\u7cbe\u54c1\u6765\u7684\u4e0d\u6613\uff0c\u8bf7\u52ff\u64c5\u81ea\u5220\u9664",874:"\u5427\u520a\u6765\u5f97\u4e0d\u6613\uff0c\u8bf7\u52ff\u64c5\u81ea\u5220\u9664"};;var Thread_add_result={resultNo:0,fid:"",tid:"",vid:"",sign:"",bdauditreason:0,bdQueryWordEnc:"",autoMsg:"",is_login:0,init:function(a){if(Thread_add_result&&a.data&&typeof(a.data)=="object"){for(var b in a.data){Thread_add_result[b]=a.data[b]}}_.Module.use("ueglibs/widget/Ban",[],function(c){Thread_add_result.BanLib=c});Thread_add_result.resultNo=a.no},isNeedWaitForCheck:function(){var a=false;switch(this.resultNo){case 9:case 20:case 23:a=true;break;default:break}return a},isNeedBindPhone:function(){return this.resultNo==4010},Action_FocusTitle:"focusTitle",Action_FocusContent:"focusContent",Action_ClearYZM:"clearYZM",Action_FocusUrl:"focusUrl",Action_GoToHead:"goToHead",Action_FlushAndGoToHead:"flushAndGoToHead",getActionType:function(){var a="";switch(this.resultNo){case 10:case 14:case 501:case 15:case 36:case 41:case 42:case 43:case 46:case 9001:case 10010:case 10011:case 10012:case 10013:case 220012:case 220015:case 220035:case 2130001:case 2130007:case 2130008:case 2130009:case 2130011:case 2130012:case 2130014:case 2130005:a=this.Action_FocusContent;break;case 11:case 20:a=this.Action_FocusTitle;break;case 17:case 0:a=this.Action_FlushAndGoToHead;break;case 22:case 9:case 23:case 119:case 44:case 100:case 703:case 704:case 705:a=this.Action_GoToHead;break;case 38:case 39:case 40:a=this.Action_ClearYZM;break;case 1120:case 1121:a=this.Action_FocusUrl;break;default:break}return a},getMessage:function(){var a="",b=null;if(this.resultNo>=901&&this.resultNo<=950){return Thread_add_result.autoMsg}if(b==null){b=(PageData.forum)?PageData.forum.id:null}if(b==null){b=PageData.forum_id}if(b==null){b=PageData.forumID}switch(this.resultNo){case 10:a="\u8d34\u5b50\u5185\u5bb9\u5305\u542b\u592a\u5c11\u7684\u6587\u5b57";break;case 11:a="\u8d34\u5b50\u6807\u9898\u548c\u5185\u5bb9\u592a\u957f";break;case 12:if(b!=null){a=this.BanLib.render("oldPosterDialog")}else{a="\u64cd\u4f5c\u5931\u8d25"}break;case 13:if(b!=null){a="\u64cd\u4f5c\u5931\u8d25\uff0c\u60a8\u7684\u7f51\u7edc\u5730\u5740\u7531\u4e8e\u975e\u6cd5\u64cd\u4f5c\u88ab\u5c01<br/><a href='/upc/userinfo?fid="+b+'\' target="_blank">\u67e5\u770b\u5c01\u7981\u4fe1\u606f</a>'}else{a="\u60a8\u7684\u7f51\u7edc\u5730\u5740\u7531\u4e8e\u975e\u6cd5\u64cd\u4f5c\u88ab\u5c01 "}break;case 14:a="\u60a8\u53d1\u5e03\u7684\u8d34\u5b50\u5df2\u7ecf\u5b58\u5728";break;case 501:case 15:a="\u8bf7\u4e0d\u8981\u53d1\u8868\u542b\u6709\u4e0d\u9002\u5f53\u5185\u5bb9\u7684\u7559\u8a00<br>\u8bf7\u4e0d\u8981\u53d1\u8868\u5e7f\u544a\u8d34";break;case 16:a="\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6240\u8f93\u5165\u7684\u8d34\u5427\u4e0d\u5b58\u5728\u3002\u7531\u4e8e\u7cfb\u7edf\u5347\u7ea7\u7ef4\u62a4\uff0c\u65b0\u5efa\u8d34\u5427\u529f\u80fd\u6682\u505c\uff0c\u5e0c\u671b\u5f97\u5230\u60a8\u7684\u8c05\u89e3\uff01";break;case 19:case 200:case 201:case 202:a="\u60a8\u7684\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u786e\u8ba4\u540e\u518d\u53d1\u8868";break;case 20:a="\u60a8\u53d1\u8868\u7684\u8d34\u5b50\u7684\u6807\u9898\u6216\u6b63\u6587\u5305\u542b\u592a\u5c11\u7684\u6587\u5b57\uff0c\u8bf7\u4fee\u6539\u540e\u518d\u53d1\u8868";break;case 17:a="\u672c\u5427\u5f53\u524d\u53ea\u80fd\u6d4f\u89c8\uff0c\u4e0d\u80fd\u53d1\u8d34\uff01";break;case 18:case 21:a="\u5176\u4ed6\u672a\u77e5\u539f\u56e0";break;case 22:a="\u60a8\u53d1\u8868\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u7531\u4e8e\u7279\u6b8a\u539f\u56e0\u6211\u4eec\u9700\u8981\u6838\u5b9e\u8be5\u8d34\u5185\u5bb9\u662f\u5426\u542b\u6709\u4e0d\u826f\u4fe1\u606f\uff0c\u6211\u4eec\u4f1a\u572810\u5206\u949f\u5185\u786e\u8ba4\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85\uff01";break;case 9:a=this.getCheckMessage(this.bdauditreason);break;case 33:if(Thread_add_result.is_login==1){a="\u60a8\u53d1\u8d34\u592a\u5feb\u4e86:) \u8bf7\u7a0d\u540e\u518d\u53d1"}else{a="\u60a8\u53d1\u8d34\u901f\u5ea6\u592a\u5feb\u4e86\u3002\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u8d34\uff0c\u7cfb\u7edf\u5bf9\u533f\u540d\u53d1\u8d34\u8fdb\u884c\u4e25\u683c\u7684\u63a7\u5236\uff0c\u767b\u5f55\u7528\u6237\u4e0d\u53d7\u5f71\u54cd"}break;case 34:if(Thread_add_result.is_login==1){a="\u60a8\u8bf4\u8bdd\u592a\u5feb\u4e86:) \u8bf7\u5148\u505c\u4e0b\u6765\u559d\u676f\u8336\u5427\uff0c\u6216\u8005\u53ef\u4ee5\u53bb\u522b\u7684\u5427\u770b\u770b\u54e6\uff0c\u4e00\u5b9a\u4f1a\u53d1\u73b0\u8fd8\u6709\u60a8\u611f\u5174\u8da3\u7684\u8bdd\u9898"}else{a="\u60a8\u53d1\u8d34\u901f\u5ea6\u592a\u5feb\u4e86\u3002\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u5e16\uff0c\u7cfb\u7edf\u5bf9\u533f\u540d\u53d1\u8d34\u8fdb\u884c\u4e25\u683c\u7684\u63a7\u5236\uff0c\u767b\u5f55\u7528\u6237\u4e0d\u53d7\u5f71\u54cd"}break;case 220034:a="\u60a8\u8bf4\u8bdd\u592a\u5feb\u4e86:) \u8bf7\u5148\u505c\u4e0b\u6765\u559d\u676f\u8336\u5427\uff0c\u6216\u8005\u53ef\u4ee5\u53bb\u522b\u7684\u5427\u770b\u770b\u54e6\uff0c\u4e00\u5b9a\u4f1a\u53d1\u73b0\u8fd8\u6709\u60a8\u611f\u5174\u8da3\u7684\u8bdd\u9898";break;case 220035:a="\u4eb2\uff0c\u5df2@\u4e0d\u5c11\u4eba\u4e86\uff0c\u4ee5\u514d\u6253\u6405\u66f4\u591a\u4eba\uff0c\u6b47\u4e00\u4f1a\u5427~";break;case 35:if(Thread_add_result.is_login==1){a="\u4eb2\uff0c\u5df2@\u4e0d\u5c11\u4eba\u4e86\uff0c\u4ee5\u514d\u6253\u6405\u66f4\u591a\u4eba\uff0c\u6b47\u4e00\u4f1a\u5427~"}else{a="\u60a8\u53d1\u8d34\u901f\u5ea6\u592a\u5feb\u4e86\u3002\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u8d34\uff0c\u7cfb\u7edf\u5bf9\u533f\u540d\u53d1\u8d34\u8fdb\u884c\u4e25\u683c\u7684\u63a7\u5236\uff0c\u767b\u5f55\u7528\u6237\u4e0d\u53d7\u5f71\u54cd"}break;case 36:a="\u8bf7\u4e0d\u8981\u53d1\u5e7f\u544a\u8d34\uff01";break;case 37:a="\u60a8\u5df2\u5c1d\u8bd5\u63d0\u4ea4\u591a\u6b21\u4e86\uff0c\u8bf7\u8fd4\u56de\u540e\u5237\u65b0\u9875\u9762\uff0c\u65b9\u53ef\u91cd\u65b0\u53d1\u8d34";break;case 38:a="\u9a8c\u8bc1\u7801\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";break;case 39:a="\u7531\u4e8e\u60a8\u591a\u6b21\u8f93\u9519\u9a8c\u8bc1\u7801\uff0c\u8bf7\u60a8\u8fd4\u56de\u540e\u5237\u65b0\u9875\u9762\uff0c\u65b9\u53ef\u91cd\u65b0\u53d1\u8d34";break;case 40:a="\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u60a8\u8fd4\u56de\u540e\u91cd\u65b0\u8f93\u5165";break;case 41:a="\u60a8\u7684\u8d34\u5b50\u53ef\u80fd\u5305\u542b\u4e0d\u5408\u9002\u7684\u5185\u5bb9\uff0c\u8bf7\u60a8\u786e\u5b9a\u540e\u518d\u63d0\u4ea4";break;case 42:a="\u60a8\u7684\u53d1\u8d34\u884c\u4e3a\u88ab\u7cfb\u7edf\u8ba4\u4e3a\u6709\u53d1\u5e7f\u544a\u5acc\u7591\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u53d1";break;case 43:a="\u60a8\u7684\u53d1\u8d34\u884c\u4e3a\u6216\u8d34\u5b50\u5185\u5bb9\u6709\u5e7f\u544a\u6216\u4e0d\u5408\u9002\u7684\u7279\u5f81\uff0c\u8bf7\u60a8\u786e\u5b9a\u540e\u518d\u53d1\u9001";break;case 23:a="\u60a8\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u9700\u8981\u7cfb\u7edf\u5ba1\u6838\u901a\u8fc7\u540e\u624d\u80fd\u5efa\u7acb\u8d34\u5427";break;case 119:a="\u5bf9\u4e0d\u8d77\uff0c\u672c\u4e3b\u9898\u7684\u56de\u590d\u6570\u5df2\u7ecf\u8fbe\u5230\u4e0a\u9650\uff0c\u611f\u8c22\u60a8\u7684\u53c2\u4e0e\uff0c\u6b22\u8fce\u60a8\u6d4f\u89c8\u672c\u5427\u7684\u5176\u5b83\u4e3b\u9898";break;case 1120:a="\u62b1\u6b49\uff0c\u60a8\u8f93\u5165\u7684\u56fe\u7247\u3001\u89c6\u9891\u94fe\u63a5\u5730\u5740\u9519\u8bef\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb<a href='http://www.baidu.com/search/post_img.html' target='_blank'>\u67e5\u770b\u76f8\u5173\u5e2e\u52a9</a>\u6216\u8fd4\u56de\u4fee\u6539";break;case 1121:a="\u62b1\u6b49\uff0c\u89c6\u9891\u670d\u52a1\u5347\u7ea7\u4e2d\uff0c\u60a8\u6682\u65f6\u65e0\u6cd5\u53d1\u8868\u5e26\u6709\u89c6\u9891\u7684\u8d34\u5b50\uff0c\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u8bf7\u539f\u8c05";break;case 44:a="\u5bf9\u4e0d\u8d77\uff0c\u672c\u5427\u6682\u65f6\u9650\u5236\u90e8\u5206\u7528\u6237\u53d1\u8868\u4e3b\u9898\u8d34\u5b50\uff0c\u60a8\u53ef\u4ee5\u6d4f\u89c8\u6216\u56de\u590d\u672c\u5427\u5176\u5b83\u5185\u5bb9\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\u5e0c\u671b\u5f97\u5230\u60a8\u7684\u8c05\u89e3\u3002";break;case 100:a="\u5bf9\u4e0d\u8d77\uff0c\u672c\u5427\u6682\u65f6\u9650\u5236\u90e8\u5206\u7528\u6237\u4f7f\u7528\u5b8c\u6574\u7684\u8d34\u5427\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u6d4f\u89c8\u672c\u5427\u5176\u5b83\u5185\u5bb9\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\u5e0c\u671b\u5f97\u5230\u60a8\u7684\u8c05\u89e3\u3002";break;case 701:a="\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u5e16\uff0c\u672c\u5427\u4e0d\u5141\u8bb8\u672a\u767b\u5f55\u7528\u6237\u53d1\u8d34\uff0c\u767b\u5f55\u7528\u6237\u4e0d\u53d7\u5f71\u54cd\uff0c\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u6df1\u8868\u6b49\u610f";break;case 702:a="\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u5e16\uff0c\u672c\u5427\u9650\u5236\u90e8\u5206\u7528\u6237\u53d1\u8d34\uff0c\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u6df1\u8868\u6b49\u610f";break;case 703:a="\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u5e16\uff0c\u672c\u5427\u88ab\u8bbe\u7f6e\u4e3a\u4ec5\u672c\u5427\u4f1a\u5458\u624d\u80fd\u53d1\u8d34\uff0c\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u6df1\u8868\u6b49\u610f\u3002<a href='/f?kw="+this.bdQueryWordEnc+"#1' target=_blank>\u70b9\u6b64\u7533\u8bf7\u52a0\u5165</a>\u672c\u5427\u4f1a\u5458";break;case 704:a="\u4e3a\u4e86\u51cf\u5c11\u6076\u610f\u704c\u6c34\u548c\u5e7f\u544a\u5e16\uff0c\u672c\u5427\u88ab\u8bbe\u7f6e\u4e3a\u4ec5\u672c\u5427\u7ba1\u7406\u56e2\u961f\u624d\u80fd\u53d1\u8d34\uff0c\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u6df1\u8868\u6b49\u610f";break;case 705:a="\u672c\u5427\u5f53\u524d\u53ea\u80fd\u6d4f\u89c8\uff0c\u4e0d\u80fd\u53d1\u8d34\uff01";break;case 706:a="\u62b1\u6b49\uff0c\u672c\u8d34\u6682\u65f6\u65e0\u6cd5\u56de\u590d\u3002";break;case 45:a="\u62b1\u6b49\uff0c\u60a8\u63d0\u4ea4\u7684\u8d34\u5427\u540d\u79f0\u542b\u7279\u6b8a\u5b57\u7b26\uff0c\u76ee\u524d\u65e0\u6cd5\u521b\u5efa\uff0c\u63a8\u8350\u60a8\u4f7f\u7528\u6c49\u5b57\u3001\u5b57\u6bcd\u6216\u6570\u5b57\u4f5c\u4e3a\u8d34\u5427\u540d\u79f0";break;case 46:a="\u62b1\u6b49\uff0c\u60a8\u7684\u8d34\u5b50\u8fc7\u957f\uff0c\u65e0\u6cd5\u6b63\u5e38\u63d0\u4ea4\u3002\u5efa\u8bae\u60a8\u7cbe\u7b80\u6216\u5206\u6bb5\u540e\u91cd\u65b0\u63d0\u4ea4\uff0c\u8c22\u8c22!";break;case 800:break;case 801:break;case 802:break;case 803:break;case 804:break;case 805:break;case 806:break;case 807:break;case 808:break;case 809:break;case 814:break;case 815:a="\u62b1\u6b49\uff0c\u60a8\u5df2\u9000\u51fa\u767b\u5f55\u6216\u672a\u8d2d\u4e70\u97f3\u4e50\u9053\u5177\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5";break;case 900:a="\u4e3a\u62b5\u5fa1\u6316\u575f\u5371\u5bb3\uff0c\u672c\u5427\u5427\u4e3b\u5df2\u653e\u51fa\u8d34\u5427\u795e\u517d--\u8d85\u7ea7\u9759\u6b62\u86d9\uff0c\u672c\u8d34\u6682\u65f6\u65e0\u6cd5\u56de\u590d\u3002";break;case 961:a="\u53d1\u8d34\u5931\u8d25\uff0c\u60a8\u8f93\u5165\u7684\u56fe\u7247\u5730\u5740\u6709\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u66f4\u6b63\u540e\u518d\u6b21\u53d1\u5e03\uff1a\uff09";break;case 9001:a="\u7531\u4e8e\u533f\u540d\u72b6\u6001\u6216\u672c\u5427\u8bbe\u7f6e\uff0c\u65e0\u6cd5\u53d1\u8868\u5e26\u6709\u56fe\u7247\u7684\u4e3b\u9898\u3002";break;case 2100:a="\u5185\u5bb9\u542b\u6709\u9ad8\u7ea7\u5b57\u4f53\u6548\u679c\uff0c\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u5c31\u80fd\u4f7f\u7528\u54e6~~";break;case 4010:a="\u60a8\u7684\u8d26\u53f7\u5b58\u5728\u5b89\u5168\u98ce\u9669\u6682\u4e0d\u80fd\u53d1\u8d34\uff0c\u8bf7\u5148\u8fdb\u884c\u624b\u673a\u7ed1\u5b9a\u540e\u518d\u53d1\u8d34\u5427\u3002";break;case 9000:a="\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u540d\uff0c\u4e0d\u80fd\u5728\u672c\u5427\u53d1\u8d34\u3002\u8bf7\u5148\u586b\u5199\u7528\u6237\u540d\u3002";break;case 10010:a="\u60a8\u7684\u6027\u522b\u65e0\u6cd5\u8fdb\u884c\u59b9\u7eb8\u8ba4\u8bc1</br><a style = 'font-size:12px;' href = '/i/sys/jump?un="+encodeURIComponent(PageData.user.name)+"&type=profile#sexm' target ='_blank'>\u53bb\u4fee\u6539\u6211\u7684\u6027\u522b>><a>";break;case 10012:a="\u8bf7\u4e0a\u4f20\u81f3\u5c11\u4e00\u5f20\u56fe\u7247\u3002";break;case 10013:a="\u60a8\u53d1\u5f80\u7684\u5427\u672a\u5f00\u901a\u59b9\u7eb8\u8ba4\u8bc1\u529f\u80fd\u3002";break;case 2130001:a="\u8bf7\u4e0d\u8981\u7ed9\u975e\u59b9\u7eb8\u7528\u6237\u6295\u7968\u3002";break;case 2130007:a="\u60a8\u7684\u8d26\u53f7\u5df2\u88ab\u5c01\u7981\u3002";break;case 2130008:a="\u60a8\u5df2\u7ecf\u7ed9\u8be5\u7528\u6237\u6295\u8fc7\u7968\u3002";break;case 2130009:a="\u6295\u7968\u5931\u8d25\u3002";break;case 2130005:a="\u60a8\u5df2\u7ecf\u53d1\u8d77\u8fc7\u59b9\u7eb8\u8ba4\u8bc1\u8d34</br><a href='/p/"+Thread_add_result.thread_id+"' target = '_blank' >http://tieba.baidu.com/p/"+Thread_add_result.thread_id+"</a>";break;case 2130011:a="\u59b9\u7eb8\u8ba4\u8bc1\u7528\u6237\u4e4b\u95f4\u4e0d\u80fd\u76f8\u4e92\u6295\u7968\u3002";break;case 220012:a="\u60a8\u7684\u8d26\u53f7\u5df2\u88ab\u5c01\u7981\u3002";break;case 220013:a="\u60a8\u7684IP\u5df2\u88ab\u5c01\u7981\u3002";break;case 225001:a="\u60a8\u7684\u8d26\u53f7\u7981\u6b62\u8d34\u6761\u3002";break;case 220015:a="\u60a8\u8f93\u5165\u7684\u5185\u5bb9\u542b\u6709\u654f\u611f\u4fe1\u606f\u3002";break;case 2190000:a="<p>\u62b1\u6b49\u60a8\u6ca1\u6709\u8d34\u6761\u9053\u5177\u4e86\u4e0d\u80fd\u53d1\u5e03\u8d34\u6761\u4fe1\u606f\u3002</p><p>PS\uff1a\u53d1\u8d34,\u56de\u8d34,\u53c2\u52a0\u6d3b\u52a8\u90fd\u6709\u673a\u4f1a\u83b7\u5f97\u8d34\u6761\u9053\u5177\u3002</p>";break;case 2130012:a="\u4e0d\u80fd\u7ed9\u81ea\u5df1\u6295\u7968\u3002";break;case 2130014:a="\u4e0d\u80fd\u7ed9\u7537\u6027\u7528\u6237\u6295\u7968";break;case 2190001:a='<p style="margin-top:-8px">\u8d34\u6761\u6ca1\u6709\u53d1\u5e03\u6210\u529f\u8bf7\u7a0d\u540e\u5728\u8bd5\u3002</p><p>PS\uff1a\u53d1\u5e03\u8d34\u6761\u670910\u79d2\u7684CD\u65f6\u95f4\u3002</p>';break;case 2190002:a="\u62b1\u6b49\uff0c\u6bcf\u5c0f\u65f6\u53ea\u80fd\u62a2\u4e00\u6b21\u8d34\u6761\u3002";break;case 2190003:a="<p>\u771f\u9057\u61be~\u60a8\u6ca1\u6709\u62a2\u5230\u8d34\u6761\u9053\u5177\u3002</p><p>PS\uff1a\u7b49\u7ea7\u8d8a\u9ad8\u83b7\u5f97\u9053\u5177\u51e0\u7387\u8d8a\u9ad8\u54e6\uff01</p>";break;case 2190004:a="\u670d\u52a1\u5668\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5";break;case 2190005:a="\u60a8\u7684\u8d26\u53f7\u5df2\u88ab\u5c01\u7981\u3002";break;case 2190006:a="\u8d34\u6761\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u3002";break;case 2190007:a="\u8d34\u6761\u5185\u5bb9\u8fc7\u957f\u3002";break;case 2190008:a="\u62b1\u6b49\uff0c\u4e00\u5929\u6700\u591a\u53ea\u80fd\u83b7\u5f9710\u4e2a\u9053\u5177";break;default:a="\u672a\u77e5\u9519\u8bef\u3002";break}return a},getCheckMessage:function(b){var a="";switch(b){case -61:a="\u60a8\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u4e3a\u4e86\u4fdd\u8bc1\u8d34\u5b50\u8d28\u91cf\uff0c\u672c\u5427\u6240\u53d1\u7684\u8d34\u5b50\u5f85\u7cfb\u7edf\u5ba1\u6838\u901a\u8fc7\u540e\u624d\u80fd\u663e\u793a\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85";break;case -62:a="\u60a8\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u4e3a\u4e86\u4fdd\u8bc1\u8d34\u5b50\u8d28\u91cf\uff0c\u672c\u5427\u8d34\u56fe\u7684\u8d34\u5b50\u9700\u8981\u5ba1\u6838\u901a\u8fc7\u540e\u624d\u80fd\u663e\u793a\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85";break;case -74:case -75:case -60:a="\u60a8\u53d1\u8868\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u7cfb\u7edf\u9700\u8981\u6838\u5b9e\u8be5\u8d34\u5b50\u5185\u5bb9\u662f\u5426\u542b\u6709\u4e0d\u826f\u4fe1\u606f\uff0c\u8d34\u5b50\u5728\u5ba1\u6838\u901a\u8fc7\u540e\u624d\u80fd\u663e\u793a\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85";break;case -70:a="\u60a8\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u4e3a\u4e86\u63a7\u5236\u5e7f\u544a\u8d34\uff0c\u9700\u8981\u901a\u8fc7\u5ba1\u6838\u540e\u624d\u80fd\u53d1\u5e03\u3002\u767b\u9646\u7f72\u540d\u53d1\u8d34\u4e0d\u53d7\u6b64\u9650\u5236\u3002";break;case -71:a="\u60a8\u53d1\u8868\u7684\u5e16\u5b50\u592a\u957f\u4e86\u3002\u4e3a\u4e86\u9632\u6b62\u704c\u6c34\uff0c\u9700\u7cfb\u7edf\u5ba1\u6838\u540e\u624d\u80fd\u663e\u793a\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b";break;default:a="\u60a8\u53d1\u8868\u7684\u8d34\u5b50\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\uff0c\u4f46\u7cfb\u7edf\u9700\u8981\u6838\u5b9e\u8be5\u8d34\u5b50\u5185\u5bb9\u662f\u5426\u542b\u6709\u4e0d\u826f\u4fe1\u606f\uff0c\u8d34\u5b50\u5728\u5ba1\u6838\u901a\u8fc7\u540e\u624d\u80fd\u663e\u793a\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85";break}return a}};;var SignNameApply={fillPanelId:"signNamePanel",getUrl:"/f/user/sign_list?t="+new Date().getTime().toString(36),isFirst:true,isUsed:0,data:{},template:function(){var b='<div id="signNameWrapper">';b+='<input type="checkbox" id="useSignName" name="useSignName"><label for="useSignName">\u4f7f\u7528\u7b7e\u540d\u6863</label>&nbsp;';b+='<span id="signNameShow"'+((this.isUsed==0)?'style="display:none;"':"")+">";if(this.data.signs.length>0){b+='<select id="sign_id" name="sign_id">';for(var d=0,c=this.data.signs.length;d<c;d++){var a=this.data.signs[d];b+='<option value="'+a.id+'"'+((a.id==this.data.used_id)?"selected=selected":"")+">"+a.name+"</option>"}b+="</select>";b+='&nbsp;<a style="color:#0449BE" target="_blank" href="/i/sys/jump?type=signsetting">\u67e5\u770b\u5168\u90e8</a>'}else{b+='\uff08\u60a8\u76ee\u524d\u6ca1\u6709\u53ef\u4f7f\u7528\u7684\u7b7e\u540d\u6863\uff0c&nbsp;<a style="color:#0449BE" target="_blank" href="/i/sys/jump?type=signsetting">\u67e5\u770b\u5168\u90e8</a>)'}b+="</span>";b+="</div>";return b},active:function(){if(this.isFirst){this.isFirst=false;var a=this.getUrl;this.postProcess(a,null,this.build)}},postProcess:function(b,c,d){var a=this;if(c==null){$.get(b,function(f){var e=$.json.decode(f);if(e.no==0){if(typeof d=="function"){d(a,e)}}})}else{$.post(b,SignNameApply._convertToQueryString(c),function(f){var e=$.json.decode(f);if(e.no==0){if(typeof d=="function"){d(a,e)}}})}},_convertToQueryString:function(b){var c=[];for(var a in b){c.push(encodeURIComponent(a)+"="+encodeURIComponent(b[a]))}return c.join("&")},build:function(a,b){a.data=b.data;a.isUsed=b.data.need;a.fillToPage()},fillToPage:function(){$("#"+this.fillPanelId).html(this.template());this.initPage()},showList:function(){if(this.isUsed==1){$("#signNameShow").css("display","")}else{$("#signNameShow").css("display","none")}},initPage:function(){if(this.isUsed==1){$("#useSignName").tbattr("checked",true)}else{$("#useSignName").tbattr("checked",false)}this.showList();this.handlerEven()},setisUsed:function(a){if(a){this.isUsed=1}else{this.isUsed=0}this.showList();this.postProcess("/f/user/cm/sign_setneed",{need:this.isUsed,tbs:PageData.tbs},null)},handlerEven:function(){var a=this;$("#useSignName").click(function(){a.setisUsed(this.checked)})}};;var PostHandler={post:function(a,b,d,c){$.ajax({type:"post",async:false,dataType:"json",url:a,data:b,success:function(e){if(d){d(e)}}})},execute:function(b,c,d){var a=FORUM_POST_URL[b];PostHandler.post(a,c,d)}};;if(!UTSTART){var UTSTART=new Date().getTime()}if(!MOUSEPWD_CLICK){var MOUSEPWD_CLICK=0}var MousePwd=(function(){var n={ea:[],ma:[]};var h={};var c=false;var i=(new Date()).getTime();var o={};var j=[];var q=[];function k(u){if(!u){var u=window.event}var t=0;var v=0;if(u.pageX||u.pageY){t=u.pageX;v=u.pageY}else{if(u.clientX||u.clientY){t=u.clientX+document.body.scrollLeft;v=u.clientY+document.body.scrollTop}}return[t,v]}function b(t){return t.offsetParent?(t.offsetLeft+b(t.offsetParent)):t.offsetLeft}function a(t){return t.offsetParent?(t.offsetTop+a(t.offsetParent)):t.offsetTop}function p(t){if(t.preventDefault){t.preventDefault()}else{window.event.returnValue=false}}function s(A){A.stopPropagation();var v=k(A);var x=n[this.id];if(x){if(!x.hover){x.hover=true;x.count++}}else{var w=b(this);var y=a(this);var z=w+this.offsetWidth;var u=y+this.offsetHeight;x=n[this.id]={hover:true,count:1,left:w,top:y,right:z,buttom:u}}if(!x["mouse"+x.count]){x["mouse"+x.count]=[];x["time"+x.count]={start:(new Date()).getTime()};n.ma.push(x["mouse"+x.count])}x["mouse"+x.count].push(v);q.push("1")}function r(v){v.stopPropagation();var t=k(v);var u=n[this.className];if(u&&u.hover){if(t[0]&&t[0]>u.left&&t[0]<u.right&&t[1]&&t[1]>u.top&&t[1]<u.buttom){return}u["time"+u.count].end=(new Date()).getTime();u.hover=false}q.push("0")}function e(){var t=n.ma.length;if(t>0){var u=n.ma[t-1];return u[u.length-1]}}function f(){var u="";var t=q.length;if(t>10){q=q.slice(t-10)}u=q.join(",");return u}function l(){if(c){return h}var t=[e(),f(),(new Date()).getTime()-UTSTART,[screen.width,screen.height].join(",")].join("\t");h.c=d(t)+","+i+""+MOUSEPWD_CLICK;c=true;return h}function d(y){var t=[];var w={};var x=i%100;for(var v=0,u=y.length;v<u;v++){var z=y.charCodeAt(v)^x;t.push(z);if(!w[z]){w[z]=[]}w[z].push(v)}return t}function g(){return this.className}function m(t){this.elements=t;$.each(t,function(u,v){$("."+v.toString()).bind("mouseover",s);$("."+v.toString()).bind("mouseout",r);o[v.toString()]=u});$("body").bind("click",function(){MOUSEPWD_CLICK=1})}return{start:m,report:l,time:i}})();;var SimplePostor=function(d,c){this.option=d;this._edOp_t=c;var a=PageData.user.has_grade?PageData.user.level_id:(PageData.user.is_like||0);var a=PageData.user.is_like||(PageData.user.has_grade?PageData.user.level_id:(PageData.user.is_like||0));this._edOp_t.bavl=a;var b=$("#"+d.tpl_id).html();this.cur_sec=c.container;this.cur_sec.innerHTML=b;var e=$(c.container);this._bc=e.find(".lzl_panel_btn");this._enabled=true;this._eh=e.find(".lzl_panel_error");this._event={};this._statInit(d._login,d._can_post,d._no_un);$(".lzl_panel_wrapper").find("a").on("click",function(){$.stats.track("\u697c\u4e2d\u697c\u56de\u590dPlaceHolder","\u8d34\u5427PC\u9875\u9762\u4f18\u5316","pb","click")})};SimplePostor.prototype={constructor:SimplePostor,_statInit:function(d,f,e){var a=this.option;if(!d){this._cannotPost();return}if(d&&f==1&&e){this._cannotPost();return}if(d&&f!=1){this._cannotPost();return}if(a._reach_limit){this._cannotPost();return}if(a._is_block){this._cannotPost();return}if(PageData.product=="pb"&&PageData.feedback&&PageData.feedback!=0&&PageData.user.user_name!=PageData.thread.author){this._cannotPost();return}if(d&&f==1&&!e){var c=this.cur_sec;var b=$(c).find(".editor_for_container")[0];this._buildNormalEditor(b);this._postBtnInit("enble")}},_cannotPost:function(){var a=this.cur_sec;this._buildLimitedEditor(a);this._postBtnInit("disable");return},_postBtnInit:function(d){switch(d){case"disable":this._disableEditor();this._disableSmile();break;case"enble":var a=this._bc,b=this;var c=a.find("span.j_lzl_p_sm");c.css("position","relative");if(!PageData.is_ipad){this._se.addPlugin("insertsmiley",new TED.EditorPlugins.InsertSmiley(c[0]))}else{c.hide()}this._se.addPlugin("WordLimit",new TED.EditorPlugins.WordLimit(140));c=a.find("span.j_lzl_p_sb");c.hover(function(){$(this).addClass("lzl_panel_submit_hover")},function(){$(this).removeClass("lzl_panel_submit_hover lzl_panel_submit_active")});c.bind("click",function(f){$(this).addClass("lzl_panel_submit_active");b.submitClick();f.target.blur()});break}},bind:function(b,a,c){var d={stat:c?true:false,fun:a};if(this._event[b]){this._event[b].push(d)}else{this._event[b]=[];this._event[b].push(d)}},triggerEvent:function(a){if(this._event[a]){var c=this._event[a];for(var b=0;b<c.length;b++){if(c[b].fun){c[b].fun()}if(!c[b].stat){return false}}}return true},_buildLimitedEditor:function(e){var b=this;if(!b._fe){var c=$("<div>");c.addClass("lzl_simple_wrapper");var a=this._edOp_t;var d=$(b.cur_sec).find(".editor_for_container");c.css({width:b._edOp_t.width,height:b._edOp_t.height,position:"static"});c.append(b._buildLimitedInfo());b._fe=c}d.append(b._fe)},_tip:["","\u53c2\u4e0e\u672c\u5427\u8ba8\u8bba\uff0c\u8bf7\u5148 ","\u62b1\u6b49\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u9650\u5427\u52a1\u56e2\u961f\u53ca\u6ce8\u518c\u6ee1\u4e00\u5b9a\u65f6\u95f4\u7684\u8001\u7528\u6237\u53d1\u8d34","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8","\u62b1\u6b49\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u9650\u5427\u52a1\u56e2\u961f\u53d1\u8d34","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u6d4f\u89c8\uff0c\u4e0d\u80fd\u53d1\u8d34","","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u53d1\u56de\u590d\u8d34","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u53d1\u4e3b\u9898\u8d34","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8","\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8","\u4e0d\u597d\u610f\u601d\u54e6\uff0c\u672c\u697c\u76ee\u524d\u53ea\u5141\u8bb8\u697c\u4e3b\u56de\u590d\u54e6~<br/>\u5982\u679c\u4f60\u6709\u76f8\u540c\u6216\u5176\u4ed6\u7684\u95ee\u9898\uff0c\u8bf7\u5728\u672c\u5427\u53d1\u8d34\u53cd\u9988\u54e6~"],_buildLimitedInfo:function(){var e=$("<p>"),b='<div class="editor_banned_tip_info">',c=this.option,a=this,d;if(c._reach_limit){b+="<span>\u672c\u697c\u5c42\u56de\u590d\u5df2\u8fbe\u4e0a\u9650\uff0c\u8bf7\u53c2\u4e0e\u5176\u4ed6\u697c\u5c42\u8ba8\u8bba</span>";b+="</div>";e.html(b);e.css({margin:"14px 0 0 14px"})}else{if(c._is_block){b+='<span class="j_ban_info"></span></div>';e.html(b);e.css({margin:"3px 0 0 14px"})}else{b+="<span>";if(c._can_post==1&&c._no_un){b+="\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u540d\uff0c\u4e0d\u80fd\u56de\u590d\u3002\u8bf7\u5148<a href=\"javascript:void(0)\"  onclick=\"TbCom.process('User','buildUnameFrame','\u586b\u5199\u7528\u6237\u540d',' ')\">\u586b\u5199\u7528\u6237\u540d</a>";b+="</span>";b+="</div>";e.html(b);e.css({margin:"4px 0 0 14px"})}else{if(PageData.product=="pb"&&PageData.feedback&&PageData.feedback!=0&&PageData.user.user_name!=PageData.thread.author){c._forum_type=11}b+=a._tip[c._forum_type];b+="</span>";if(c._forum_type==1){b+='<span class="lzl_login_wrapper">';b+="<a href=\"#\" onclick=\"_.Module.use('common/widget/LoginDialog', ['', 'lzl']);return false;\">\u767b\u5f55</a>";b+="&nbsp;|&nbsp";b+="<a href=\"#\" onclick=\"TbCom.process('User', 'buildRegisterFrame', 'lzl');return false;\">\u6ce8\u518c</a>";b+="</span>"}else{if(c._forum_type==3){b+='<a href="http://tieba.baidu.com/f/like/level?kw=d8" >4\u7ea7\u5934\u8854</a>\u4ee5\u4e0a\u4f1a\u5458\u53d1\u8d34\u3002'}else{if(c._forum_type==9){b+="\u4e00\u5b9a\u7ea7\u522b\u4ee5\u4e0a\u4f1a\u5458\u53d1\u56de\u590d\u8d34\u3002"}else{if(c._forum_type==10){b+="\u4e00\u5b9a\u7ea7\u522b\u4ee5\u4e0a\u4f1a\u5458\u53d1\u4e3b\u9898\u8d34\u3002"}}}}b+="</div>";e.html(b);if(c._forum_type==3||c._forum_type>=7){e.css({margin:"5px 0 0 14px"})}else{e.css({margin:"14px 0 0 14px"})}}}}_.Module.use("ueglibs/widget/Ban",[],function(f){d=f.render("simplePoster")||"";d=d.replace(/(href=\")(.*?)(\")/,"$1$2"+PageData.forum.forum_id+"$3");e.find(".j_ban_info").html(d)});return e},_buildNormalEditor:function(e){var b=this,a=b.option;var c=b._edOp_t;c.container=e;var d=new TED.SimpleEditor(c);d.on("overflow",function(){b._overFlow()});d.on("unoverflow",function(){b._unoverFlow()});d.on("keydown",function(f){b._keyDown(f)});d.on("keyup",function(f){b._keyUp(f)});b._se=d},_overFlow:function(){this._disableEditor()},_unoverFlow:function(){this._enableEditor()},_keyDown:function(a){if(a.keyCode==17){this._ctrl_down=true}else{if(a.keyCode==13&&this._ctrl_down){this.submitClick();if(a.srcElement){a.srcElement.blur()}else{a.target.blur()}}}},_disableEditor:function(){var c=this;c._enabled=false;var a=c._bc.find("span.j_lzl_p_sb");a.removeClass("lzl_panel_submit");a.html("");a.addClass("lzl_panel_submit_disabled")},_disableSmile:function(){var c=this;var a=c._bc.find("span.j_lzl_p_sm");if(PageData.is_ipad){a.hide();return}c._enabled=false;a.removeClass("lzl_panel_smile");a.html("");a.addClass("lzl_panel_smile_disabled")},_enableEditor:function(){var c=this;c._enabled=true;var a=c._bc.find("span.j_lzl_p_sb");a.removeClass("lzl_panel_submit_disabled");a.addClass("lzl_panel_submit");a.html("\u53d1\u8868")},_keyDown:function(b){var a=this;if(b.keyCode==17){a._ctrl_down=true}else{if(b.keyCode==13&&a._ctrl_down){a.submitClick();if(b.srcElement){b.srcElement.blur()}else{b.target.blur()}}}if(b.altKey&&b.keyCode==83){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}setTimeout(function(){a.submitClick()},0)}},_keyUp:function(a){if(a.keyCode==17){this._ctrl_down=false}},_ie6RelativeHack:function(){var b=this,d=$(b.cur_sec),a=this._bc;d.find("div.insertsmiley_holder").hide();var e=d.find("div.wordlimit-holder");var c=a.find("span.j_lzl_p_sm");c.css("position","static");if(e.css("visibility")!="hidden"){d.find("div.wordlimit-holder").hide();b._hint_shown=true}else{b._hint_shown=false}d.find("div.lzl_simple_wrapper").css("position","static")},_ie6RelativeRecover:function(){var b=this,d=$(b.cur_sec),a=this._bc;d.find("div.insertsmiley_holder").show();var e=d.find("div.wordlimit-holder");if(this._hint_shown){e.show()}var c=a.find("span.j_lzl_p_sm");c.css("position","relative");d.find("div.lzl_simple_wrapper").css("position","relative")},_getHtml:function(){var a=this._se.getHtml();a=a.replace(/<br[^>]*>/gi," ").replace(/[\u3000\s]+/g," ").replace(/&nbsp;/g," ");return a},_data:{},submitClick:function(){if(PageData.thread.is_ad===1){if(document.images){var b=new Image();b.src=PageData.ecomStatDomain+"reply.php?forumid="+(PageData.forum.forum_id||"")+"&tid="+(PageData.thread.thread_id||"")+"&userid="+(PageData.user.user_id||"")+"&username="+encodeURIComponent(PageData.user.user_name||"")+"&exp="+encodeURIComponent(PageData.ecomExp||"")+"&t="+new Date().getTime();b=null}}var a=this;var d=$(a.cur_sec),c=d.find("div.insertsmiley_holder");d.find("span.close").click();c.css("position","static");if(!this._isValid()){c.css("position","relative");return}c.css("position","relative");this._submitData()},_isValid:function(){if(!this._enabled){return false}if(this._se.isEmpty()){this._se.focus();this._eh.html("\u53d1\u8d34\u5185\u5bb9\u9700\u5305\u542b\u6587\u5b57").show();return false}if(this._se.getSmileyNum()>10){this._eh.html("\u62b1\u6b49\uff0c\u6bcf\u5c42\u697c\u63d2\u5165\u7684\u8868\u60c5\u4e0d\u80fd\u8d85\u8fc710\u4e2a\uff0c\u8bf7\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4").show();return false}return true},_submitData:function(){this._eh.hide();this._disableEditor();var a=this;$.tb.post(FORUM_POST_URL.postAdd,a._getData(),function(b){a._setPostData("vcode","");a._setPostData("vcode_md5","");if(b.no==0){var c=a.triggerEvent("onsuccess");a._se.empty();if(a.option.__data__){a.option.data=a.option.__data__;a.option.__data__=null}a._enableEditor();var c=a.triggerEvent("hide")}else{a._showAddResult(b);a._enableEditor()}return false})},_setData:function(a){this.option.__data__=this.option.data;this.option.data=$.extend(this.option.data,a)},_setPostData:function(a,b){this._data[a]=b},_getData:function(){var f=this.option,a=f.data,b=this;b._data.kw=PageData.forum.forum_name;b._data.fid=PageData.forum.forum_id;b._data.tid=PageData.thread.thread_id;b._data.floor_num=a.floor_num;b._data.quote_id=a.pid;b._data.rich_text=1;b._data.tbs=PageData.tbs;b._data.content=b._getHtml();b._data.lp_type=f._thread_topic_type;b._data.lp_sub_type=f._thread_topic_subtype;b._data.new_vcode=1;b._data.tag=11;if(a.spid!=undefined){b._data.repostid=a.spid}else{b._data.repostid=a.pid}if(b._no_un==true){b._data.anonymous=1}else{b._data.anonymous=0}try{var c=window.external.GetVersion("version");if(c.indexOf("baidubrowser")>-1){b._data.browser_version="baidubrowser"}}catch(d){}return b._data},_errorTipShow:function(b){var a=this;a._eh.html(b).show();a._se.focus()},_showAddResult:function(b){var a=this;var c=function(f){switch(f.getActionType()){case f.Action_FocusContent:a._se.focus();break;case f.Action_ClearYZM:break;case f.Action_GoToHead:break;case f.Action_FlushAndGoToHead:a._se.empty();break;default:break}};Thread_add_result.init(b);if(b.no!=0){if(Thread_add_result.isNeedWaitForCheck()){var e='<div style="margin: 0px 30px 0px 30px;font-size:14px;line-height:20px;text-align:left;font-family: &quot;\u5b8b\u4f53&quot;;"><table style="width:90%"><tbody><tr><td width="60"><img style="border:none;" src="http://tb2.bdstatic.com/tb/img/messageFace.gif"></td><td valign="middle" style="font-size:20px;line-height:22px;font-family: &quot;\u9ed1\u4f53&quot;;">\u7b49\u5f85\u5ba1\u6838...</td></tr></tbody></table>'+Thread_add_result.getMessage()+"</div>";var d=$.dialog.alert(e,{width:380,height:105,title:"\u53d1\u8868\u8d34\u5b50"});d.bind("onclose",function(){a._se.empty();a._se.focus();return true})}else{if(b.no==901){var e="\u672c\u697c\u5c42\u56de\u590d\u5df2\u8fbe\u4e0a\u9650\uff0c\u8bf7\u53c2\u4e0e\u5176\u4ed6\u697c\u5c42\u8ba8\u8bba";a._errorTipShow(e)}else{if(b.no==814){var e="\u62b1\u6b49\uff0c\u6bcf\u5c42\u697c\u63d2\u5165\u7684\u8868\u60c5\u4e0d\u80fd\u8d85\u8fc710\u4e2a\uff0c\u8bf7\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4";a._errorTipShow(e)}else{if(b.no==902){var e="\u62b1\u6b49\uff0c\u6bcf\u5c42\u697c\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u80fd\u8d85\u8fc7140\u4e2a\uff0c\u8bf7\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4";a._errorTipShow(e)}else{if(b.no==3010){var e="\u62b1\u6b49\uff0c\u672c\u5427\u53ea\u5141\u8bb8\u7c89\u4e1d\u56e2\u6210\u5458\u53d1\u8d34\uff0c\u5feb\u53bb\u8ba4\u8bc1\u5427\u3002";a._errorTipShow(e)}else{if(b.no==903){var e="\u7ebf\u8def\u5347\u7ea7\u6539\u9020\uff0c\u6682\u65f6\u65e0\u6cd5\u53d1\u8d34\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\u8868\u793a\u62b1\u6b49~";a._errorTipShow(e)}else{if(b.no==40){if(a.captchaDialog){a.captchaDialog.setTip(b.data.vcode.str_reason);a.captchaDialog.updateCaptchaImg(b.data.vcode.captcha_vcode_str,b.data.vcode.captcha_code_type);a.captchaDialog.show();a.captchaDialog.focus()}else{_.Module.use("common/component/CaptchaDialog",{message:b.data.vcode.str_reason,vCode:b.data.vcode.captcha_vcode_str,vCodeType:b.data.vcode.captcha_code_type,forumName:a._data.kw,forumId:a._data.fid,isAnonymous:a._data.anonymous,postType:"reply",paramsCallback:function(){var f=a._getData();var g={content:f.content};g.tid=PageData.thread.thread_id;return g}},function(f){a.captchaDialog=f;f.bind("onclose",function(){a._enableEditor();f.hide();return false});f.bind("onaccept",function(){a._setPostData("vcode",f.getInputValue());a._setPostData("vcode_md5",f.getVCode());a._submitData()});f.show()})}}else{if(Thread_add_result.isNeedBindPhone()){$.dialog.alert("<div style='margin: 15px;'>"+Thread_add_result.getMessage()+"</div>",{title:"\u53d1\u8d34\u5931\u8d25",acceptValue:"\u7ed1\u5b9a\u624b\u673a",width:410,onaccept:function(){$.tb.location.setHref("http://passport.baidu.com/v2/?accountbindphone&tpl=tb&u="+encodeURIComponent($.tb.location.getHref()));return false},onclose:function(){c(Thread_add_result);return true}})}else{var e='<div style="margin: 0px 30px 0px 30px;font-size:14px;line-height:20px;text-align:left;font-family: &quot;\u5b8b\u4f53&quot;;"><table style="width:90%"><tbody><tr><td width="60"><img style="border:none;" src="http://tb2.bdstatic.com/tb/img/errorFace.gif"></td><td valign="middle" style="font-size:20px;line-height:22px;font-family: &quot;\u9ed1\u4f53&quot;;">\u53d1\u8d34\u5931\u8d25</td></tr></tbody></table>'+Thread_add_result.getMessage()+"</div>";var d=$.dialog.alert(e,{width:410,height:95,title:"\u53d1\u8868\u8d34\u5b50"});d.bind("onclose",function(){c(Thread_add_result);return true})}}}}}}}}}}};(function(a){var b;_.Module.use("ueglibs/widget/Ban",[],function(d){b=d});$(".j_richPosterAppealLink").live("click",function(){$.stats.track("posterAppealLink","uegCount","bawuAppeal","click")});var c={POST_AUTHORIZED:"authorized",POST_LOGIN_NEEDED:"\u672c\u5427\u53d1\u8d34\uff0c\u8bf7\u5148 <a href=\"#\" onclick=\"_.Module.use('common/widget/LoginDialog', ['', 'editor']);return false;\">\u767b\u5f55</a> | <a href=\"#\" onclick=\"TbCom.process('User','buildRegisterFrame',null,null,null,'editor');return false;\">\u6ce8\u518c</a>&nbsp;",POST_USERNAME_NEEDED:"\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u540d\uff0c\u4e0d\u80fd\u5728\u672c\u5427\u53d1\u8d34\u3002\u8bf7\u5148<a href=\"#\" onclick=\"TbCom.process('User','buildUnameFrame','\u586b\u5199\u7528\u6237\u540d',' ');return false;\">\u586b\u5199\u7528\u6237\u540d</a>",POST_BLOCKED:b.render("richPoster"),POST_LEVEL_LIMITED:'\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8<a href="http://tieba.baidu.com/f/like/level?kw=#{forum_name}&ie=utf-8" target="_blank">4\u7ea7\u5934\u8854</a><br />\u4ee5\u4e0a\u4f1a\u5458\u53d1\u8d34',POST_BAWU_LIMITED:"\u62b1\u6b49\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u9650\u5427\u52a1\u56e2\u961f\u53d1\u8d34",POST_LAW_LIMITED:"\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u6d4f\u89c8\uff0c\u4e0d\u80fd\u53d1\u8d34",POST_QUALIFICATIONS_LIMITED:"\u62b1\u6b49\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u9650\u5427\u52a1\u56e2\u961f\u53ca\u6ce8\u518c\u6ee1\u4e00\u5b9a\u65f6\u95f4\u7684\u8001\u7528\u6237\u53d1\u8d34",POST_THREAD_ONLY:"\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u53d1\u4e3b\u9898\u8d34",POST_REPLY_ONLY:"\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u53ea\u80fd\u53d1\u56de\u590d\u8d34",POST_THREAD_LEVEL_LIMITED:"\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8\u4e00\u5b9a\u7ea7\u522b\u4ee5\u4e0a\u4f1a\u5458\u53d1\u4e3b\u9898\u8d34",POST_REPLY_LEVEL_LIMITED:"\u62b1\u6b49\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\uff0c\u672c\u5427\u76ee\u524d\u4ec5\u5141\u8bb8\u4e00\u5b9a\u7ea7\u522b\u4ee5\u4e0a\u4f1a\u5458\u53d1\u56de\u590d\u8d34",POST_PAD_LIMITED:"\u5207\u6362\u6210pad\u7248\u8d34\u5427\uff0c\u7545\u4eab\u66f4\u987a\u7545\u7684\u53d1\u8d34\u4f53\u9a8c\uff01",POST_ONLY_LOUZHU_CAN_REPLY:"\u4e0d\u597d\u610f\u601d\u54e6\uff0c\u672c\u697c\u76ee\u524d\u53ea\u5141\u8bb8\u697c\u4e3b\u56de\u590d\u54e6~<br/>\u5982\u679c\u4f60\u6709\u76f8\u540c\u6216\u5176\u4ed6\u7684\u95ee\u9898\uff0c\u8bf7\u5728\u672c\u5427\u53d1\u8d34\u53cd\u9988\u54e6~",context:null,authorities:null,loadContext:function(d){this.context=d},loadContextFromPageData:function(e){var f=e.product=="frs";var d=e.product=="pb";this.context={forum:{id:e.forum.forum_id,name:e.forum.forum_name,nameEncoded:e.forum.name_url},user:{id:e.user.user_id,name:e.user.user_name,level:e.user.level_id?e.user.level_id:e.user.balv.level_id,isFavorForum:f?e.user.balv.is_like:PageData.user.is_like,isLogin:!!e.user.is_login,isBlocked:f?!!e.user.is_block:!!PageData.user.forbidden.isForbid,isBlack:f?!!e.user.balv.is_black:!!e.user.is_black,noUsername:!!e.user.no_un,canPost:f?e.user.power.post:PageData.power.can_post,canVote:f?e.user.power.vote_creater:false,forbidFlag:e.forum.forbid_flag,signNumber:!!e.user.is_login?((e.forum.sign_in_info&&e.forum.sign_in_info.user_info)?e.forum.sign_in_info.user_info.c_sign_num:0):0,superboy:e.user.superboy,props:e.user.Parr_props,gameSignature:e.user.game_attr},product:e.product,floor:0,tbs:e.tbs,isPad:e.is_ipad,page:e.page,isBlessForum:e.userfortune&&e.userfortune.has_fortune_bag};if(d){this.context.thread={id:e.thread.thread_id,thread_type:PageData.thread.thread_type};this.context.floor=e.thread.reply_num}},loadAuthorities:function(d){if($.browser.msie&&$.browser.version<8){d.long_editor=false;d.float_editor=false}this.authorities=d},getContext:function(){return this.context},getAuthorities:function(){return this.authorities},isPostAllowed:function(){return this._validatePostAuthority()==this.POST_AUTHORIZED},getPostRejectedMessage:function(){var d=this._validatePostAuthority();if(d!=this.POST_AUTHORIZED){return $.tb.format(d,$.extend({forum_name:this.context.forum.name},this.context))}else{return null}},_validatePostAuthority:function(){var d=this.context.user;if(!d.isLogin){return this.POST_LOGIN_NEEDED}if(d.noUsername){return this.POST_USERNAME_NEEDED}if(d.isBlocked){return this.POST_BLOCKED}if(!d.canPost){return this.FORBID_FLAG_MAP[d.forbidFlag]}if(PageData.product=="pb"&&PageData.feedback&&PageData.feedback!=0&&PageData.user.user_name!=PageData.thread.author){return this.FORBID_FLAG_MAP[11]}if(this.context.isPad){return this.POST_PAD_LIMITED}return this.POST_AUTHORIZED}};c.FORBID_FLAG_MAP={1:c.POST_LOGIN_NEEDED,2:c.POST_QUALIFICATIONS_LIMITED,3:c.POST_LEVEL_LIMITED,4:c.POST_BAWU_LIMITED,5:c.POST_LAW_LIMITED,7:c.POST_REPLY_ONLY,8:c.POST_THREAD_ONLY,9:c.POST_REPLY_LEVEL_LIMITED,10:c.POST_THREAD_LEVEL_LIMITED,11:c.POST_ONLY_LOUZHU_CAN_REPLY};a.PosterContext=c})(window);_.Module.define({path:"encourage/widget/PostGuessing/Dialog",require:["common/widget/PostService","common/widget/PostService/PostResultHandlerManager"],sub:{$dom:null,_options:{},initial:function(){},buildDialog:function(e){var o=new $.dialog({html:e.html,width:e.width,height:e.height,showTitle:!1,showShadow:!1,draggable:!1,holderClassName:"guessing_dialog "+e.holderClassName});return o.element.find(".j_guessing_close").on("click",function(){$.tb.location.reload(),o.close()}),o}}});
;_.Module.define({path:"encourage/widget/PostGuessing/Item",sub:{_tpl:['<li class="guessing_item_wrapper <%=isLast ? "last": ""%>">','<a href="javascript:;" class="icon_up j_icon_up">',"</a>",'<div class="guessing_icon_list_wrapper">','<ul class="guessing_icon_list">','<li data-val="1"><i class="icon_shitou"></i></li>','<li data-val="2"><i class="icon_jiandao"></i></li>','<li data-val="3"><i class="icon_bu"></i></li>',"</ul>","</div>",'<a href="javascript:;" class="icon_down j_icon_down">',"</a>",'<a href="javascript:;" class="icon_remove j_icon_remove" title="移除"></a>','<div class="guessing_no">',"<%=matchNo%>","</div>","</li>"].join(""),$dom:null,_options:{},curPos:0,initial:function(i){this._options=i,this._generateDom()},_generateDom:function(){var i=baidu.template,t=i(this._tpl,{matchNo:this._options.matchNo,isLast:this._options.isLast});this.$dom=$(t),this._options.$insertBefore?this.$dom.insertBefore(this._options.$insertBefore):this._options.$container&&this._options.$container.append(this.$dom),this._bindEvents()},_bindEvents:function(){var i=this,t=this.$dom.find(".j_icon_up"),s=this.$dom.find(".j_icon_down"),o=Math.round(2*Math.random());this.$dom.data("curPos",o+1).find(".guessing_icon_list_wrapper").jCarouselLite({btnNext:s,btnPrev:t,visible:1,vertical:!0,circular:!0,start:o,afterEnd:function(t){var s=t.data("val");i.$dom.data("curPos",s)}}),this.$dom.find(".j_icon_remove").on("click",function(){i.$dom.remove(),i.trigger("guessing:itemremove")}),this.$dom.on("mouseenter",function(){$(this).addClass("hover")}).on("mouseleave",function(){$(this).removeClass("hover")})},bindRemove:function(i){return this.bind("guessing:itemremove",i),this},getItemData:function(){var i=this.$dom.data("curPos");return i},setLastClass:function(){return this.$dom.addClass("last"),this},unsetLastClass:function(){return this.$dom.removeClass("last"),this},refresh:function(){var i,t=this.$dom.find(".j_icon_down"),s=10+Math.floor(3*Math.random()+1),o=100,n=function(){s>0?(s--,t.trigger("click"),i=setTimeout(n,o)):clearTimeout(i)};i=setTimeout(n,o)}}});
;_.Module.define({path:"encourage/widget/PostGuessing/Add",sub:{_tpl:['<li class="guessing_add_wrapper">','<a href="javascript:;" class="guessing_add j_guessing_add"></a>','<div class="guessing_no" id="add_guessing_no">',"<%=matchNo%>","</div>","</li>"].join(""),$dom:null,_options:{},initial:function(i){this._options=i,this._generateDom()},add:function(i){var n=this;this.bind("guessing:add",function(){n.$dom.find("#add_guessing_no").text(++n._options.matchNo),i()})},setMatchNo:function(i){this._options.matchNo=i,this.$dom.find("#add_guessing_no").text(i)},_generateDom:function(){var i=baidu.template,n=i(this._tpl,{matchNo:this._options.matchNo});this.$dom=$(n),this._options.$container.append(this.$dom),this._bindEvents()},_bindEvents:function(){var i=this;this.$dom.find(".j_guessing_add").on("click",function(){i.trigger("guessing:add")})}}});
;_.Module.define({path:"encourage/widget/PostGuessing",require:["common/widget/PostService","common/widget/PostService/PostResultHandlerManager","Item","Add","Dialog"],sub:{_tpl:['<div id="guessing_wrapper" class="guessing_wrapper">','<ul class="guessing_tab">','<li><i class="icon_guessing_tab"></i><a href="javascript:;">竞猜游戏</a></li>',"</ul>","<% if (login) { %>",'<div class="guessing_main">','<div class="input_wrapper">','<input type="text" class="j_title" placeholder="请填写标题" maxlength="24" />',"</div>",'<div class="guessing_random clearfix">','<div class="guessing_random_inner">',"我的猜拳顺序",'<a href="javascript:;" class=" ui_btn ui_btn_s j_guessing_refresh">',"<span><em>完全随机</em></span>","</a>","</div>","</div>",'<div id="guessing_detail" class="guessing_detail">','<div class="guessing_detail_wrapper">',"<ul>","</ul>","</div>","</div>",'<a href="javascript:;" class="gueesing_prev j_gueesing_prev"></a>','<a href="javascript:;" class="gueesing_next j_gueesing_next"></a>','<div class="guessing_intro">','<div class="info">',"<ul>","<li>",'<div class="info_item"><span class="bold_text">猜拳总额：<ins class="guesisng_fee j_guessing_fee">3000</ins></span><i class="icon_tdou"></i></div>','<div class="info_item"><span>单回合消耗1000T豆</span></div>',"</li>","<li>",'<div class="info_item"><span class="bold_text">T豆余额： <%=parr_score_total%><i class="icon_tdou"></i></span></div>','<div class="info_item last"><a href="javascript:;" class="j_btn_charge ui_btn ui_btn_s">',"<span><em>充值</em></span>","</a></div>","</li>","</ul>","</div>",'<div class="text">',"<h3>游戏规则</h3>","<p>回合制结算，发布猜拳每回合消耗1000T豆，获胜获取1700T豆、经验+2；平局获得1000T豆；失败获得0T豆。</p>","</div>","</div>","</div>","<% } else { %>",'<div class="guessing_main unlogin">',"<div class=\"guessing_unlogin\"><div class=\"tb_poster_info poster_warning\">本吧发贴，请先 <a href=\"#\" onclick=\"_.Module.use('common/widget/LoginDialog', ['', 'editor']);return false;\">登录</a> | <a href=\"#\" onclick=\"TbCom.process('User','buildRegisterFrame',null,null,null,'editor');return false;\">注册</a>&nbsp;</div></div>","</div>","<% } %>","</div>",'<div class="post_guessing_btn">','<a href="#" class="<% if (login) { %>ui_btn ui_btn_m<% } else { %>ui_btn_disable ui_btn_m_disable<% } %> j_guessing_post">',"<span><em>发表猜拳</em></span>","</a>",'<a href="/tbmall/gthread/center" class="post_guessing_link" target="_blank">参加贴吧“拳王”争霸赛>></a>',"</div>"].join(""),_dialog:null,_root:null,_defaultAttr:{width:630,height:512,visible:3,container:$("body"),modal:!1,autoCenter:!1,fixed:!1,holderClassName:"guessing_holder",page:"frs"},_attr:{},_items:[],_scroll:{step:132,pos:0},initial:function(t){this._mergeAttr(t),this._render(),this._initPostService(),this._bindEvents()},_initPostService:function(){var t=this;this.postService=this.use("common/widget/PostService"),this.postService.success(function(){if("zt"==t._attr.page){var e=new $.dialog({title:"标题",html:'<p style="text-align: center; margin-bottom: 10px; font-size: 14px; color: #666;">恭喜，已成功发表至贴吧嘉年华吧! </p><div style="text-align: center;"><a href="/f?ie=utf-8&kw=贴吧嘉年华" target="_blank" class="ui_btn ui_btn_m"><span><em>前往查看</em></span></a></div>'});e.element.find(".dialogJclose").on("click",function(){$.tb.location.reload()}),t._dialog&&t._dialog.close()}else $('<div class="tb_poster_info poster_success poster_guessing_success"><p><strong>发表猜拳贴成功！</strong></div>').appendTo(t._root),setTimeout(function(){$.tb.location.reload()},500)}).complete(function(){t._toggleSubmitButton(!1)})},_bindEvents:function(){var t=this;this._root.on("click",".j_btn_charge",function(){_.Module.use("common/widget/tcharge_dialog")}),this._root.on("click",".j_gueesing_prev",function(){0!=t._scroll.pos&&t._scrollToPos(t._scroll.pos-1)}),this._root.on("click",".j_gueesing_next",function(){t._scroll.pos!=t._items.length-t._attr.visible&&t._scrollToPos(t._scroll.pos+1)}),this._root.find(".j_guessing_refresh").on("click",function(){for(var e=0,s=t._items.length;s>e;e++)t._items[e].refresh()}),$(window).on("resize",function(){t._adjustDialog()})},_render:function(){var t=this,e=baidu.template,s=this._attr,i={},n="";i.parr_score_total=0,i.login=PageData.user&&PageData.user.is_login,PageData.user&&PageData.user.Parr_scores&&(i.parr_score_total=PageData.user.Parr_scores.scores_total),n=e(this._tpl,i);var a=s.container,o={html:n,width:s.width,height:s.height,modal:s.modal,fixed:s.fixed,autoCenter:s.autoCenter,showShadow:!1,draggable:!1,closeable:!0,holderClassName:s.holderClassName};if(!s.autoCenter){var l=a.offset();o.left=l.left,o.top=l.top}this._dialog=new $.dialog(o),this._root=this._dialog.element;for(var r=1;r<=this._attr.visible;r++){var _=this.use("Item",{$container:$("#guessing_detail>div>ul"),matchNo:r,isLast:r==this._attr.visible});_.bindRemove(function(e){return function(){t._items.pop(),t._items.length>1&&t._items[t._items.length-1].setLastClass(),g.setMatchNo(e),t._scroll.pos-=1;var s=parseInt(t._root.find(".j_guessing_fee").text());t._root.find(".j_guessing_fee").text(s-1e3)}}(r)),this._items.push(_)}var g=this.use("Add",{$container:$("#guessing_detail>div>ul"),matchNo:this._attr.visible+1});g.add(function(){t._items[t._items.length-1].unsetLastClass();var e=t.use("Item",{$insertBefore:$("#guessing_detail>div>ul>li.guessing_add_wrapper"),matchNo:t._items.length+1}).bindRemove(function(){t._items.pop(),t._items.length>1&&t._items[t._items.length-1].setLastClass(),g.setMatchNo(t._items.length+1);var e=parseInt(t._root.find(".j_guessing_fee").text());t._root.find(".j_guessing_fee").text(e-1e3)}).setLastClass();t._items.push(e),t._items.length>t._attr.visible&&t._scrollToPos(t._items.length-t._attr.visible);var s=parseInt(t._root.find(".j_guessing_fee").text());t._root.find(".j_guessing_fee").text(s+1e3)});t.use("Dialog");this._root.find(".j_guessing_post").on("click",function(e){e.preventDefault(),$(this).is(".ui_btn_disable")||t.post()}),this.$title=$("#tb_rich_poster").length>0?$("#tb_rich_poster").find(".j_title"):this._root.find(".j_title")},post:function(){var t=this._validateContent();!this.postService.isPosting()&&t&&(this.postService.post("guessingThread",this._getPostData(),PosterContext.getContext()),this._toggleSubmitButton(!0))},_getGuessing:function(){for(var t={},e=0,s=this._items.length;s>e;e++)t["guessing["+e+"]"]=this._items[e].getItemData();return t},_getPostData:function(){var t={content:"",fid:"12583317",kw:"贴吧嘉年华"};$.isEmptyObject(PageData.forum)||(t.fid=PageData.forum.id,t.kw=PageData.forum.name);var e=this._getTitle(),s=this.$title.data("prefix");return-1==e.indexOf(s)&&(s=""),e=e.replace(/\u2006/g,""),e=e.replace(s,""),t.title=e,t.prefix=s,$.extend(t,this._getGuessing()),t},_adjustDialog:function(){if("frs"==PosterContext.context.product){var t=this._attr.container,e=t.offset();this._dialog.element.css({left:e.left,top:e.top})}},_scrollToPos:function(t){this._scroll.pos=t,this._root.find("#guessing_detail").animate({scrollLeft:t*this._scroll.step});var e=t!=this._items.length-this._attr.visible;this._root.find(".j_gueesing_next").toggle(e);var s=0!=t;this._root.find(".j_gueesing_prev").toggle(s)},_toggleSubmitButton:function(t){this._root.find(".j_guessing_post").toggleClass("ui_btn ui_btn_m",!t),this._root.find(".j_guessing_post").toggleClass("ui_btn_disable ui_btn_m_disable",t)},_validateContent:function(){return!0},_getTitle:function(){return this.$title?this.$title.val():""},_mergeAttr:function(t){this._attr=$.extend(!0,{},this._defaultAttr);for(var e in t)this._defaultAttr.hasOwnProperty(e)&&(this._attr[e]=t[e])}}});_.Module.define({path:"common/widget/WordLimit",requires:[],sub:{checkTimer:null,isShow:false,exceed:false,initial:function(b){var a={container:$("body"),inputObj:null,checkDelay:50,showLimit:10,maxNum:120,isLimitInput:false,autoPos:true,numStyle:{},limitStyle:{}};var c=$.extend(true,a,b);this.container=$(c.container);this.inputObj=$(c.inputObj);this.showLimit=c.showLimit;this.option=c;this.holder=$('<div class="w_limit_wrapper "></div>');this.container.append(this.holder)},init:function(){var c=this.option,b=this;if(c.inputObj==null){return}var a=$(c.inputObj);a.keydown(function(d){b.handlerEvent(d);return true});a.focus(function(d){b.handlerEvent(d);return true});a.bind("input",function(d){b.handlerEvent(d);return true});a.bind("propertychange",function(d){b.handlerEvent(d);return true})},setLimitStyle:function(a){this.holder.css(a)},hideWordLimit:function(){this.trigger("wlhiding");this.holder.hide();this.isShow=false;clearTimeout(this.checkTimer)},autoPosition:function(){var c=this.inputObj.offset(),b=this.inputObj.width(),a=$(document).width();this.holder.css({top:c.top-this.holder.height()-5,right:a-b-c.left-9})},handlerEvent:function(b){clearTimeout(this.checkTimer);var c=this.option;var a=this;a.blur=false;this.checkTimer=setTimeout(function(){a.check()},c.checkDelay)},check:function(b){var g=this.option;var f=this.inputObj;var e=f.val();var c=$.tb.getByteLength(e);var d=g.maxNum-c;if(g.isLimitInput&&d<0){f.val($.tb.subByte(e,g.maxNum+(d<0&&d>-2?d:0),""))}d=g.maxNum-$.tb.getByteLength(f.val());if(d<=this.showLimit){if(g.autoPos){this.autoPosition()}else{this.trigger("onSetPosition")}this.holder.show();this.isShow=true;var a=Math.ceil(d/2);if(d<0){a=Math.floor(d/2);if(!this.exceed){this.trigger("overflow");this.exceed=true}this.trigger("wlshowing");this.holder.html('\u5df2\u7ecf\u8d85\u51fa<span class="w_limit_num" style="color:#f00;">'+-a+"</span>\u4e2a\u5b57")}else{if(this.exceed){this.trigger("unoverflow");this.exceed=false}this.trigger("wlshowing");if(d==0){this.holder.html('\u8fd8\u53ef\u8f93\u5165<span class="w_limit_num" style="color:#ff0000;">'+a+"</span>\u4e2a\u5b57")}else{this.holder.html('\u8fd8\u53ef\u8f93\u5165<span class="w_limit_num" style="color:#929292;">'+a+"</span>\u4e2a\u5b57")}}}else{if(this.isShow){this.trigger("wlhiding");this.holder.hide();this.isShow=false;if(this.exceed){this.trigger("unoverflow");this.exceed=false}}}}}});_.Module.define({path:"common/widget/RewardTip",sub:{_tpl:['<div class="reward_tip_dialog_wrapper">','<div class="reward_tip_dialog">','<div class="up">','<p class="status"><i class="icon_success"></i>\u53d1\u8868\u6210\u529f</p>','<p>\u4eb2~\u4e0b\u6b21\u8bb0\u5f97\u7528\u5ba2\u6237\u7aef\u53d1\u8d34\uff0c\u6709<span class="red_text">3\u500d</span>\u7ecf\u9a8c\u5462!</p>','<p>\u53d1\u8d34\u6210\u529f\uff0c\u83b7\u53d6<span class="red_text">+1</span><i class="icon_tdou"></i></p>',"</div>",'<div class="down">','<% if (typeof rewards != "undefined") {%>','<p class="status">\u606d\u559c\u4f60\u83b7\u5f97\u4ee5\u4e0b\u5956\u52b1\uff01</p>','<div class="rewards">','<span class="rewards_item" style="background: url(http://tb1.bdstatic.com/tb/cms/tbmall/reward/pc/icon/<%=rewards.props_id%>.png) no-repeat;">','<%=rewards.title%>*<span class="orange_text"><%=rewards.num%></span>',"</span>","<% if (rewards.props_id == 1210001) {%>",'<p class="tdou_tips">',"\u6ce8\u610f\uff1a\u5f53\u6d3b\u8dc3T\u8c46\u8fbe\u52308000\u4e0a\u9650\u65f6\uff0c\u4e0d\u80fd\u9886\u53d6\u5168\u90e8T\u8c46\u3002","</p>","<% } %>","</div>",'<div class="btn_wrapper">','<a href="javascript:;" class="j_rewards_get ui_btn ui_btn_s">',"<span><em>\u9886\u53d6\u5956\u52b1</em></span>","</a>",'<a href="javascript:;" class="j_rewards_giveup ui_btn ui_btn_sub_s">',"<span><em>\u653e\u5f03\u5956\u52b1</em></span>","</a>","</div>","<% } else { %>",'<p class="status">\u5f88\u9057\u61be\uff0c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5f97\u5230\uff0c\u7ee7\u7eed\u52aa\u529b\u5427\uff01</p>','<div class="btn_wrapper">','<a href="javascript:;" class="j_rewards_refresh ui_btn ui_btn_s">',"<span><em>\u786e \u8ba4</em></span>","</a>","</div>","<% } %>","</div>","</div>","</div>"].join(""),_data:null,initial:function(a){this._data=a;this._buildDialog();this.fire("rewardsSuccess");if(!a.rewards){this._timer=setTimeout(function(){$.tb.location.reload()},3000)}},_getHtml:function(){var a=baidu.template;var b=this._data;return a(this._tpl,b)},_buildDialog:function(){var a=this._getHtml();this._dialog=$(a).appendTo($(".editor_wrapper"));this._bindEvents()},_bindEvents:function(){var a=this;this._dialog.find(".j_rewards_get").one("click",function(){var b=PageData;var c={tbs:b.tbs,forum_id:b.forum.forum_id,thread_id:b.thread.thread_id,reward_id:a._data.rewards.reward_id};$.tb.post("/tbmall/rthread/recieve",c,function(){$.tb.location.reload()})});this._dialog.find(".j_rewards_giveup").one("click",function(){$.tb.location.reload()});this._dialog.find(".j_rewards_refresh").one("click",function(){a._timer&&clearTimeout(a._timer);$.tb.location.reload()})}}});_.Module.define({path:"common/widget/MousePwd",requires:[],sub:{initial:function(){this.UTSTART=new Date().getTime();this.MOUSEPWD_CLICK=0;var n={ea:[],ma:[]};var h={};var c=false;var i=(new Date()).getTime();var o={};var j=[];var q=[];function k(u){if(!u){var u=window.event}var t=0;var v=0;if(u.pageX||u.pageY){t=u.pageX;v=u.pageY}else{if(u.clientX||u.clientY){t=u.clientX+document.body.scrollLeft;v=u.clientY+document.body.scrollTop}}return[t,v]}function b(t){return t.offsetParent?(t.offsetLeft+b(t.offsetParent)):t.offsetLeft}function a(t){return t.offsetParent?(t.offsetTop+a(t.offsetParent)):t.offsetTop}function p(t){if(t.preventDefault){t.preventDefault()}else{window.event.returnValue=false}}function s(A){A.stopPropagation();var v=k(A);var x=n[this.id];if(x){if(!x.hover){x.hover=true;x.count++}}else{var w=b(this);var y=a(this);var z=w+this.offsetWidth;var u=y+this.offsetHeight;x=n[this.id]={hover:true,count:1,left:w,top:y,right:z,buttom:u}}if(!x["mouse"+x.count]){x["mouse"+x.count]=[];x["time"+x.count]={start:(new Date()).getTime()};n.ma.push(x["mouse"+x.count])}x["mouse"+x.count].push(v);q.push("1")}function r(v){v.stopPropagation();var t=k(v);var u=n[this.className];if(u&&u.hover){if(t[0]&&t[0]>u.left&&t[0]<u.right&&t[1]&&t[1]>u.top&&t[1]<u.buttom){return}u["time"+u.count].end=(new Date()).getTime();u.hover=false}q.push("0")}function e(){var t=n.ma.length;if(t>0){var u=n.ma[t-1];return u[u.length-1]}}function f(){var u="";var t=q.length;if(t>10){q=q.slice(t-10)}u=q.join(",");return u}function l(){if(c){return h}var t=[e(),f(),(new Date()).getTime()-this.UTSTART,[screen.width,screen.height].join(",")].join("\t");h.c=d(t)+","+i+""+this.MOUSEPWD_CLICK;c=true;return h}function d(y){var t=[];var w={};var x=i%100;for(var v=0,u=y.length;v<u;v++){var z=y.charCodeAt(v)^x;t.push(z);if(!w[z]){w[z]=[]}w[z].push(v)}return t}function g(){return this.className}function m(t){this.elements=t;$.each(t,function(u,v){$("."+v.toString()).bind("mouseover",s);$("."+v.toString()).bind("mouseout",r);o[v.toString()]=u});$("body").bind("click",function(){this.MOUSEPWD_CLICK=1})}this.start=m;this.report=l;this.time=i}}});_.Module.define({path:"common/widget/PostSignature",requires:[],sub:{_template:['<option value="#{id}" #{isSelected}>#{name}</option>'].join(""),url:"/f/user/sign_list?t="+(+new Date()),hasRequested:false,isUsed:0,data:null,initial:function(b){var a=this;this.$root=b.$container;this.gameSignature=b.gameSignature},init:function(){var a=this;if(!this.hasRequested){this.hasRequested=true;if(this.data==null){this.requestSignature()}}this.$root.on("change",".j_use_signature",function(){a.isUsed=this.checked?1:0;a.toggleList();$.post("/f/user/cm/sign_setneed",{need:a.isUsed,tbs:PosterContext.getContext().tbs})})},requestSignature:function(){var a=this;$.get(this.url,function(b){b=$.json.decode(b);if(b&&b.no==0){a.data=b.data;a.isUsed=a.data.need;a.$root.find(".j_use_signature").tbattr("checked",a.isUsed==1);a.buildList(b.data);a.toggleList()}})},toggleList:function(){var a=this.$root.find(".j_signature_wrapper");if(this.isUsed==1){a.show()}else{a.hide()}},buildList:function(g){var e="",c=this.$root.find(".j_signature_wrapper"),b=c.find("select"),f=false;if(g&&g.signs.length>0){for(var d=0,a=g.signs.length;d<a;d++){e+=$.tb.format(this._template,{id:g.signs[d].id,isSelected:g.signs[d].id==g.used_id?"selected=selected":"",name:g.signs[d].name})}b.html(e);f=true}if(this.gameSignature&&!$.isEmptyObject(this.gameSignature.signature_info)){this.rebuildList(this.gameSignature);f=true}if(!f){c.empty();c.html('\uff08\u60a8\u76ee\u524d\u6ca1\u6709\u53ef\u4f7f\u7528\u7684\u7b7e\u540d\u6863\uff0c&nbsp;<a style="color:#0449BE" target="_blank" href="/i/sys/jump?type=signsetting">\u67e5\u770b\u5168\u90e8</a>\uff09')}},rebuildList:function(c){var b=this,f="",a="",e=b.$root.find(".j_use_signature"),d=this.$root.find(".j_signature_wrapper select");if(c.is_open==true){a="selected=selected";d.find(":selected").tbprop("selected",false);if(e.tbprop("checked")==false){e.trigger("click")}}f+=$.tb.format(this._template,{id:12345678,isSelected:a,name:"\u6e38\u620f\u7b7e\u540d\u6863"});d.prepend(f)}}});_.Module.define({path:"common/widget/PostPrefix",requires:[],sub:{initial:function(a){this.$target=a.$target;this.prefix=a.prefix;if(this.prefix.value){this.prefix.value=this.prefix.value.replace("&amp;","&")}this.$target.val(this.prefix.value);this.$target.data("prefix",this.prefix.value);if(this.prefix.need_sug){this.pickPrefix(this.$target,this.prefix.sug_html)}},pickPrefix:function(b,c){var g=$('<a class="pprefix-list"></a>'),h,i=-1;function d(){g.css({width:b.outerWidth()+"px",left:b.offset().left+"px",top:(b.offset().top+b.outerHeight()-1)+"px"}).show()}function a(){i=-1;h.removeClass("pprefix-item-shine");g.hide()}function f(k){var l=b.val(),j,m=b.data("prefix");if(m&&l.indexOf(m)>-1){j=l.replace(m,k)}else{j=k}b.val(j).data("prefix",k);setTimeout(function(){b.trigger("focus")},100)}function e(j,k){if(j=="up"){i-1<0?i=h.length-1:i--}else{if(j=="down"){i+1==h.length?i=0:i++}else{if(j=="mouse"){i=k}}}if(!g.is(":visible")){d();i=0}h.removeClass("pprefix-item-shine").eq(i).addClass("pprefix-item-shine")}g.css({display:"none","box-sizing":"border-box"}).html(c).appendTo("body");h=g.children();b.on("click.showPPrefix",d).on("blur.hidePPrefix",a).on("keydown",function(j){switch(j.keyCode){case 8:d();break;case 40:j.preventDefault();e("down");break;case 38:j.preventDefault();e("up");break;case 13:j.preventDefault();if(i!=-1){f($(".pprefix-item-shine").html());a()}break;case 27:if(g.is(":visible")){j.preventDefault();a()}default:i=-1;a()}});g.on("mousedown.pick",".pprefix-item",function(j){f($(this).html())}).on("mouseover",".pprefix-item",function(j){e("mouse",$(this).index())})}}});_.Module.define({path:"common/widget/RichPoster",requires:["common/widget/PostService","common/widget/WordLimit","common/widget/PostPrefix","common/widget/PostSignature","common/widget/MousePwd","common/widget/PostReward","encourage/widget/PostGuessing"],sub:{initial:function(c){var f=$("#tb_rich_poster_container").hide();this.$container=f;this.$root=$($("#rich_ueditor_tpl").html());this.$window=$(window);this.$editorContainer=this.$root.find(".ueditor_container");this.prefix=c.prefix;f.append(this.$root);this.isFrs=PosterContext.getContext().product==="frs";this.isPb=PosterContext.getContext().product==="pb";this.isQinglang=c.isQinglang;this.QinglangData=c.QinglangData;this.initPostService();if(this.isFrs){this.$title=this.$root.find(".j_title");this.initTitle()}var b=PosterContext.getContext().page;if(this.isPb&&b!=="pb_bright"){this.$root.addClass("compat_rich_poster")}this.initDraft();this.initEditor();this.initAntiSpamming();this.initEvent();this.initPlaceholder();if(PosterContext.getAuthorities().long_editor){this.initFloatingToolbar()}this.initMousePwd();this.initSignature();f.show();if(!PosterContext.isPostAllowed()){if(!($.browser.msie&&$.browser.version==6)){this.editor.ready(function(){this.disable()})}this.showWarning(PosterContext.getPostRejectedMessage());this.toggleSubmitButton(true);if(this.$title){this.$title.tbprop("disabled",true)}}else{if(this.isFrs){var e="";var a=window.PageData.user;if(this.QinglangData&&this.QinglangData.title){e=this.QinglangData.title}else{var d=!!a.mParr_props&&!!a.mParr_props.level&&!!this.isBeMember()?"\u4eb2\u7231\u7684\u4f1a\u5458\uff0c\u8bf7\u8f93\u5165\u60a8\u7684\u6807\u9898":"\u8bf7\u586b\u5199\u6807\u9898";e=d}_.Module.use("common/widget/Placeholder",[this.$title,e,{color:"#bfbfbf"}])}this.editor.ready(function(){this.restoreDraft()})}PageUnit.load("rich_poster_show_music_recommend");this.initPostReward()},initPostService:function(){var a=this;var b="";var c=!!(window.history&&window.history.pushState);this.postService=this.use("common/widget/PostService");this.postService.success(function(){a.editor.setContent("");a.editor.clearDraft();a.showPostSuccess();if(PosterContext.getContext().isBlessForum){a.setBlessCookie()}var d=Math.ceil(Math.random()*10);if(d>8){$.stats.track("pb-list\u6700\u4e0b_F90","PC\u7aef\u5f69\u7968pb\u53d1\u5e16\u8bd5\u9a8c","pb","view",{obj_url:"http://tb1.bdstatic.com/tb/cms/com/icon/F90_icon.gif"});$.tb.Storage.set("pb_show_ad_f90","Y",(new Date().getTime()+(8*1000)))}if(PageData.product==="pb"){if(PageData.pager.total_page===PageData.pager.cur_page){$.stats.sendRequest("fr=tb0_forum&st_mod=pb_post&st_type=pb_post_refresh");setTimeout(function(){b=$.tb.location.getHref().replace($.tb.location.getProtocol()+"//"+$.tb.location.getHost(),"");if(b.indexOf("#")!==-1){b=b.slice(0,b.indexOf("#"))}if(b.search(/pn=(\d+)/)===-1){if(b.search(/\?/)===-1){b=b+"?pn=1"}else{b=b+"&pn=1"}}if(!c){refreshPage("",+b.match(/pn=(\d+)/)[1])}else{refreshPage(b)}},500)}else{$.stats.sendRequest("fr=tb0_forum&st_mod=pb_post&st_type=pb_post_noaction")}}else{setTimeout(function(){a.refresh()},500)}setTimeout(function(){$(".tb_poster_info").remove();a.togglePostState(false);var e=$(window).scrollTop();if(e>0){window.scrollTo(0,1);setTimeout(function(){window.scrollTo(0,0)},0)}},2000)}).complete(function(){a.togglePostState(false)})},initEvent:function(){var b=this;this.$submit=this.$root.find(".j_submit").click(function(d){d.preventDefault();if(!b.$submit.is(".ui_btn_disable")){b.post()}});this.$root.on("keyup",function(d){if(d.ctrlKey&&d.keyCode==13){b.post()}});this.$root.find(".add_vote_btn").click(function(){if(!PosterContext.getContext().user.canVote){var d=PosterContext.getContext().forum.nameEncoded;$.tb.alert({title:"\u53d1\u8d77\u6295\u7968",message:'\u83b7\u5f97<a target="_blank" href="/f/like/level?kw='+d+'">3\u7ea7\u5934\u8854</a>\u624d\u53ef\u53d1\u8d77\u6295\u7968\u54e6~~<br />\u7533\u8bf7\u52a0\u5165\u4f1a\u5458\uff0c\u9a6c\u4e0a\u53d1\u8d77\u6295\u7968\uff01\uff08\u66f4\u591a\u4f1a\u5458\u7279\u6743<a target="_blank" href="/f/like/level?kw= '+d+'">\u70b9\u6b64\u67e5\u770b</a>',buttons:{text:"\u786e\u5b9a"}});return false}});this.$root.find(".j_disable_float").click(function(){b.disableFloatingPoster()});this.observe("insertimage",function(d,e){b.editor.execCommand("insertimage",[e])});this.observe("file_added.attachment",function(){b.togglePostState(true)});this.observe("upload_complete.attachment",function(){b.togglePostState(false)});this.observe("wanna_post",function(){if(PosterContext.getAuthorities().float_editor){b.enableFloatingPoster()}else{$.tb.location.setHash("sub")}b.focus()});var c=this.$root.find(".add_guessing_btn").on("click",function(){if(!b.guessingDialog){b.guessingDialog=b.use("encourage/widget/PostGuessing",{container:$("#tb_rich_poster .editor_content_wrapper")})}else{b.guessingDialog._dialog.show()}$(this).addClass("cur");a.removeClass("cur")});var a=this.$root.find(".add_thread_btn").on("click",function(){b.guessingDialog&&b.guessingDialog._dialog.hide();$(this).addClass("cur");c.removeClass("cur")})},initTitle:function(){this.initTitleWordLimit();this.initTitlePrefix()},initFloatingToolbar:function(){function c(){f.removeClass("poster_floating_toolbar").removeClass("poster_locked_toolbar");g=false}var b=this;var g=false;var e=this.$root.find(".editor_bottom_panel");var f=this.$root.find(".j_floating");this.$window.scroll(function(){if(b.editor.$container.height()>b.$window.height()){var i=b._viewPortOn(b.$root);if(i.isOnScreen){var h=b._viewPortOn(e);if(h.bottomToBottom>=0){if(g){c()}}else{if(i.topToBottom>400){f.addClass("poster_floating_toolbar").removeClass("poster_locked_toolbar");g=true}else{f.addClass("poster_locked_toolbar").removeClass("poster_floating_toolbar");g=true}}}else{if(g){c()}}}else{if(g){c()}}});this.bind("draft_clean",c);this.bind("poster_float",c);if($.tb.Storage.get("close_long_editor_bubble")!="1"){var d={content:"\u5df2\u4e3a\u4f60\u5f00\u542f\u8d85\u957f\u53d1\u8d34\u6846\u529f\u80fd\uff0c\u4e86\u89e3\u66f4\u591a\u6216\u5173\u95ed\u6b64\u529f\u80fd<a href='http://tieba.baidu.com/mo/q/topic_page/219_1' target='_blank'>\u70b9\u51fb\u8fd9\u91cc</a>",arrow_dir:"down",bubble_css:{top:80,left:100,width:179},wrap:this.$root.find(".j_bubble_container"),closeBtn:true};var a=new UiBubbleTipBase(d);a.bind("onclose",function(){$.tb.Storage.set("close_long_editor_bubble","1",(new Date().getTime()+(30*24*3600*1000)));a.closeBubble()});a.showBubble()}},initTitleWordLimit:function(){var b=this;var d=$("#tb_rich_poster");var a={inputObj:this.$title,checkDelay:200,showLimit:10,maxNum:60,isLimitInput:true};var c=this.use("common/widget/WordLimit",a);c.init();c.bind("wlshowing",function(){d.find(".j_surveillance").hide();if(b.$root.hasClass("tb_floating_poster")){c.holder.css("zIndex",10000)}});c.bind("wlhiding",function(){d.find(".j_surveillance").show();c.holder.css("zIndex","auto")})},initTitlePrefix:function(){var a={$target:this.$title,prefix:this.prefix};this.use("common/widget/PostPrefix",a)},initEditor:function(){if(PosterContext.isPostAllowed()){var a={};a.excludePlugins=["medal"];if(PosterContext.getAuthorities().long_editor){a.autoFloatEnabled=true;a.topOffset=this.isFrs?40:0;a.heightLimit=false}if(!PosterContext.getAuthorities().emotion_transform){a.excludePlugins.push("emotion_transform")}this.editor=UE.getEditor("ueditor_replace",a)}else{this.editor=UE.getEditor("ueditor_replace",{toolbar:""})}window.test_editor=this.editor;window.test_poster=this},initDraft:function(){var a=this;var d=this.$root.find(".j_draft");var b=d.children(".j_content");var c=d.children(".j_clear");this.$root.on("saved.draft",function(){b.text("\u4f60\u6b63\u5728\u8f93\u5165\u7684\u5185\u5bb9\u5df2\u81ea\u52a8\u4fdd\u5b58, "+$.dateFormat(new Date(),"HH:mm:ss"));d.show()});this.$root.on("restored.draft",function(){b.text("\u4f60\u4e0a\u6b21\u672a\u53d1\u8868\u7684\u5185\u5bb9\u5df2\u81ea\u52a8\u6062\u590d");d.show()});c.on("click",function(){a.editor.clearDraft();a.editor.setContent("");d.hide();a.trigger("draft_clean")})},initPlaceholder:function(){var b=this;this.$placeholder=$('<div class="tb_poster_placeholder"></div>');this.$placeholder.click(function(c){if(!$(c.target).is("a")){b.$placeholder.hide();b.editor.focus()}});this.editor.ready(function(){b.$placeholder.prependTo(b.$root.find(".edui-container"));b.editor.addListener("focus",function(){b.$placeholder.hide()});b.editor.addListener("blur",function(){b._showPlaceHolder()});b._showPlaceHolder()});this.$root.on("restored.draft",function(){b.$placeholder.hide()});if(this.QinglangData&&this.QinglangData.content&&PageData.is_login){this.$placeholder.css({left:15,top:55});var a='<p style="width:565px;line-height:25px;">'+this.QinglangData.content+"</p>";this.$placeholder.html(a)}else{this.$placeholder.html(PageUnit.load("rich_poster_placeholder"))}this.$placeholder.find("a").on("click",function(){var c="";if(PageData.product=="frs"){c="frs"}else{if(PageData.product=="pb"){c="pb"}}$.stats.track("\u53d1\u8868\u56de\u590d\u6846PlaceHolder","\u8d34\u5427PC\u9875\u9762\u4f18\u5316",c,"click")});if(PosterContext.getContext().user.isLogin&&PosterContext.getContext().forum.name=="\u8d34\u5427\u610f\u89c1\u53cd\u9988"){this.$placeholder.addClass("tb_poster_plain_placeholder").html(PageUnit.load("rich_poster_feedback"))}},_showPlaceHolder:function(){var a=this.editor.getContent();if(a.length==0){this.$placeholder.show()}},initMousePwd:function(){this.MousePwd=this.use("common/widget/MousePwd");this.MousePwd.start(["editor_content_wrapper"])},initSignature:function(){var a=this;var b=this.$root.find(".j_poster_signature");b.hide();if(PosterContext.getContext().user.isLogin){this.$root.find("#ueditor_replace").one("click",function(){var c=a.use("common/widget/PostSignature",{$container:b,gameSignature:PosterContext.getContext().user.gameSignature});c.init();b.show()})}},initAntiSpamming:function(){var b=$.cookie("GET_TOPIC");if(PosterContext.getContext().user.isLogin){if(!(b&&b==PosterContext.getContext().user.id)){$("body").append('<div id="anttongji" style="display:none"></div>');var a=$(document.createElement("script"));var c="http://tongji.tieba.baidu.com/common/js/gettopic.js";a.tbattr({src:c,type:"text/javascript"});$("body").append(a);$.cookie("GET_TOPIC",PosterContext.getContext().user.id,{expires:0.5,path:"/"})}}},isBeMember:function(){var a=window.PageData.user;if(a.mParr_props&&a.mParr_props.level&&parseInt(a.mParr_props.level.props_id,10)>0&&a.mParr_props.level.end_time*1000>Env.server_time){return true}},showPostSuccess:function(){var b="";var c="";var d="";var a=window.PageData.user;if(a.mParr_props&&a.mParr_props.level&&!!this.isBeMember()){var e=a.mParr_props.level.props_id;c=['<div class="pre_icon_wrap pre_icon_wrap_theme2">','<span class="icon_tbworld tbworld_lv'+e+'" title="\u9ad8\u7ea7\u8d34\u5427\u4f1a\u5458"></span>',"</div>"].join("");d="\u5c0a\u656c\u7684\u4f1a\u5458\uff0c"}if(window.repeat_has_score&&window.repeat_has_score==true){b='<p class="acquire_score_tip">'+d+'\u53d1\u8d34\u6210\u529f\uff0c\u83b7\u53d6\u8c46\u7968<span style="color:#CF2525; font-size:16px; font-weight: bold;">+1</span></p>'}$('<div class="tb_poster_info poster_success"><div>'+c+"<strong>\u53d1\u8868\u6210\u529f\uff01</strong></div>"+b+"</div>").appendTo(this.$editorContainer)},showWarning:function(a){if(this.$warning==undefined){this.$warning=$('<div class="tb_poster_info poster_warning"></div>').appendTo(this.$editorContainer)}this.$warning.html(a)},getTitle:function(){return this.$title?this.$title.val():""},getContent:function(){return this.editor.getContent()},getGameUser:function(){var a=PosterContext.getContext().user.gameSignature;return a&&!$.isEmptyObject(a.signature_info)},getPostType:function(){var a=this.isFrs?"thread":"reply";if(this.editor.getExtendContent().hasLocalVideo){a=(a=="thread")?"vpostThread":"vpostReply"}return a},getPostData:function(){var d=this.editor.getExtendContent();var a={content:this.getContent()};if(this.isFrs){var f=this.getTitle();var e=this.$title.data("prefix");if(f.indexOf(e)==-1){e=""}f=f.replace(/\u2006/g,"");f=f.replace(e,"");a.title=f;a.prefix=e;var i=this.$root.find("#rewards_check");if(i.length&&i.tbattr("checked")=="checked"){var g=this.PostReward.getPosterData();$.extend(a,g)}}if(d.videoNumber>0){a.video_url=d.videoUrl;if(d.hasLocalVideo){a.file_id=d.fileId}}if(d.ptype){a.ptype=d.ptype}if(d.attachments){a.files=d.attachments}var b=this.$root.find(".j_sign_id");var c=this.$root.find(".j_use_signature");if(c.tbattr("checked")&&b.size()>0&&b.val()){a.sign_id=b.val()}a.game_user=this.getGameUser();a.mouse_pwd=this.MousePwd.report()["c"];a.mouse_pwd_t=this.MousePwd.time;a.mouse_pwd_isclick=this.MousePwd.MOUSEPWD_CLICK;if(this.isPb&&PosterContext.getContext().thread&&PosterContext.getContext().thread.thread_type==22){var h={rewards:1};$.extend(a,h)}return a},togglePostState:function(b){var a=this.$root.find(".j_posting_status");a.toggleClass("poster_posting_status_loading",b);this.toggleSubmitButton(b)},toggleSubmitButton:function(a){this.$submit.toggleClass("ui_btn ui_btn_m",!a);this.$submit.toggleClass("ui_btn_disable ui_btn_m_disable",a)},validateContent:function(){var d=this.isFrs?30000:10000;var c=this.editor.getContentByteLength();var b=this.editor.getExtendContent();var g=this.$root.find(".ueditor_container .j_error");if(this.isFrs){var f=$.trim(this.getTitle());var e=this.$title.data("prefix");if(f.length===0){this.$root.find(".title_container .j_error").text("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a").show();this.$title.focus();this.$window.scrollTop(this.$title.offset().top-60);return false}else{if(f.replace(e,"").length===0){this.$root.find(".title_container .j_error").text("\u53ea\u6709\u524d\u7f00\u662f\u4e0d\u884c\u7684\u54df~\u8bf7\u5728\u524d\u7f00\u540e\u586b\u5199\u6b63\u5f0f\u6807\u9898\uff01").show();this.$title.focus();this.$window.scrollTop(this.$title.offset().top-60);return false}}}if(c===0&&!this.isFrs){g.text("\u56de\u590d\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a").show();return false}if(c>d){var a="\u62b1\u6b49\uff0c\u60a8\u7684\u8d34\u5b50\u8d85\u8fc7"+d/2+"\u5b57\uff0c\u5efa\u8bae\u60a8\u7cbe\u7b80\u6216\u5206\u6bb5\u540e\u518d\u63d0\u4ea4";g.text(a).show();return false}if(b.videoNumber>1){var a="\u62b1\u6b49\uff0c\u6bcf\u5c42\u697c\u63d2\u5165\u7684\u89c6\u9891\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc71\u4e2a\uff0c\u8bf7\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4";g.text(a).show();return false}if(b.musicNumber>10){var a="\u62b1\u6b49\uff0c\u6bcf\u5c42\u697c\u63d2\u5165\u7684\u97f3\u4e50\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc710\u4e2a\uff0c\u8bf7\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4";g.text(a).show();return false}this.$root.find(".j_error").hide();return true},post:function(c){var b=this.getPostData();var a=this.validateContent();if(typeof(postObj)=="object"&&typeof(c)=="object"){$.extend(b,c)}if(!this.postService.isPosting()&&a){$.cookie("GET_TOPIC","-",{expires:-1,path:"/"});this.postService.post(this.getPostType(),b,PosterContext.getContext());this.togglePostState(true)}},refresh:function(){var a=$.tb.location.getHref();a=a.replace(/#\w*$/,"");$.tb.location.reload()},focus:function(){if(this.isFrs){this.$title.focus()}else{if(!($.browser.msie&&$.browser.version<=7)){this.editor.focus()}}},enableFloatingPoster:function(){var b=this;if(this.$root.hasClass("tb_floating_poster")){return}this.editor.enableHeightLimit(this.$window.height()-450);this.trigger("poster_float");this.$root.hide().addClass("tb_floating_poster");if(this.position){this.$root.css(this.position)}this.$root.fadeIn(function(){b.$root.draggable({handle:b.$root.find(".poster_head"),start:function(){b.$root.css({right:"auto",bottom:"auto"})}})});if($.tb.Storage.get("close_float_draggable_bubble")!="1"){var c={content:"\u6d6e\u52a8\u53d1\u8d34\u6846\u53ef\u4ee5<span class='ui_text_emphasize'>\u62d6\u62fd</span>\u4e86\uff0c\u8d76\u5feb\u62d6\u52a8\u6807\u9898\u8bd5\u8bd5\uff01\u66f4\u591a\u8be6\u60c5<a href='http://tieba.baidu.com/mo/q/topic_page/219_1' target='_blank'>\u70b9\u51fb\u8fd9\u91cc</a>",arrow_dir:"down",bubble_css:{top:0,left:10,width:179},wrap:this.$root.find(".j_bubble_container"),closeBtn:true};var a=new UiBubbleTipBase(c);a.bind("onclose",function(){$.tb.Storage.set("close_float_draggable_bubble","1",(new Date().getTime()+(30*24*3600*1000)));a.closeBubble()});a.showBubble()}},disableFloatingPoster:function(){var a=this;a.$root.fadeOut(function(){a.position={left:a.$root.css("left"),top:a.$root.css("top")};a.$root.draggable("destroy").css({left:"auto",top:"auto"});a.$root.removeClass("tb_floating_poster").show();if(PosterContext.getAuthorities().long_editor){a.editor.disableHeightLimit()}else{a.editor.enableHeightLimit()}})},_viewPortOn:function(b){var e=this.$window.scrollTop();var d=e+this.$window.height();var a=b.offset().top;var c=a+b.height();return{isOnScreen:a<d&&e<c,topToBottom:d-a,bottomToTop:c-e,topToTop:a-e,bottomToBottom:d-c}},setBlessCookie:function(){var b=PosterContext.getContext().forum.id;var a=$.cookie("bless_post_"+b);if(a==null){$.cookie("bless_post_"+b,1,1)}},initPostReward:function(){var c=this;var b=PosterContext.getContext().user;var a=PosterContext.getContext().thread;if(this.isFrs){this.PostReward=this.use("common/widget/PostReward")}else{if(this.isPb&&a&&a.thread_type==22){this.observe("rewardsSuccess",function(){c.editor.setContent("");c.editor.clearDraft()})}}}}});window.__discarding&&__discarding("common/component/music_player");var T,baidu=T=baidu||{version:"1.5.0"};baidu.guid="$BAIDU$";window[baidu.guid]=window[baidu.guid]||{};baidu.fn=baidu.fn||{};baidu.fn.blank=function(){};baidu.string=baidu.string||{};baidu.string.format=function(c,a){c=String(c);var b=Array.prototype.slice.call(arguments,1),d=Object.prototype.toString;if(b.length){b=b.length==1?(a!==null&&(/\[object Array\]|\[object Object\]/.test(d.call(a)))?a:b):b;return c.replace(/#\{(.+?)\}/g,function(f,h){var g=b[h];if("[object Function]"==d.call(g)){g=g(h)}return("undefined"==typeof g?"":g)})}return c};baidu.format=baidu.string.format;baidu.object=baidu.object||{};baidu.object.each=function(f,c){var b,a,d;if("function"==typeof c){for(a in f){if(f.hasOwnProperty(a)){d=f[a];b=c.call(f,d,a);if(b===false){break}}}}return f};baidu.extend=baidu.object.extend=function(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c};baidu.number=baidu.number||{};baidu.number.pad=function(d,c){var f="",b=(d<0),a=String(Math.abs(d));if(a.length<c){f=(new Array(c-a.length+1)).join("0")}return(b?"-":"")+f+a};baidu.platform=baidu.platform||{};baidu.platform.isAndroid=/android/i.test(navigator.userAgent);baidu.platform.isIpad=/ipad/i.test(navigator.userAgent);baidu.platform.isIphone=/iphone/i.test(navigator.userAgent);baidu.swf=baidu.swf||{};baidu.browser=baidu.browser||{};baidu.browser.ie=baidu.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["\x241"]):undefined;baidu.array=baidu.array||{};baidu.array.remove=function(c,b){var a=c.length;while(a--){if(a in c&&c[a]===b){c.splice(a,1)}}return c};baidu.lang=baidu.lang||{};baidu.lang.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)};baidu.lang.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)};baidu.lang.toArray=function(b){if(b===null||b===undefined){return[]}if(baidu.lang.isArray(b)){return b}if(typeof b.length!=="number"||typeof b==="string"||baidu.lang.isFunction(b)){return[b]}if(b.item){var a=b.length,c=new Array(a);while(a--){c[a]=b[a]}return c}return[].slice.call(b)};baidu.swf.getMovie=function(c){var a=document[c],b;return baidu.browser.ie==9?a&&a.length?(b=baidu.array.remove(baidu.lang.toArray(a),function(d){return d.tagName.toLowerCase()!="embed"})).length==1?b[0]:b:a:a||window[c]};baidu.swf.version=(function(){var h=navigator;if(h.plugins&&h.mimeTypes.length){var d=h.plugins["Shockwave Flash"];if(d&&d.description){return d.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}}else{if(window.ActiveXObject&&!window.opera){for(var b=12;b>=2;b--){try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b);if(g){var a=g.GetVariable("$version");return a.replace(/WIN/g,"").replace(/,/g,".")}}catch(f){}}}}})();baidu.string.encodeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};baidu.encodeHTML=baidu.string.encodeHTML;baidu.swf.createHTML=function(t){t=t||{};var l=baidu.swf.version,h=t.ver||"6.0.0",g,d,f,c,j,s,a={},p=baidu.string.encodeHTML;for(c in t){a[c]=t[c]}t=a;if(l){l=l.split(".");h=h.split(".");for(f=0;f<3;f++){g=parseInt(l[f],10);d=parseInt(h[f],10);if(d<g){break}else{if(d>g){return""}}}}else{return""}var n=t.vars,m=["classid","codebase","id","width","height","align"];t.align=t.align||"middle";t.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";t.codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0";t.movie=t.url||"";delete t.vars;delete t.url;if("string"==typeof n){t.flashvars=n}else{var q=[];for(c in n){s=n[c];q.push(c+"="+encodeURIComponent(s))}t.flashvars=q.join("&")}var o=["<object "];for(f=0,j=m.length;f<j;f++){s=m[f];o.push(" ",s,'="',p(t[s]),'"')}o.push(">");var b={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(c in t){s=t[c];c=c.toLowerCase();if(b[c]&&(s||s===false||s===0)){o.push('<param name="'+c+'" value="'+p(s)+'" />')}}t.src=t.movie;t.name=t.id;delete t.id;delete t.movie;delete t.classid;delete t.codebase;t.type="application/x-shockwave-flash";t.pluginspage="http://www.macromedia.com/go/getflashplayer";o.push("<embed");var r;for(c in t){s=t[c];if(s||s===false||s===0){if((new RegExp("^salign\x24","i")).test(c)){r=s;continue}o.push(" ",c,'="',p(s),'"')}}if(r){o.push(' salign="',p(r),'"')}o.push("></embed></object>");return o.join("")};baidu.swf.create=function(a,c){a=a||{};var b=baidu.swf.createHTML(a)||a.errorMessage||"";if(c&&"string"==typeof c){c=document.getElementById(c)}if(c){c.innerHTML=b}else{document.write(b)}};(function(){var a=window[baidu.guid];baidu.lang.guid=function(){return"TANGRAM__"+(a._counter++).toString(36)};a._counter=a._counter||1})();window[baidu.guid]._instances=window[baidu.guid]._instances||{};baidu.lang.Class=function(a){this.guid=a||baidu.lang.guid();window[baidu.guid]._instances[this.guid]=this};window[baidu.guid]._instances=window[baidu.guid]._instances||{};baidu.lang.Class.prototype.dispose=function(){delete window[baidu.guid]._instances[this.guid];for(var a in this){if(!baidu.lang.isFunction(this[a])){delete this[a]}}this.disposed=true};baidu.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};baidu.lang.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)};baidu.isString=baidu.lang.isString;baidu.lang.Event=function(a,b){this.type=a;this.returnValue=true;this.target=b||null;this.currentTarget=null};baidu.lang.Class.prototype.addEventListener=function(d,c,b){if(!baidu.lang.isFunction(c)){return}!this.__listeners&&(this.__listeners={});var a=this.__listeners,f;if(typeof b=="string"&&b){if(/[^\w\-]/.test(b)){throw ("nonstandard key:"+b)}else{c.hashCode=b;f=b}}d.indexOf("on")!=0&&(d="on"+d);typeof a[d]!="object"&&(a[d]={});f=f||baidu.lang.guid();c.hashCode=f;a[d][f]=c};baidu.lang.Class.prototype.removeEventListener=function(d,c){if(typeof c!="undefined"){if((baidu.lang.isFunction(c)&&!(c=c.hashCode))||(!baidu.lang.isString(c))){return}}!this.__listeners&&(this.__listeners={});d.indexOf("on")!=0&&(d="on"+d);var b=this.__listeners;if(!b[d]){return}if(typeof c!="undefined"){b[d][c]&&delete b[d][c]}else{for(var a in b[d]){delete b[d][a]}}};baidu.lang.Class.prototype.dispatchEvent=function(d,a){if(baidu.lang.isString(d)){d=new baidu.lang.Event(d)}!this.__listeners&&(this.__listeners={});a=a||{};for(var c in a){d[c]=a[c]}var c,b=this.__listeners,f=d.type;d.target=d.target||this;d.currentTarget=this;f.indexOf("on")!=0&&(f="on"+f);baidu.lang.isFunction(this[f])&&this[f].apply(this,arguments);if(typeof b[f]=="object"){for(c in b[f]){b[f][c].apply(this,arguments)}}return d.returnValue};baidu.lang.createClass=function(g,b){b=b||{};var f=b.superClass||baidu.lang.Class;var d=function(){if(f!=baidu.lang.Class){f.apply(this,arguments)}else{f.call(this)}g.apply(this,arguments)};d.options=b.options||{};var j=function(){},h=g.prototype;j.prototype=f.prototype;var a=d.prototype=new j();for(var c in h){a[c]=h[c]}typeof b.className=="string"&&(a._className=b.className);a.constructor=h.constructor;d.extend=function(l){for(var k in l){d.prototype[k]=l[k]}return d};return d};baidu.lang.inherits=function(h,f,d){var c,g,a=h.prototype,b=new Function();b.prototype=f.prototype;g=h.prototype=new b();for(c in a){g[c]=a[c]}h.prototype.constructor=h;h.superClass=f.prototype;if("string"==typeof d){g._className=d}};baidu.inherits=baidu.lang.inherits;baidu.lang.isBoolean=function(a){return typeof a==="boolean"};baidu.lang.isElement=function(a){return !!(a&&a.nodeName&&a.nodeType==1)};baidu.lang.isNumber=function(a){return"[object Number]"==Object.prototype.toString.call(a)&&isFinite(a)};baidu.lang.isObject=function(a){return"function"==typeof a||!!(a&&"object"==typeof a)};baidu.isObject=baidu.lang.isObject;baidu.fn.bind=function(b,a){var c=arguments.length>2?[].slice.call(arguments,2):null;return function(){var f=baidu.lang.isString(b)?a[b]:b,d=(c)?c.concat([].slice.call(arguments,0)):arguments;return f.apply(a||f,d)}};baidu.each=baidu.array.forEach=baidu.array.each=function(h,f,b){var d,g,c,a=h.length;if("function"==typeof f){for(c=0;c<a;c++){g=h[c];d=f.call(b||h,g,c);if(d===false){break}}}return h};baidu.array.some=function(f,d,b){var c=0,a=f.length;for(;c<a;c++){if(c in f&&d.call(b||f,f[c],c)){return true}}return false};baidu.browser.chrome=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp["\x241"]:undefined;baidu.browser.firefox=/firefox\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp["\x241"]:undefined;baidu.browser.isWebkit=/webkit/i.test(navigator.userAgent);try{if(/(\d+\.\d+)/.test(external.max_version)){baidu.browser.maxthon=+RegExp["\x241"]}}catch(e){}(function(){var a=navigator.userAgent;baidu.browser.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)?+(RegExp["\x241"]||RegExp["\x242"]):undefined})();baidu.dom=baidu.dom||{};baidu.dom.g=function(a){if("string"==typeof a||a instanceof String){return document.getElementById(a)}else{if(a&&a.nodeName&&(a.nodeType==1||a.nodeType==9)){return a}}return null};baidu.g=baidu.G=baidu.dom.g;baidu.dom._styleFixer=baidu.dom._styleFixer||{};baidu.dom._styleFilter=baidu.dom._styleFilter||[];baidu.dom._styleFilter.filter=function(b,f,g){for(var a=0,d=baidu.dom._styleFilter,c;c=d[a];a++){if(c=c[g]){f=c(b,f)}}return f};baidu.string.toCamelCase=function(a){if(a.indexOf("-")<0&&a.indexOf("_")<0){return a}return a.replace(/[-_][^-_]/g,function(b){return b.charAt(1).toUpperCase()})};baidu.dom.setStyle=function(c,b,d){var f=baidu.dom,a;c=f.g(c);b=baidu.string.toCamelCase(b);if(a=f._styleFilter){d=a.filter(b,d,"set")}a=f._styleFixer[b];(a&&a.set)?a.set(c,d):(c.style[a||b]=d);return c};baidu.setStyle=baidu.dom.setStyle;baidu.dom.setStyles=function(b,c){b=baidu.dom.g(b);for(var a in c){baidu.dom.setStyle(b,a,c[a])}return b};baidu.setStyles=baidu.dom.setStyles;baidu.dom._NAME_ATTRS=(function(){var a={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(baidu.browser.ie<8){a["for"]="htmlFor";a["class"]="className"}else{a.htmlFor="for";a.className="class"}return a})();baidu.dom.setAttr=function(b,a,c){b=baidu.dom.g(b);if("style"==a){b.style.cssText=c}else{a=baidu.dom._NAME_ATTRS[a]||a;b.setAttribute(a,c)}return b};baidu.setAttr=baidu.dom.setAttr;baidu.dom.setAttrs=function(c,a){c=baidu.dom.g(c);for(var b in a){baidu.dom.setAttr(c,b,a[b])}return c};baidu.setAttrs=baidu.dom.setAttrs;baidu.dom.create=function(c,a){var d=document.createElement(c),b=a||{};return baidu.dom.setAttrs(d,b)};baidu.cookie=baidu.cookie||{};baidu.cookie._isValidKey=function(a){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+\x24')).test(a)};baidu.cookie.getRaw=function(b){if(baidu.cookie._isValidKey(b)){var c=new RegExp("(^| )"+b+"=([^;]*)(;|\x24)"),a=c.exec(document.cookie);if(a){return a[2]||null}}return null};baidu.cookie.get=function(a){var b=baidu.cookie.getRaw(a);if("string"==typeof b){b=decodeURIComponent(b);return b}return null};baidu.cookie.setRaw=function(c,d,b){if(!baidu.cookie._isValidKey(c)){return}b=b||{};var a=b.expires;if("number"==typeof b.expires){a=new Date();a.setTime(a.getTime()+b.expires)}document.cookie=c+"="+d+(b.path?"; path="+b.path:"")+(a?"; expires="+a.toGMTString():"")+(b.domain?"; domain="+b.domain:"")+(b.secure?"; secure":"")};baidu.cookie.remove=function(b,a){a=a||{};a.expires=new Date(0);baidu.cookie.setRaw(b,"",a)};baidu.cookie.set=function(b,c,a){baidu.cookie.setRaw(b,encodeURIComponent(c),a)};baidu.sio=baidu.sio||{};baidu.sio._createScriptTag=function(b,a,c){b.setAttribute("type","text/javascript");c&&b.setAttribute("charset",c);b.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(b)};baidu.sio._removeScriptTag=function(b){if(b.clearAttributes){b.clearAttributes()}else{for(var a in b){if(b.hasOwnProperty(a)){delete b[a]}}}if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null};baidu.sio.callByServer=function(a,n,o){var j=document.createElement("SCRIPT"),i="bd__cbs__",l,f,p=o||{},d=p.charset,g=p.queryField||"callback",m=p.timeOut||0,b,c=new RegExp("(\\?|&)"+g+"=([^&]*)"),h;if(baidu.lang.isFunction(n)){l=i+Math.floor(Math.random()*2147483648).toString(36);window[l]=k(0)}else{if(baidu.lang.isString(n)){l=n}else{if(h=c.exec(a)){l=h[2]}}}if(m){b=setTimeout(k(1),m)}a=a.replace(c,"\x241"+g+"="+l);if(a.search(c)<0){a+=(a.indexOf("?")<0?"?":"&")+g+"="+l}baidu.sio._createScriptTag(j,a,d);function k(q){return function(){try{if(q){p.onfailure&&p.onfailure()}else{n.apply(window,arguments);clearTimeout(b)}window[l]=null;delete window[l]}catch(r){}finally{baidu.sio._removeScriptTag(j)}}}};var mbox=mbox||{};T.extend(mbox,{namespace:function(){var b=arguments,h=null,f,c,g;for(f=0,len=b.length;f<len;f++){g=(""+b[f]).split(".");h=mbox;for(c=(g[0]=="mbox")?1:0;c<g.length;c=c+1){h[g[c]]=h[g[c]]||{};h=h[g[c]]}}return h},Fuze:function(){var a,c,b;a=[];c=function(d){if(b){d()}else{a.push(d)}};c.fire=function(){while(a.length){a.shift()()}b=true};c.extinguish=function(){b=false};c.wettish=function(){this.fire();this.extinguish()};c.clear=function(){while(a.length){a.shift()}this.extinguish()};return c},convertTime:function(b){var c,a;b=Math.round(b/1000);c=Math.floor(b/60);a=b%60;return T.number.pad(c,2)+":"+T.number.pad(a,2)},Timer:(function(b,c){var a=function(f,d){this._timer=function(){};this._listener=function(){};this._timerComplete=function(){};this._timerID=null;this._delay=this._remain=f;this._repeatCount=d||0;this._currentCount=0;this._isRunning=false;this._startTime=this._endTime=0;this.EVENTS={TIMER:"timer",COMPLETE:"timerComplete"}};a.prototype={_createTimer:function(f,d){var g=this;if(d==1){return function(){return b.setTimeout(function(){g.reset();g._listener(g._delay,d);g._timerComplete()},f)}}else{return function(){return b.setInterval(function(){if(d!=0&&g._currentCount>=d){g.reset();g._timerComplete()}else{g._currentCount++;g._listener(f,g._currentCount)}},f)}}},addEventListener:function(d,f){if(d=="timer"){this._listener=f;this._timer=this._createTimer(this._delay,this._repeatCount)}else{if(d=="timerComplete"){this._timerComplete=f}}},reset:function(){this.stop();if(this._repeatCount==1){this._timer=this._createTimer(this._delay,this._repeatCount)}this._currentCount=0;this._remain=this._delay;this._startTime=this._endTime=0},start:function(){if(!this._timerID){this._timerID=this._timer();if(this._repeatCount==1){this._startTime=new Date().getTime()}this._isRunning=true}},stop:function(){if(this._timerID){if(this._repeatCount==1){b.clearTimeout(this._timerID)}else{b.clearInterval(this._timerID)}this._timerID=null;this._isRunning=false}},pause:function(){if(this._repeatCount==1){if(this._timerID){this.stop();this._endTime=new Date().getTime();this._remain=this._remain-(this._endTime-this._startTime);if(this._remain>0){this._timer=this._createTimer(this._remain,1)}else{this.reset()}}}else{this.stop()}},getCurrentCount:function(){return this._currentCount},isRunning:function(){return this._isRunning}};return a})(window),StopWatch:(function(c,d){var b=0;var a=function(){this.startTime=0;this.isRunning=false;this.isReset=true;this.passedTime=0;b++};a.prototype={reset:function(){this.startTime=0;this.pauseTime=0;this.passedTime=0;this.isRunning=false;this.isReset=true},start:function(){if(this.isReset){this.reset();this.startTime=new Date().getTime()}else{if(!this.isRunning){this.startTime=new Date().getTime()}}this.isRunning=true;this.isReset=false},pause:function(){if(!this.isReset&&this.isRunning){this.pauseTime=new Date().getTime();this.passedTime+=this.pauseTime-this.startTime;this.isRunning=false}},isRunning:function(){return this.isRunning},isReset:function(){return this.isReset},getTime:function(){if(this.isReset){return 0}else{if(this.isRunning){return new Date().getTime()-this.startTime+this.passedTime}else{return this.passedTime}}},getCounts:function(){return b}};return a})(window)});mbox.namespace("mbox.lang");T.extend(mbox.lang,{createClass:function(c,a){var b=T.lang.createClass(c,a);b.prototype.removeEventListener=function(i,h){if(typeof h!="undefined"){if(baidu.lang.isFunction(h)&&!(h=h.hashCode)||!baidu.lang.isString(h)){return}}!this.__listeners&&(this.__listeners={});var d=i.split(".");if(i.length>1){i=d[0];h=d[1]}i.indexOf("on")!=0&&(i="on"+i);var g=this.__listeners;if(!g[i]){return}if(typeof h!="undefined"){g[i][h]&&delete g[i][h]}else{for(var f in g[i]){delete g[i][f]}}};b.extend=function(f){for(var d in f){b.prototype[d]=(function(h,g){if(T.lang.isFunction(h)){return function(){this.dispatchEvent(g,{name:g,arguments:arguments});var i=h.apply(this,arguments);return i}}else{return h}})(f[d],d)}return b};return b}});var mbox=mbox||{};(function(){var a="mbox";mbox.CONF={instanceCallName:a,autoPlay:false,autoNext:false,engineArg:{audio:{constructorName:"PlayEngine_Audio"},fmp:{constructorName:"PlayEngine_FMP_MP3",args:{swfPath:"http://play.baidu.com/player/static/flash/fmp.swf",instanceName:a+".player"}}},logOpt:{ref:"pc_widget_tieba"},songLinkHost:{link:"http://tingapi.ting.baidu.com/v1/restserver/ting?method=baidu.ting.song.play&format=jsonp&bit=128&songid=",lrc:"http://tingapi.ting.baidu.com/v1/restserver/ting?method=baidu.ting.song.lry&fromat=jsonp&songid=",sug:"http://tingapi.ting.baidu.com/v1/restserver/ting?method=baidu.ting.search.common&page_size=1&page_no=1&query="}}})(undefined);var PlayEngine_Interface=mbox.lang.createClass((function(d,f){var b=0;var a={mute:false,volume:50};var c=function(g){this.STATES={INIT:"init",READY:"ready",STOP:"stop",PLAY:"play",PAUSE:"pause",END:"end",BUFFERING:"buffering",PREBUFFER:"pre-buffer",ERROR:"error"};this.EVENTS={STATECHANGE:"player_playStateChange",POSITIONCHANGE:"player_positionChange",PROGRESS:"player_progress",ERROR:"player_error",INIT:"player_initSuccess",INITFAIL:"player_initFail"};g=g||{};this.mute=typeof g.mute=="undefined"?a.mute:!!g.mute;this.volume=typeof g.volume=="undefined"?a.volume:g.volume;this.ready=false;this.url="";this.state=this.STATES.INIT;this.engineType="";this.stateStack=[this.STATES.INIT];this.supportMimeType=[]};c.prototype={newId:function(){return"_m3_"+b++},init:function(){},reset:function(){},setUrl:function(g){},getUrl:function(){return this.url},play:function(){},pause:function(){},stop:function(){},setMute:function(g){},getMute:function(){return this.mute},setVolume:function(g){},getVolume:function(){return this.volume},getState:function(){return""},setCurrentPosition:function(g){},getCurrentPosition:function(){return 0},getLoadedPercent:function(){return 0},getLoadedBytes:function(){return 0},getTotalBytes:function(){return 0},getTotalTime:function(){return 0},getVersion:function(){return""},getEngineType:function(){return this.engineType},canPlayType:function(h){var g=this.getSupportMimeTypeList();return T.array.some(g,function(j,i){return h==j})},getSupportMimeTypeList:function(){return this.supportMimeType},setEventListener:function(g,i,h){var j=T.fn.bind(function(){return i.apply(this,arguments)},this);this.addEventListener(g,j,h)}};return c})(window),{superClass:T.lang.Class,className:"PlayEngine_Interface"});var PlayEngine_Audio=mbox.lang.createClass(function(a){a=a||{};this.engineType="audio";this.contentType={mp3:["audio/mpeg","audio/mp3"],mp4:["audio/mp4","audio/MP4A-LATM","video/mpeg4","audio/mpeg4-generic"],m4a:["audio/mp4","audio/MP4A-LATM","video/mpeg4","audio/mpeg4-generic"],aac:["audio/aac","audio/aacp"],"3gp":["audio/3gpp","audio/3gpp2"],ogg:["audio/ogg","video/ogg","application/ogg","audio/vorbis"],oga:["audio/ogg","application/ogg","audio/vorbis"],wma:["audio/x-ms-wma"]};this.supportAudio=typeof Audio!="undefined";this.supportMimeType=[];if(this.supportAudio){this.audio=new Audio();if(typeof this.audio.canPlayType=="function"){T.object.each(this.contentType,T.fn.bind(function(c,d){for(var b=0;b<c.length;b++){var f=this.audio.canPlayType(c[b]);if(f=="probably"||f=="maybe"){this.supportMimeType.push(d);break}}},this))}if(!this.supportMimeType.length){this.supportAudio=false}}this.supportVolume=T.fn.bind(function(){if(this.supportAudio){this.audio.volume=0.5;return(this.audio.volume<1)}return false},this)()},{superClass:PlayEngine_Interface,className:"PlayEngine_Audio"}).extend({test:function(a){a=!!a;if(!this.supportAudio&&a){this.dispatchEvent(this.EVENTS.INITFAIL,{engineType:this.engineType})}return this.supportAudio},init:function(a){this.lastState=this.STATES.INIT;this.muted=this.audio.muted=false;this.volume=50;this.audio.volume=0.5;this.url="";this._definedEvents();this.state=this.STATES.READY;this.dispatchEvent(this.EVENTS.INIT,{engineType:this.engineType,engine:this.audio})},reset:function(){if(!this.supportAudio){return}this.url="";this.audio.pause();this.state="ready";this.lastState="ready"},setUrl:function(a){if(!this.supportAudio){return}this.url=a;this.audio.src=a;this.audio.load();this._firePlayStateChange(this.STATES.PREBUFFER)},play:function(){if(!this.supportAudio){return}if(this.state!="ready"){if(T.platform.isAndroid&&T.browser.isWebkit&&this.audio.readyState<3){var a=T.fn.bind(function(){this.audio.play();this.audio.removeEventListener("canplay",a,false)},this);this.audio.addEventListener("canplay",a,false)}else{this.audio.play()}}},pause:function(){if(!this.supportAudio){return}if(this.state!=this.STATES.STOP&&this.state!=this.STATES.READY&&this.state!=this.STATES.END){this.audio.pause();this._firePlayStateChange(this.STATES.PAUSE)}},stop:function(){if(!this.supportAudio){return}if(this.state!=this.STATES.READY){if(this.audio.currentTime!=0){this.audio.currentTime=0}this.audio.pause();this._firePlayStateChange(this.STATES.STOP)}},setMute:function(a){if(!this.supportAudio){return}this.audio.muted=this.mute=a},setVolume:function(a){if(!this.supportAudio){return}a=T.lang.isNumber(a)?a:50;a=Math.max(Math.min(a,100),0);this.volume=a;this.audio.volume=a/100},setCurrentPosition:function(b){if(!this.supportAudio){return}if(T.platform.isAndroid&&this.audio.readyState<3){var a=T.fn.bind(function(){this.audio.currentTime=b/1000;this.audio.play();this.audio.removeEventListener("canplay",a,false)},this);this.audio.addEventListener("canplay",a,false)}else{this.audio.currentTime=b/1000;this.audio.play()}},getCurrentPosition:function(){if(!this.supportAudio){return 0}return Math.round(this.audio.currentTime*1000)},getLoadedPercent:function(){try{var a=this.audio.buffered.end(0),b=this.audio.duration;b=isNaN(b)?0:b;return Math.round(a/b*100)/100}catch(c){return 0}},getTotalTime:function(){if(!this.supportAudio){return 0}var a=this.audio.duration;a=isNaN(a)?0:a;return Math.round(a*1000)},getState:function(){return this.state},_firePlayStateChange:function(a){if(this.state!=a){this.lastState=this.state;this.state=a;this.dispatchEvent(this.EVENTS.STATECHANGE,{newState:a,oldState:this.lastState,engineType:this.engineType})}},_definedEvents:function(){this.audio.addEventListener("error",T.fn.bind(function(){this._firePlayStateChange(this.STATES.ERROR);this.dispatchEvent(this.EVENTS.ERROR,{engineType:this.engineType})},this),false);this.audio.addEventListener("ended",T.fn.bind(function(){this._firePlayStateChange(this.STATES.END)},this),false);this.audio.addEventListener("playing",T.fn.bind(function(){this._firePlayStateChange(this.STATES.PLAY)},this),false);this.audio.addEventListener("pause",T.fn.bind(function(){if(this.getState()==this.STATES.PLAY){this._firePlayStateChange(this.getCurrentPosition()?this.STATES.PAUSE:this.STATES.STOP)}},this),false);this.audio.addEventListener("waiting",T.fn.bind(function(){this._firePlayStateChange(this.getCurrentPosition()?this.STATES.BUFFERING:this.STATES.PREBUFFER)},this),false)}});var PlayEngine_FMP_MP3=mbox.lang.createClass(function(a){a=a||{};this.supportMimeType=["mp3"];this.engineType="fmp_mp3";this.swfPath="fmp_mp3.swf";this.flashVersionRequire=a.flashVersionRequire||"9.0.0";this.versionErrorMessage=a.versionErrorMessage||"";this.stateCode={"-2":this.STATES.INIT,"-1":this.STATES.READY,"0":this.STATES.STOP,"1":this.STATES.PLAY,"2":this.STATES.PAUSE,"3":this.STATES.END,"4":this.STATES.BUFFERING,"5":this.STATES.PREBUFFER,"6":this.STATES.ERROR};this.flashLoaded=false;this.flashReady=new mbox.Fuze()},{superClass:PlayEngine_Interface,className:"PlayEngine_FMP_MP3"}).extend({test:function(a){return this._checkPlayer(a)},init:function(b){b=b||{};var c=b.el;this.instanceName=b.instanceName;this.swfPath=b.swfPath||this.swfPath;var a,d=this.newId();if(T.lang.isString(c)){c=T.g(c)}if(!c){c=T.dom.create("div");document.body.appendChild(c)}a=T.dom.create("div");c.appendChild(a);this.swfPath+="?"+d+"_"+Math.random();T.swf.create({id:this.flashObjectId=d,width:"1px",height:"1px",ver:this.flashVersionRequire,errorMessage:this.versionErrorMessage,allowscriptaccess:"always",url:this.swfPath,bgcolor:"#ffffff",wmode:"window",scale:"noscale",vars:{_instanceName:this.instanceName+"",_buffertime:2000}},a);this.flashObject=T.swf.getMovie(this.flashObjectId)},reset:function(){this.stop();if(this.state!=this.STATES.INIT){this.url="";this.state=this.STATES.READY;this.stateStack=[this.STATES.READY]}},setUrl:function(a){this.flashReady(T.fn.bind(function(){this.url=a;this.flashObject.closeStream();this.flashObject.f_load(a)},this))},play:function(){this.flashReady(T.fn.bind(function(){if(this.state==this.STATES.PLAY){return}this.flashObject.f_play()},this))},pause:function(){this.flashReady(T.fn.bind(function(){if(this.state==this.STATES.PAUSE||this.state==this.STATES.STOP||this.state==this.STATES.END){return}this.flashObject.f_pause()},this))},stop:function(){this.flashReady(T.fn.bind(function(){if(this.state==this.STATES.STOP){return}this.flashObject.f_stop()},this))},setMute:function(a){this.flashReady(T.fn.bind(function(){this.mute=a;this.flashObject.setData("mute",a)},this))},setVolume:function(a){this.flashReady(T.fn.bind(function(){this.volume=a;this.flashObject.setData("volume",a)},this))},setCurrentPosition:function(a){this.flashReady(T.fn.bind(function(){this.flashObject.f_play(a)},this))},getCurrentPosition:function(){return this.flashLoaded?this.flashObject.getData("currentPosition"):0},getLoadedPercent:function(){return this.flashLoaded?this.flashObject.getData("loadedPct"):0},getTotalTime:function(){return this.flashLoaded?this.flashObject.getData("length"):0},getState:function(a){return T.lang.isNumber(a)?this.stateCode[a]:this.state},getVersion:function(){return T.swf.version},_firePlayStateChange:function(b){if(this.state!=b){this.state=b;this.stateStack.push(b);var a=this.stateStack.shift();this.dispatchEvent(this.EVENTS.STATECHANGE,{newState:b,oldState:a,engineType:this.engineType})}},_onLoad:function(){this.state=this.STATES.READY;this.stateStack=[this.state];this.dispatchEvent(this.EVENTS.INIT,{engineType:this.engineType,engine:this.flashObject});setTimeout(T.fn.bind(function(){this.flashReady.fire();this.flashLoaded=true},this),0)},_onPlayStateChange:function(a){setTimeout(T.fn.bind(function(){this._firePlayStateChange(this.getState(a))},this),0)},_checkPlayer:function(b){b=!!b;var d=T.swf.version,f=this.flashVersionRequire;if(d){var a=d.split("."),c=f.split(".");if(a[0]-c[0]>=0&&a[1]-c[1]>=0){return true}else{if(b){this.dispatchEvent(this.EVENTS.INITFAIL,{engineType:this.engineType})}return false}}else{if(b){this.dispatchEvent(this.EVENTS.INITFAIL,{engineType:this.engineType})}return false}}});var PlayEngine=mbox.lang.createClass(function(a){a=a||{};this.subEnginesConf=[];this.subEnginesInitArgs={};this.curEngine=null;this.curEngineType="";this.unInitEngineList=[];this.engineList=[];this.engineTypeList=[];this.ready=false;this.defaultExt=".mp3";this.coreContainer=null;this.EVENTS={STATECHANGE:"player_playStateChange",POSITIONCHANGE:"player_positionChange",PROGRESS:"player_progress",ERROR:"player_error",INIT:"player_initSuccess",INITFAIL:"player_initFail"};this.STATES={INIT:"init",READY:"ready",STOP:"stop",PLAY:"play",PAUSE:"pause",END:"end",BUFFERING:"buffering",PREBUFFER:"pre-buffer",ERROR:"error"};this.progressTimer=new mbox.Timer(200,0);this.positionTimer=new mbox.Timer(100,0);this._initEngines(a)},{className:"PlayEngine"}).extend({_error:function(a){throw new Error(a)},_initEngines:function(config){this.coreContainer=config.el||null;this.subEnginesConf=config.subEngines||[];T.array.each(this.subEnginesConf,T.fn.bind(function(item,index){var subEngineName=item.constructorName,args=item.args||{},subEngineConstructor;this.subEnginesInitArgs[subEngineName]=args;try{subEngineConstructor=eval(subEngineName);if(!T.lang.isFunction(subEngineConstructor)){return}}catch(e){return}var engine=new subEngineConstructor(args);this.unInitEngineList.push(engine)},this));this.curEngine=this.unInitEngineList[0]},init:function(b){if(this.ready){return this._error("")}b=b||{};this.subEnginesInitArgs=b.subEngines?b.subEngines:this.subEnginesInitArgs;this.coreContainer=b.el?b.el:this.coreContainer;if(!this.coreContainer){var a=T.dom.create("div",{id:"_player_container_"+T.lang.guid()});T.dom.setStyles(a,{width:"1px",height:"1px",overflow:"hidden"});document.body.appendChild(a);this.coreContainer=b.el=a}T.array.each(this.unInitEngineList,T.fn.bind(function(h,f){var c=h.toString(),i="",g=/^\[object (.*)\]$/i;if(g.test(c)){i=RegExp.$1}var d=this.subEnginesInitArgs[i]||{};if(h.test(true)){d.instanceName=d.instanceName+".engineList["+this.engineList.length+"]";d.el=d.el||this.coreContainer;this.engineList.push(h);h.init.apply(h,[d])}},this));this.switchEngineByUrl(this.defaultExt);this.ready=true;this._initProgressEvent();this._initPositionChangeEvent()},canPlayType:function(a){return T.array.some(this.engineList,function(c,b){return c.canPlayType(a)})},getSupportMimeTypeList:function(){var a=[];T.array.each(this.engineList,T.fn.bind(function(c,b){a=a.concat(c.getSupportMimeTypeList())},this));return a},switchEngineByUrl:function(b){var a=T.array.some(this.engineList,T.fn.bind(function(g,d){var h=g.getSupportMimeTypeList().join("|");var f=new RegExp("\\.("+h+")(\\?|$)","ig");if(f.test(b)){this.curEngine=g;this.curEngineType=g.getEngineType();return true}},this));var c=arguments[1];if(!a&&!c){arguments.callee.apply(this,[this.defaultExt,true])}},switchEngineByMimeType:function(a){T.array.some(this.engineList,T.fn.bind(function(c,b){if(c.canPlayType(a)){this.curEngine=c;this.curEngineType=c.getEngineType();return true}},this))},reset:function(){this.curEngine.reset.apply(this.curEngine,arguments)},setUrl:function(b){var a=this.curEngine;this.switchEngineByUrl(b);if(a&&a!=this.curEngine){a.stop()}if(this.curEngine){this.curEngine.setUrl.apply(this.curEngine,arguments)}},getUrl:function(){return this.curEngine.getUrl.apply(this.curEngine,arguments)},play:function(a){if(typeof a=="undefined"){if(this.curEngine){return this.curEngine.play.apply(this.curEngine,arguments)}}else{return this.setCurrentPosition(a)}},pause:function(){if(this.curEngine){return this.curEngine.pause.apply(this.curEngine,arguments)}},stop:function(){if(this.curEngine){return this.curEngine.stop.apply(this.curEngine,arguments)}},setMute:function(b){var a=arguments;T.array.each(this.engineList,function(d,c){d.setMute.apply(d,a)})},getMute:function(){if(this.curEngine){return this.curEngine.getMute.apply(this.curEngine,arguments)}return false},setVolume:function(b){var a=arguments;T.array.each(this.engineList,function(d,c){d.setVolume.apply(d,a)})},getVolume:function(){if(this.curEngine){return this.curEngine.getVolume.apply(this.curEngine,arguments)}return 0},setCurrentPosition:function(a){if(this.curEngine){return this.curEngine.setCurrentPosition.apply(this.curEngine,arguments)}},getCurrentPosition:function(){if(this.curEngine){return this.curEngine.getCurrentPosition.apply(this.curEngine,arguments)}return 0},getCurrentPositionString:function(){return mbox.convertTime(this.getCurrentPosition())},getLoadedPercent:function(){if(this.curEngine){return this.curEngine.getLoadedPercent.apply(this.curEngine,arguments)}return 0},getLoadedBytes:function(){if(this.curEngine){return this.curEngine.getLoadedBytes.apply(this.curEngine,arguments)}},getTotalBytes:function(){if(this.curEngine){return this.curEngine.getTotalBytes.apply(this.curEngine,arguments)}return 0},getTotalTime:function(){if(this.curEngine){return this.curEngine.getTotalTime.apply(this.curEngine,arguments)}return 0},getTotalTimeString:function(){return mbox.convertTime(this.getTotalTime())},getCurEngine:function(){return this.curEngine},getEngineType:function(){return this.getCurEngine().getEngineType()},getVersion:function(){var a={};T.array.each(this.engineList,function(c,b){a[c.getEngineType()]=c.getVersion()});return a},getState:function(){if(this.curEngine){return this.curEngine.getState.apply(this.curEngine,arguments)}return null},setEventListener:function(a,c,b){var d;if(a==this.EVENTS.INITFAIL||a==this.EVENTS.INIT){d=T.fn.bind(function(f){c.apply(this,arguments)},this)}else{d=T.fn.bind(function(f){if(f.target&&f.target.getEngineType()==this.curEngineType){c.apply(this,arguments)}},this)}T.array.each(this.unInitEngineList,function(g,f){g.setEventListener(a,d,b)})},removeEventListener:function(b,a){T.array.each(this.unInitEngineList,function(d,c){d.removeEventListener(b,a)})},_initProgressEvent:function(){this.progressTimer.addEventListener("timer",T.fn.bind(function(b,a){var c=this.getLoadedPercent();this.curEngine.dispatchEvent(this.EVENTS.PROGRESS,{progress:c,totalBytes:this.getTotalBytes(),loadedBytes:this.getLoadedBytes(),totalTime:this.getTotalTime()});if(c==1&&this.curEngineType!="wmp"){this.progressTimer.stop()}},this));this.setEventListener(this.EVENTS.STATECHANGE,T.fn.bind(function(b){var a=b.newState;switch(a){case this.STATES.PREBUFFER:case this.STATES.PLAY:if(this.getLoadedPercent()<1){this.progressTimer.start()}break;case this.STATES.STOP:case this.STATES.READY:case this.STATES.END:this.progressTimer.reset();break}},this));this.setEventListener("setUrl",T.fn.bind(function(a){this.progressTimer.reset();this.progressTimer.start()},this))},_initPositionChangeEvent:function(){this.positionTimer.addEventListener("timer",T.fn.bind(function(b,a){var c=this.getCurrentPosition();this.curEngine.dispatchEvent(this.EVENTS.POSITIONCHANGE,{position:c})},this));this.setEventListener(this.EVENTS.STATECHANGE,T.fn.bind(function(b){var a=b.newState;switch(a){case this.STATES.PLAY:this.positionTimer.start();break;case this.STATES.STOP:case this.STATES.PAUSE:this.positionTimer.pause();this.curEngine.dispatchEvent(this.EVENTS.POSITIONCHANGE,{position:this.getCurrentPosition()});break;case this.STATES.READY:case this.STATES.END:this.positionTimer.reset();break}},this));this.setEventListener("setUrl",T.fn.bind(function(a){this.positionTimer.reset()},this))}});mbox.SongModel=function(a){a=a||{};this.hasLink=false;this.songId=0;this.songName="";this.artistId=0;this.artistName="";this.albumId=0;this.albumName="";this.songPicSmall="";this.songPicBig="";this.songPicRadio="";this.lrcLink="";this.time=0;this.songLink="";this.showLink="";this.format="";this.rate=0;this.size=0;this.lyricContent="";this.relateStatus=0;this.resourceType=0;this.copyType=0;for(var b in a){var d=a[b];if(!T.isString(this[b])){if(d!=""){var c=+d;if(c==d){d=c}else{if(d==null){d=""}}}}this[b]=d}};mbox.SongModel.prototype={set:function(d,c){for(var a in d){var f=d[a];if(!T.isString(this[a])){if(f!=""){var b=+f;if(b==f){f=b}else{if(f==null){f=""}}}}this[a]=f}},get:function(a){return this[a]},unset:function(a){delete this[a]}};(function(){var a=T.lang.createClass(function(){this.allSongCache={};this.apiAddress=mbox.CONF.songLinkHost.link;this.lrcAddress=mbox.CONF.songLinkHost.lrc;this.sugAddress=mbox.CONF.songLinkHost.sug}).extend({createSongModel:function(c,b){var d=[],c=T.lang.toArray(c),b=T.lang.toArray(b);T.each(c,function(h,f,g){if(!h||h==="null"||h==="undefined"){return}if(!this.allSongCache[h]){this.allSongCache[h]=new mbox.SongModel({songId:h})}d.push(this.allSongCache[h])},this);T.object.each(b,function(h,g,f){if(this.allSongCache[h.queryId||h.id]){this.allSongCache[h.queryId||h.id].set(h)}},this);return d},fetchIdByQuery:function(f,b){var c=f.split("$$"),g=c[0]||c[2],d=c[1];T.sio.callByServer(this.sugAddress+g+" "+d,function(h){if(h.song_list&&h.song_list.length){b(h.song_list[0].song_id)}else{b(f)}})},fetchSong:function(b,c){if(b.hasLink){T.lang.isFunction(c.success)&&c.success(b,this)}else{if(b.songId.toString().indexOf("$$")>-1){this.fetchIdByQuery(b.songId,T.fn.bind(function(d){T.sio.callByServer(this.apiAddress+d,function(j){if(j.error_code===22000){var h=j.songinfo,f=j.bitrate;if(h.extra){var g=h.extra.split("$$");h.song_id=h.extra;h.title=g[0]||g[2];h.author=g[1]}b.set({hasLink:true,songId:h.song_id,songName:h.title,artistId:h.ting_uid,artistName:h.author,albumId:h.album_id,albumName:h.album_title,songPicBig:h.pic_big,songPicSmall:h.pic_small||"http://mu9.bdstatic.com/player/t/i/JJn494Tv.jpg",songPicRadio:h.pic_radio,resourceType:h.resource_type,relateStatus:h.relate_status,copyType:h.copy_type,lrcLink:h.lrclink,rate:f.file_bitrate,songLink:f.file_link,showLink:f.show_link,format:f.file_extension,size:f.file_size,time:f.file_duration});T.lang.isFunction(c.success)&&c.success(b,this)}else{T.lang.isFunction(c.error)&&c.error(b,j.error_code)}})},this))}else{T.sio.callByServer(this.apiAddress+b.songId,function(h){if(h.error_code===22000){var g=h.songinfo,d=h.bitrate;if(g.extra){var f=g.extra.split("$$");g.song_id=g.extra;g.title=f[0]||f[2];g.author=f[1]}b.set({hasLink:true,songId:g.song_id,songName:g.title,artistId:g.ting_uid,artistName:g.author,albumId:g.album_id,albumName:g.album_title,songPicBig:g.pic_big,songPicSmall:g.pic_small||"http://mu9.bdstatic.com/player/t/i/JJn494Tv.jpg",songPicRadio:g.pic_radio,resourceType:g.resource_type,relateStatus:g.relate_status,copyType:g.copy_type,lrcLink:g.lrclink,rate:d.file_bitrate,songLink:d.file_link,showLink:d.show_link,format:d.file_extension,size:d.file_size,time:d.file_duration});T.lang.isFunction(c.success)&&c.success(b,this)}else{T.lang.isFunction(c.error)&&c.error(b,h.error_code)}})}}},getLrcContent:function(c,b){var g=T.lang.isFunction,f=g(b)?b:g(b.success)?b.success:function(){},d=g(b.error)?b.error:function(){};if(c.lrcContent){f(c.lrcContent)}else{if(c.songLink&&c.lrcLink){T.sio.callByServer(this.lrcAddress+c.songId,function(h){if(h.lrcContent){c.lrcContent=h.lrcContent;f(h.lrcContent)}else{d()}})}else{d()}}}});mbox.SongDataModel=new a()})(undefined);(function(){var a={RANDOM:0,SINGLE:1,CYCLE:2};mbox.PlayList=T.lang.createClass(function(){this.curSongIndex=-1;this.curSong=null;this.songModels=[];this.mode=a.SINGLE}).extend({_random:function(){return parseInt(Math.random()*this.getLength(),10)},addSong:function(b){b=T.lang.toArray(b);if(b.length){this.songModels=this.songModels.concat(b);this.dispatchEvent("add:songModels",{songModels:b})}},removeSong:function(g){if(g===-1){this.reset();this.dispatchEvent("remove:songModels",{indexes:d})}else{var d=T.lang.toArray(g),h=d.length;if(h){d.sort(function(k,j){return k-j});var c=this.curSongIndex,i=c,b=false;while(h--){var f=d[h];this.songModels.splice(f,1);if(i!==-1){if(f===c){b=true}if(f<=c){c--}}}if(b){c++}if(i!==-1){if(c<0&&songlist.length>0){c=0;b=true}else{if(c>songlist.length-1){c=0}}}if(b){this.curSong=songlist[c];this.curSongIndex=c}this.dispatchEvent("remove:songModels",{indexes:d})}}},prev:function(){var c=this.getLength(),b=this.curSongIndex===-1?0:(this.curSongIndex+c-1)%c;if(!c){return}if(this.mode===a.RANDOM){this.setCurIndex(this._random())}else{this.setCurIndex(b)}},next:function(){var c=this.getLength(),b=(this.curSongIndex+1)%c;if(!c){return}if(this.mode===a.RANDOM){this.setCurIndex(this._random())}else{this.setCurIndex(b)}},autoNext:function(){if(this.mode===a.SINGLE){this.setCurIndex(this.curSongIndex)}else{this.next()}},setCurIndex:function(b){this.curSongIndex=b;this.setCurSong(this.songModels[b]);this.dispatchEvent("change:curSongIndex",{index:b})},setCurSong:function(b){this.curSong=b;this.dispatchEvent("change:curSong",{curSong:b})},getCurIndex:function(){return this.curSongIndex},getCurSong:function(){return this.curSong},getSongList:function(){return this.songModels},setMode:function(b){this.mode=b},getMode:function(){return this.mode},getLength:function(){return this.songModels.length},reset:function(){this.curSongIndex=-1;this.curSong=null;this.songModels=[];this.playlist=[]},fetchLink:function(b){mbox.SongDataModel.fetchSong(this.curSong,b)}})})();mbox.LogModel=T.lang.createClass(function(a,b){this.logUrl="http://nsclick.baidu.com/v.gif";this.playerRules={};this.playerRuleCtrl=null;this.player=a;this.playList=b;this.initLog()}).extend({initLog:function(){var c=this;var a=new mbox.PlayerLog({time:100,resetOnNoVoice:true,type:"play100ms",player:this.player,handler:function(){c.sendLog("playsong100ms",c.logUrl,{sendCurSong:true})}});var b=new mbox.PlayerLog({time:60*1000,resetOnNoVoice:false,type:"play60s",player:this.player,handler:function(){c.sendLog("60play",c.logUrl,{sendCurSong:true})}});this.player.setEventListener("setUrl",function(){c.sendLog("playstart",c.logUrl,{sendCurSong:true})})},_addCurSong:function(c){var a={song_id:"songId",song_title:"songName",singer_id:"artistId",singer_name:"artistName",album_id:"albumId",album_name:"albumName",copytype:"copyType",format:"format",queryid:"queryId",rate:"rate",relatestatus:"relateStatus",resourcetype:"resourceType",songsize:"size",linkCode:"linkCode",lrcLink:"lrcLink",time:"time",status:"status",from:"from",link:"songLink"};var b=this.playList.getCurSong();T.object.each(a,function(f,d){c.push(d+"="+encodeURIComponent(b[f]==null?"":b[f]))})},sendLog:function(f,d,c){var g=[],b=new Date().getTime();window["naga_log_"+b]=new Image();var a=window["naga_log_"+b];g.push("pid=304");g.push("url=");g.push("type="+f);if(c.sendCurSong){this._addCurSong(g)}if(c.pos){g.push("pos="+c.pos)}g.push("r"+Math.random()+"=1");if(mbox.CONF.logOpt){if(!mbox.CONF.logOpt.ref){mbox.CONF.logOpt.ref="pc_aldsinglebox"}T.object.each(mbox.CONF.logOpt,function(i,h){g.push(h+"="+i)})}if(c.otherInfo){_.each(c.otherInfo,function(i,h){g.push(h+"="+encodeURIComponent((i+"")||""))})}a.onload=function(){a=null;try{delete window["naga_log_"+b]}catch(h){}};a.src=(d)+"?"+g.join("&")}});mbox.PlayerLog=function(a){this.type=a.type;this.time=a.time;this.resetOnNoVoice=a.resetOnNoVoice;this.player=a.player;this.active=false;this.timer=null;this.handlers=[];if(a.handler){this.handlers.push(a.handler)}this._init()};mbox.PlayerLog.prototype={_init:function(){if(!this.timer&&this.time!=null){this.timer=new mbox.Timer(this.time,1);this.addHandler(this.handler);this.timer.addEventListener("timer",T.fn.bind(function(){for(var d=0,c=this.handlers.length;d<c;d++){this.handlers[d]&&this.handlers[d].apply(this,arguments)}},this))}var b=this.player.EVENTS.STATECHANGE,a=this.player.STATES;this.player.setEventListener("setUrl",T.fn.bind(function(){this.active=true;this.timer.reset()},this));this.player.setEventListener(b,T.fn.bind(function(c){if(this.active){if(c.newState==a.PLAY){this.timer.start()}else{if(this.resetOnNoVoice){this.timer.reset()}else{if(c.newState==a.PAUSE||c.newState==a.BUFFERING){if(c.oldState==a.PLAY){this.timer.pause()}}else{this.timer.reset()}}}}},this))},addHandler:function(a){this.handlers.push(a)}};mbox.PlayCtrl=mbox.lang.createClass(function(c){var a=[],d=mbox.CONF.instanceCallName,b=mbox.CONF.engineArg;if(typeof window[d]!=="object"){window[d]={}}if(/(macintosh|iphone|ipod|ipad)/i.test(navigator.userAgent)){a.push(b.audio);a.push(b.fmp)}else{a.push(b.fmp);a.push(b.audio)}this.player=window[d].player=new PlayEngine({subEngines:a});this.player.init();this.curSong=null;this.playList=new mbox.PlayList();this.log=new mbox.LogModel(this.player,this.playList);window[d].logger=this.log;this._init(c);if(mbox.CONF.exportAPI){window[d][mbox.CONF.exportAPI]=this.exportAPI()}}).extend({_init:function(d){d=d||{};var b=this.player,c=this.playList,h=d.songId||[],g=mbox.SongDataModel.createSongModel(h),a=this,f=T.lang.isFunction;if(d.logOpt){T.object.extend(mbox.CONF.logOpt||{},d.logOpt)}b.setEventListener(b.EVENTS.POSITIONCHANGE,function(k){var i=k.position,j=a.getTotalTime();f(d.onPositionChange)&&d.onPositionChange(i,i*100/j||0)});f(d.onProgressChange)&&b.setEventListener(b.EVENTS.PROGRESS,function(i){d.onProgressChange(i.progress*100)});b.setEventListener(b.EVENTS.STATECHANGE,function(i){f(d.onPlayStateChange)&&d.onPlayStateChange(i.newState,i.oldState);switch(i.newState){case b.STATES.END:if(mbox.CONF.autoNext){c.autoNext();a.play()}else{b.stop()}break}});c.addEventListener("change:curSong",function(i){b.stop();if(a.curSong=i.curSong){a.playList.fetchLink({success:function(j){f(d.onChangeCurSong)&&d.onChangeCurSong(j);a.dispatchEvent("fetch:link",{song:j})},error:function(j){f(d.onChangeCurSong)&&d.onChangeCurSong(null,j)}})}else{f(d.onChangeCurSong)&&d.onChangeCurSong(null)}});c.addSong(g);this.playList.setCurIndex(0);if(d.autoPlay!==undefined?d.autoPlay:mbox.CONF.autoPlay){this.play()}},getCurSong:function(){return this.curSong},getTotalTime:function(){return this.curSong&&this.curSong.time*1000||this.player.getTotalTime()},setPlayIndex:function(a,b){this.playList.setCurIndex(a);b&&this.play()},play:function(){if(this.curSong&&this.curSong.songLink){if(this.curSong.songLink!==this.player.getUrl()){this.player.reset();this.player.setUrl(this.curSong.songLink)}this.player.play()}else{var a=this;this.addEventListener("fetch:link",function(b){if(b.song){a.player.setUrl(b.song.songLink);a.player.play()}else{throw"fetch songLink fail"}a.removeEventListener("fetch:link.link")},"link")}},pause:function(){this.player.pause()},stop:function(){this.player.stop()},exportAPI:function(){var a=this,b=this.player.EVENTS;return{getCurSong:function(){return a.curSong},getTotalTime:function(){return a.totalTime},getPlayerState:function(){return a.player.getState()},getPosition:function(){return a.player.getPosition()},getProgress:function(){return a.player.getProgress()},play:function(){a.play.apply(a,arguments)},pause:function(){a.pause()},stop:function(){a.stop()},listenToStateChange:function(c){a.player.setEventListener(b.STATECHANGE,c)},listenToPosChange:function(c){a.player.setEventListener(b.POSITIONCHAGNE,c)},listenToLoadedPercentChange:function(c){a.player.setEventListener(b.PROGRESS,c)},getCurIndex:function(){return a.playList.getCurIndex()},addSong:function(c){var d=T.lang.toArray(c);if(d.length&&typeof d[0]!=="object"){d=mbox.SongDataModel.createSongModel(d)}a.playList.addSong(d)},removeSong:function(c){a.playList.removeSong(c)},setPlayIndex:function(c,d){this.setPlayIndex.call(a,c,d)},setPlayMode:function(c){a.playList.setMode(c)}}}});mbox.uiConf={prefix:"mbox",allWidget:["slider","time","volume","mute","title","lrc","album","playList","playBtn"],tpl:'<div class="mbox">                <div class="logo" ><a href="http://music.baidu.com" target="_blank" title="\u767e\u5ea6\u97f3\u4e50"></a></div>                <div class="player-main">                    <div class="album-pic mbox-album">                        <img class="pic" data-src="<%=songPicSmall%>"/>                    </div>                    <div class="right-wrapper">                        <div class="right-top">                            <div class="mbox-title player-title">                                <div class="song-name song-info" songid="<%=songId%>"><a href="http://music.baidu.com/song/<%=songId%>" target="_blank"><%=songName%></a></div>                                <span class="artist song-info">\u6b4c\u624b\uff1a<span class="artist-name"><%var i =0, len = all_artist.length; for(;len -i; i++){%>                                    <a href="<%=all_artist_link[i]%>" target="_blank"><%=all_artist[i]%></a><%};%></span></span>                                <span class="album song-info">\u4e13\u8f91\uff1a<span class="album-name"><a href="<%=albumLink%>" target="_blank"><%=albumName%></a></span></span>                                <span class="source song-info">\u6765\u6e90\uff1a<span class="link-source"><a href="javascript:void(0)"></a></span></span>                                <div class="lrc"></div>                            </div>                            <div class="button-wrapper">                                <a class="button add-favour" href="javascript:void(0)" onclick="return false;" title="\u70B9\u51FB\u6536\u85CF"></a>                                <a class="button lrc-btn" href="javascript:void(0)" target="_blank" onclick="return false;" title="\u67e5\u770b\u5168\u90e8\u6b4c\u8bcd"></a>                                <a class="button download-btn" href="javascript:void(0)" target="_blank" onclick="return false;" title="\u4e0b\u8f7d\u6b4c\u66f2"></a>                                <a class="button go-to-listen-btn" href="javascript:void(0)" target="_blank" onclick="return false;" title="\u5f39\u51fa\u64ad\u653e"></a>                            </div>                        </div>                        <div class="bottom-bars">                            <div class="bottom-bars-item mbox-playBtn ctrl-btn stop"><a href="javascript:void(0)" onclick="return false;"></a></div>                            <div class="bottom-bars-item  progress "><div class="slider-wrapper mbox-slider"></div></div>                            <div class="bottom-bars-item mbox-time time"><%=curTime%>/<%=totalTime%></div>                            <div class="bottom-bars-item volume">                                <a class="volume-btn mbox-mute" href="javascript:void(0)" onclick="return false;"  title="">&nbsp</a>                                <div class="slider-wrapper mbox-volume"></div>                            </div>                        </div>                    </div>                </div>                </div>'};(function(c){var b=typeof module==="undefined"?(c.baidu=c.baidu||{}):module.exports;b.template=function(h,g){var f=(function(){if(!c.document){return a._compile(h)}var j=document.getElementById(h);if(j){if(a.cache[h]){return a.cache[h]}var i=/^(textarea|input)$/i.test(j.nodeName)?j.value:j.innerHTML;return a._compile(i)}else{return a._compile(h)}})();var d=a._isObject(g)?f(g):f;f=null;return d};var a=b.template;a.versions=a.versions||[];a.versions.push("1.0.6");a.cache={};a.LEFT_DELIMITER=a.LEFT_DELIMITER||"<%";a.RIGHT_DELIMITER=a.RIGHT_DELIMITER||"%>";a.ESCAPE=true;a._encodeHTML=function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};a._encodeReg=function(d){return String(d).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")};a._encodeEventHTML=function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")};a._compile=function(f){var d="var _template_fun_array=[];\nvar fn=(function(__data__){\nvar _template_varName='';\nfor(name in __data__){\n_template_varName+=('var '+name+'=__data__[\"'+name+'\"];');\n};\neval(_template_varName);\n_template_fun_array.push('"+a._analysisStr(f)+"');\n_template_varName=null;\n})(_template_object);\nfn = null;\nreturn _template_fun_array.join('');\n";return new Function("_template_object",d)};a._isObject=function(d){return"function"===typeof d||!!(d&&"object"===typeof d)};a._analysisStr=function(g){var d=a.LEFT_DELIMITER;var i=a.RIGHT_DELIMITER;var f=a._encodeReg(d);var h=a._encodeReg(i);g=String(g).replace(new RegExp("("+f+"[^"+h+"]*)//.*\n","g"),"$1").replace(new RegExp("<!--.*?-->","g"),"").replace(new RegExp(f+"\\*.*?\\*"+h,"g"),"").replace(new RegExp("[\\r\\t\\n]","g"),"").replace(new RegExp(f+"(?:(?!"+h+")[\\s\\S])*"+h+"|((?:(?!"+f+")[\\s\\S])+)","g"),function(k,j){var l="";if(j){l=j.replace(/\\/g,"&#92;").replace(/'/g,"&#39;");while(/<[^<]*?&#39;[^<]*?>/g.test(l)){l=l.replace(/(<[^<]*?)&#39;([^<]*?>)/g,"$1\r$2")}}else{l=k}return l});g=g.replace(new RegExp("("+f+"[\\s]*?var[\\s]*?.*?[\\s]*?[^;])[\\s]*?"+h,"g"),"$1;"+i).replace(new RegExp("("+f+":?[hvu]?[\\s]*?=[\\s]*?[^;|"+h+"]*?);[\\s]*?"+h,"g"),"$1"+i).split(d).join("\t");if(a.ESCAPE){g=g.replace(new RegExp("\\t=(.*?)"+h,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'")}else{g=g.replace(new RegExp("\\t=(.*?)"+h,"g"),"',typeof($1) === 'undefined'?'':$1,'")}g=g.replace(new RegExp("\\t:h=(.*?)"+h,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'").replace(new RegExp("\\t(?::=|-)(.*?)"+h,"g"),"',typeof($1)==='undefined'?'':$1,'").replace(new RegExp("\\t:u=(.*?)"+h,"g"),"',typeof($1)==='undefined'?'':encodeURIComponent($1),'").replace(new RegExp("\\t:v=(.*?)"+h,"g"),"',typeof($1)==='undefined'?'':baidu.template._encodeEventHTML($1),'").split("\t").join("');").split(i).join("_template_fun_array.push('").split("\r").join("\\'");return g}})(window);
/*!
 * jQuery UI Widget @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,f){if(b.widget&&b.widget==="function"){b.box_widget=b.widget}var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(g){for(var h=0,j;(j=g[h])!=null;h++){try{b(j).triggerHandler("remove")}catch(k){}}c(g)};b.box_widget=function(h,k,g){var n,m,j,l,i=h.split(".")[0];h=h.split(".")[1];n=i+"-"+h;if(!g){g=k;k=b.Widget}b.expr[":"][n.toLowerCase()]=function(o){return !!b.data(o,n)};b[i]=b[i]||{};m=b[i][h];j=b[i][h]=function(o,p){if(!this._createWidget){return new j(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(j,m,{version:g.version,_proto:b.extend({},g),_childConstructors:[]});l=new k();l.options=b.box_widget.extend({},l.options);b.each(g,function(p,o){if(b.isFunction(o)){g[p]=(function(){var q=function(){return k.prototype[p].apply(this,arguments)},r=function(s){return k.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()}});j.prototype=b.box_widget.extend(l,{widgetEventPrefix:h},g,{constructor:j,namespace:i,widgetName:h,widgetBaseClass:n,widgetFullName:n});if(m){b.each(m._childConstructors,function(p,q){var o=q.prototype;b.box_widget(o.namespace+"."+o.widgetName,j,q._proto)});delete m._childConstructors}else{k._childConstructors.push(j)}b.box_widget.bridge(h,j)};b.box_widget.extend=function(l){var h=d.call(arguments,1),k=0,g=h.length,i,j;for(;k<g;k++){for(i in h[k]){j=h[k][i];if(h[k].hasOwnProperty(i)&&j!==f){l[i]=b.isPlainObject(j)?b.box_widget.extend({},l[i],j):j}}}return l};b.box_widget.bridge=function(h,g){var i=g.prototype.widgetFullName;b.fn[h]=function(l){var j=typeof l==="string",k=d.call(arguments,1),m=this;l=!j&&k.length?b.box_widget.extend.apply(null,[l].concat(k)):l;if(j){this.each(function(){var o,n=b.data(this,i);if(!n){return b.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+l+"'")}if(!b.isFunction(n[l])||l.charAt(0)==="_"){return b.error("no such method '"+l+"' for "+h+" widget instance")}o=n[l].apply(n,k);if(o!==n&&o!==f){m=o&&o.jquery?m.pushStack(o.get()):o;return false}})}else{this.each(function(){var n=b.data(this,i);if(n){n.option(l||{})._init()}else{new g(l,this)}})}return m}};b.Widget=function(g,h){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,h){h=b(h||this.defaultElement||this)[0];this.element=b(h);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.box_widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=b();this.hoverable=b();this.focusable=b();if(h!==this){b.data(h,this.widgetName,this);b.data(h,this.widgetFullName,this);this._on({remove:"destroy"});this.document=b(h.style?h.ownerDocument:h.document||h);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(k,l){var g=k,m,j,h;if(arguments.length===0){return b.box_widget.extend({},this.options)}if(typeof k==="string"){g={};m=k.split(".");k=m.shift();if(m.length){j=g[k]=b.box_widget.extend({},this.options[k]);for(h=0;h<m.length-1;h++){j[m[h]]=j[m[h]]||{};j=j[m[h]]}k=m.pop();if(l===f){return j[k]===f?null:j[k]}j[k]=l}else{if(l===f){return this.options[k]===f?null:this.options[k]}g[k]=l}}this._setOptions(g);return this},_setOptions:function(g){var h;for(h in g){this._setOption(h,g[h])}return this},_setOption:function(g,h){this.options[g]=h;if(g==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!h).attr("aria-disabled",h);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(i,h){if(!h){h=i;i=this.element}else{i=b(i);this.bindings=this.bindings.add(i)}var g=this;b.each(h,function(o,n){function l(){if(g.options.disabled===true||b(this).hasClass("ui-state-disabled")){return}return(typeof n==="string"?g[n]:n).apply(g,arguments)}if(typeof n!=="string"){l.guid=n.guid=n.guid||l.guid||b.guid++}var m=o.match(/^(\w+)\s*(.*)$/),k=m[1]+g.eventNamespace,j=m[2];if(j){g.widget().delegate(j,k,l)}else{i.bind(k,l)}})},_off:function(h,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;h.unbind(g).undelegate(g)},_delay:function(j,i){function h(){return(typeof j==="string"?g[j]:j).apply(g,arguments)}var g=this;return setTimeout(h,i||0)},_hoverable:function(g){this.hoverable=this.hoverable.add(g);this._on(g,{mouseenter:function(h){b(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){b(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g);this._on(g,{focusin:function(h){b(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){b(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(g,h,i){var l,k,j=this.options[g];i=i||{};h=b.Event(h);h.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();h.target=this.element[0];k=h.originalEvent;if(k){for(l in k){if(!(l in h)){h[l]=k[l]}}}this.element.trigger(h,i);return !(b.isFunction(j)&&j.apply(this.element[0],[h].concat(i))===false||h.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(h,g){b.Widget.prototype["_"+h]=function(k,j,m){if(typeof j==="string"){j={effect:j}}var l,i=!j?h:j===true||typeof j==="number"?g:j.effect||g;j=j||{};if(typeof j==="number"){j={duration:j}}l=!b.isEmptyObject(j);j.complete=m;if(j.delay){k.delay(j.delay)}if(l&&b.effects&&(b.effects.effect[i]||b.uiBackCompat!==false&&b.effects[i])){k[h](j)}else{if(i!==h&&k[i]){k[i](j.duration,j.easing,m)}else{k.queue(function(n){b(this)[h]();if(m){m.call(k[0])}n()})}}}});if(b.uiBackCompat!==false){b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]}}})(jQuery);
/*!
 * jQuery UI Mouse 1.8.20
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b,c){var a=false;b(document).mouseup(function(d){a=false});b.box_widget("ui.box_mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===b.data(f.target,d.widgetName+".preventClickEvent")){b.removeData(f.target,d.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(g){if(a){return}(this._mouseStarted&&this._mouseUp(g));this._mouseDownEvent=g;var f=this,h=(g.which==1),d=(typeof this.options.cancel=="string"&&g.target.nodeName?b(g.target).closest(this.options.cancel).length:false);if(!h||d||!this._mouseCapture(g)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(g)!==false);if(!this._mouseStarted){g.preventDefault();return true}}if(true===b.data(g.target,this.widgetName+".preventClickEvent")){b.removeData(g.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();a=true;return true},_mouseMove:function(d){if(b.browser.msie&&!(document.documentMode>=9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target==this._mouseDownEvent.target){b.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return true}})})(jQuery);
/*!
 * jQuery UI Slider 1.8.20
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(b,c){var a=5;b.box_widget("ui.box_slider",b.ui.box_mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",progressbar:false,progress:0,constraintProgress:false,range:false,step:1,value:0,values:null},_create:function(){var f=this,l=this.options,k=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),j="<a class='ui-slider-handle ui-state-default ui-corner-all' hidefocus='true'><span></span></a>",d=(l.values&&l.values.length)||1,h=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(l.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);if(l.range){if(l.range===true){if(!l.values){l.values=[this._valueMin(),this._valueMin()]}if(l.values.length&&l.values.length!==2){l.values=[l.values[0],l.values[0]]}}this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((l.range==="min"||l.range==="max")?" ui-slider-range-"+l.range:""))}if(l.progressbar){this.progressbar=b("<div></div>").appendTo(this.element).addClass("ui-slider-progressbar ui-widget-header")}for(var g=k.length;g<d;g+=1){h.push(j)}this.handles=k.add(b(h.join("")).appendTo(f.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(i){i.preventDefault()}).hover(function(){if(!l.disabled){b(this).addClass("ui-state-hover ui-slider-handle-hover")}},function(){b(this).removeClass("ui-state-hover ui-slider-handle-hover")}).focus(function(){if(!l.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus ui-slider-handle-focus");b(this).addClass("ui-state-focus ui-slider-handle-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus ui-slider-handle-focus")});this.handles.each(function(m){b(this).data("index.ui-slider-handle",m)});this.handles.keydown(function(p){var m=b(this).data("index.ui-slider-handle"),q,n,i,o;if(f.options.disabled){return}switch(p.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:p.preventDefault();if(!f._keySliding){f._keySliding=true;b(this).addClass("ui-state-active ui-slider-handle-active");q=f._start(p,m);if(q===false){return}}break}o=f.options.step;if(f.options.values&&f.options.values.length){n=i=f.values(m)}else{n=i=f.value()}switch(p.keyCode){case b.ui.keyCode.HOME:i=f._valueMin();break;case b.ui.keyCode.END:i=f._valueMax();break;case b.ui.keyCode.PAGE_UP:i=f._trimAlignValue(n+((f._valueMax()-f._valueMin())/a));break;case b.ui.keyCode.PAGE_DOWN:i=f._trimAlignValue(n-((f._valueMax()-f._valueMin())/a));break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(n===f._valueMax()){return}i=f._trimAlignValue(n+o);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(n===f._valueMin()){return}i=f._trimAlignValue(n-o);break}f._slide(p,m,i)}).keyup(function(m){var i=b(this).data("index.ui-slider-handle");if(f._keySliding){f._keySliding=false;f._stop(m,i);f._change(m,i);b(this).removeClass("ui-state-active ui-slider-handle-active")}});this._refreshValue();this._refreshProgress();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(g){var h=this.options,k,m,f,i,p,l,n,j,d;if(h.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();k={x:g.pageX,y:g.pageY};m=this._normValueFromMouse(k);f=this._valueMax()-this._valueMin()+1;p=this;this.handles.each(function(o){var q=Math.abs(m-p.values(o));if(f>q){f=q;i=b(this);l=o}});if(h.range===true&&this.values(1)===h.min){l+=1;i=b(this.handles[l])}n=this._start(g,l);if(n===false){return false}this._mouseSliding=true;p._handleIndex=l;i.addClass("ui-state-active ui-slider-handle-active").focus();j=i.offset();d=!b(g.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=d?{left:0,top:0}:{left:g.pageX-j.left-(i.width()/2),top:g.pageY-j.top-(i.height()/2)-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(g,l,m)}this._animateOff=true;return true},_mouseStart:function(d){return true},_mouseDrag:function(g){var d={x:g.pageX,y:g.pageY},f=this._normValueFromMouse(d);this._slide(g,this._handleIndex,f);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active ui-slider-handle-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(f){var d,i,h,g,j;if(this.orientation==="horizontal"){d=this.elementSize.width;i=f.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;i=f.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}h=(i/d);if(h>1){h=1}if(h<0){h=0}if(this.orientation==="vertical"){h=1-h}g=this._valueMax()-this._valueMin();j=this._valueMin()+h*g;return this._trimAlignValue(j)},_start:function(g,f){var d={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(f);d.values=this.values()}return this._trigger("start",g,d)},_slide:function(i,h,g){var d,f,j;if(this.options.values&&this.options.values.length){d=this.values(h?0:1);if((this.options.values.length===2&&this.options.range===true)&&((h===0&&g>d)||(h===1&&g<d))){g=d}if(g!==this.values(h)){f=this.values();f[h]=g;j=this._trigger("slide",i,{handle:this.handles[h],value:g,values:f});d=this.values(h?0:1);if(j!==false){this.values(h,g,true)}}}else{if(g!==this.value()){j=this._trigger("slide",i,{handle:this.handles[h],value:g});if(j!==false){this.value(g)}}}},_stop:function(g,f){var d={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(f);d.values=this.values()}this._trigger("stop",g,d)},_change:function(g,f){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(f);d.values=this.values()}this._trigger("change",g,d)}},_progress:function(f){var d={progress:this.options.progress};this._trigger("progress",f,d)},progress:function(f){var d=this._trimAlignProgress(f);if(arguments.length){if(this.options.progress!=d){this.options.progress=d;this._refreshProgress();this._progress(null);if(this.options.constraintProgress&&this.value()>d){this.value(d)}return}}return this.options.progress},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d);this._refreshValue();this._change(null,0);return}return this._value()},values:function(f,j){var h,d,g;if(arguments.length>1){this.options.values[f]=this._trimAlignValue(j);this._refreshValue();this._change(null,f);return}if(arguments.length){if(b.isArray(arguments[0])){h=this.options.values;d=arguments[0];for(g=0;g<h.length;g+=1){h[g]=this._trimAlignValue(d[g]);this._change(null,g)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(f)}else{return this.value()}}}else{return this._values()}},_setOption:function(f,g){var d,h=0;if(b.isArray(this.options.values)){h=this.options.values.length}b.Widget.prototype._setOption.apply(this,arguments);switch(f){case"disabled":if(g){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover ui-slider-handle-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this._refreshProgress();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(d=0;d<h;d+=1){this._change(null,d)}this._animateOff=false;break;case"progress":this._refreshProgress();this._progress(null);if(this.options.constraintProgress&&this.options.value>this.options.progress){this._animateOff=true;this.value(this.options.progress);this._animateOff=false}break;case"min":case"max":this._animateOff=true;this._refreshValue();this._refreshProgress();this._animateOff=false;break}},_value:function(){var d=this.options.value;d=this._trimAlignValue(d);return d},_values:function(d){var h,g,f;if(arguments.length){h=this.options.values[d];h=this._trimAlignValue(h);return h}else{g=this.options.values.slice();for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(g[f])}return g}},_trimAlignValue:function(h){if(h<=this._valueMin()){return this._valueMin()}if(!this.options.constraintProgress&&h>=this._valueMax()){return this._valueMax()}if(this.options.progressbar&&this.options.constraintProgress&&h>=this.options.progress){h=this.options.progress}var d=(this.options.step>0)?this.options.step:1,g=(h-this._valueMin())%d,f=h-g;if(Math.abs(g)*2>=d){f+=(g>0)?d:(-d)}return parseFloat(f.toFixed(5))},_trimAlignProgress:function(d){if(d<=this._valueMin()){return this._valueMin()}if(d>=this._valueMax()){return this._valueMax()}return d},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var h=this.options.range,g=this.options,n=this,f=(!this._animateOff)?g.animate:false,i,d={},j,l,k,m;if(this.options.values&&this.options.values.length){this.handles.each(function(p,o){i=(n.values(p)-n._valueMin())/(n._valueMax()-n._valueMin())*100;d[n.orientation==="horizontal"?"left":"bottom"]=i+"%";b(this).stop(1,1)[f?"animate":"css"](d,g.animate);if(n.options.range===true){if(n.orientation==="horizontal"){if(p===0){n.range.stop(1,1)[f?"animate":"css"]({left:i+"%"},g.animate)}if(p===1){n.range[f?"animate":"css"]({width:(i-j)+"%"},{queue:false,duration:g.animate})}}else{if(p===0){n.range.stop(1,1)[f?"animate":"css"]({bottom:(i)+"%"},g.animate)}if(p===1){n.range[f?"animate":"css"]({height:(i-j)+"%"},{queue:false,duration:g.animate})}}}j=i})}else{l=this.value();k=this._valueMin();m=this._valueMax();i=(m!==k)?(l-k)/(m-k)*100:0;d[n.orientation==="horizontal"?"left":"bottom"]=i+"%";this.handle.stop(1,0)[f?"animate":"css"](d,g.animate);if(h==="min"&&this.orientation==="horizontal"){this.range.stop(1,0)[f?"animate":"css"]({width:i+"%"},g.animate)}if(h==="max"&&this.orientation==="horizontal"){this.range[f?"animate":"css"]({width:(100-i)+"%"},{queue:false,duration:g.animate})}if(h==="min"&&this.orientation==="vertical"){this.range.stop(1,0)[f?"animate":"css"]({height:i+"%"},g.animate)}if(h==="max"&&this.orientation==="vertical"){this.range[f?"animate":"css"]({height:(100-i)+"%"},{queue:false,duration:g.animate})}}},_refreshProgress:function(){var h=this.options,d=this._valueMax(),f=h.progress,g=f/d*100;if(!this.progressbar){return}if(this.orientation==="horizontal"){this.progressbar.css({width:g+"%"})}else{this.progressbar.css({height:g+"%"})}},setLoading:function(f,d){var g;if(arguments.length<=1){d=f;g=this.handle}else{g=this.handles.eq(f)}g[d?"addClass":"removeClass"]("ui-slider-handle-loading")}});b.extend(b.ui.box_slider,{version:"1.8.20"})}(jQuery));(function(a){a.cutString=function(k,l,h){var g=k.length,b=0,d=0,m;var f,c;for(f=0;f<g;f++){if(k.charCodeAt(f)>128){b+=2}else{b+=1}if(b>l){m=k.substring(0,f-1)+"...";break}}for(c=g;c>0;c--){if(c<=f||h===0){return m}if(k.charCodeAt(f)>128){d+=2}else{d+=1}if(d>h){m=m+k.substring(c);return m}}return k}})(jQuery);mbox.UiCtrl=mbox.lang.createClass(function(b,a){this.guid="mbox_ui_"+setTimeout(function(){},0);this.conf=a||mbox.uiConf;if(!this.conf){return}this.widget={};this._init(b);this.EVENTS={POSITIONCHANGE:"ui_poschange",TOGGLEPLAY:"ui_toggleplay",VOLCHANGE:"ui_volchange",MUTECHANGE:"ui_mutechange"};this.volume=80;this.$root=$(b);this.active=false}).extend({_init:function(b){if(this.conf.tpl){var k=$(this.conf.tpl).appendTo(b||"body").css("display","none"),l=this.conf.allWidget,g=this.conf.prefix,a={};for(var f=l.length-1;f>-1;f--){var d=k.find("."+g+"-"+l[f]),h=d.html();h=h&&h.replace(/&lt;%/g,"<%").replace(/%&gt;/g,"%>");a[l[f]]={dom:d,tpl:h}}this.conf.domJson=a;k.css("display","block");this.$root=k}var c=this.conf.domJson;for(var m in c){if(c.hasOwnProperty(m)){switch(m){case"slider":this._initSlider(c[m]);break;case"volume":this.widget[m]=$(c[m].dom).box_slider({animate:true,max:100,min:0,orientation:"horizental",progressbar:false,range:"min",value:80}).bind("slide",T.fn.bind(function(j,i){if(this.active){this.fireVolChange(+i.value,+i.value===0)}},this)).bind("slidestop",T.fn.bind(function(j,i){if(!this.active){this.widget.volume.box_slider("option","value",this.volume)}},this));break;case"mute":var n=this;this.widget[m]=$(c[m].dom).click(function(j){var i=$(this).hasClass("mute");n.fireVolChange(n.volume,!i)});break;case"title":case"time":case"playList":case"album":this.widget[m]=$(c[m].dom);this.widget[m].tpl=c[m].tpl;break;case"playBtn":this.widget[m]=$(c[m].dom).bind("click",T.fn.bind(function(){var i=this.widget.playBtn.hasClass("stop");this.dispatchEvent(this.EVENTS.TOGGLEPLAY,{isPlay:i})},this));break;default:break}}}this.conf.tpl&&this.tplToHtml()},_initSlider:function(c){var a=c.maxValue||10000;this.widget.slider=$(c.dom).box_slider({animate:175,max:a,min:0,orientation:"horizontal",progressbar:true,progress:0,constraintProgress:true,range:"min",value:0});this.widget.slider.maxValue=a;this.widget.slider.sliding=false;var b=this;this.widget.slider.bind("slidestart",function(){b.widget.slider.isSliding=true}).bind("slidestop",function(f,d){b.widget.slider.isSliding=false;b.dispatchEvent(b.EVENTS.POSITIONCHANGE,{percent:d.value/b.widget.slider.maxValue});!b.active&&b.widget.slider.box_slider("option","value",0)})},tplToHtml:function(d,c,h,f){if(this.widget.title){var g=this.createSongFilter(d);if(!g.songName||g.songName==="\u8be5\u6b4c\u66f2\u5df2\u4e0b\u67b6"){this.widget.title.addClass("grey")}else{this.widget.title.removeClass("grey")}this.widget.title.html(baidu.template(this.widget.title.tpl,g))}if(this.widget.lrc){this.widget.lrc.lrc("setLrc","")}if(this.widget.album){this.widget.album.html(baidu.template(this.widget.album.tpl,d));var b=this.widget.album.find("img");if(!b[0].src){var a=b.attr("data-src");a&&b.attr("src",a)}}if(this.widget.time){this.widget.time.html(baidu.template(this.widget.time.tpl,{curTime:mbox.convertTime(0),totalTime:mbox.convertTime(0)}))}function j(k){$(c).delegate("."+k,"click",function(){f.sendLog("click",f.logUrl,{pos:h[k]})})}for(var i in h){j(i)}},fireVolChange:function(a,b){if(!this.active){return false}this.volume=a;if(!b){this.widget.mute&&this.widget.mute.removeClass("mute").attr("title","\u9759\u97f3");this.widget.volume&&this.widget.volume.box_slider("option","value",this.volume)}else{this.widget.mute&&this.widget.mute.addClass("mute").attr("title","\u53d6\u6d88\u9759\u97f3");this.widget.volume&&this.widget.volume.box_slider("option","value",0)}this.dispatchEvent(this.EVENTS.VOLCHANGE,{volume:a});this.dispatchEvent(this.EVENTS.MUTECHANGE,{mute:b});return true},setActive:function(a){this.active=a;this.$root[a?"addClass":"removeClass"]("active")},setShowLink:function(d,c){var b=d.showLink,a=b?$.cutString(b,16,5):"";if(d.resourceType.toString()=="2"||d.resourceType===undefined){$(c).find(".link-source a").text(a).attr("href",b);$(c).find(".source").show()}},createSongFilter:function(j){var g,c=[],b=[],h=[],f;if(j){g="http://music.baidu.com/",c=j.artistId.toString().split(","),b=j.artistName.split(","),h=[];for(var d=0,a=b.length;d<a;d++){h[d]=c[d]?g+"artist/"+c[d]:"javascript:;"}f={songId:j.songId,songName:j.songName||"\u8be5\u6b4c\u66f2\u5df2\u4e0b\u67b6",albumId:j.albumId,albumLink:j.albumId?g+"album/"+j.albumId:"javascript:;",albumName:j.albumName,all_artist:b,all_artist_id:c,all_artist_link:h}}else{f={songId:"",songName:"",albumId:"",albumLink:"",albumName:"",all_artist:b,all_artist_id:c,all_artist_link:h}}return f}});(function(){var a=function(b,d){if([].indexOf){return[].indexOf.call(b,d)}else{for(var c=b.length-1;c>-1;c--){if(b[c]===d){return c}}return -1}};mbox.Controller=function(b){this.playctrl=b;this.uiList=[]};mbox.Controller.prototype={_init:function(){},bindUi:function(d,c){if(a(this.uiList,d)>-1||!d){return false}if(c&&this.uiList.length>0){for(var b=this.uiList.length;b;b--){this.unbindUi(this.uiList[b-1]);this.uiList.splice(b-1,1)}}this.bindPlayerEvent(this.playctrl,d);this.bindSongInfoEvent(this.playctrl,d);this.bindPlayListEvent(this.playctrl,d);this.bindUIEvent(this.playctrl,d);this.uiList.push(d);var f=this.playctrl.player;this._onPosition(d,f.getCurrentPosition());this._onProgress(d,f.getLoadedPercent());this._onState(d,f.getState());d.setActive(true);d.fireVolChange(d.volume,!d.volume);return true},unbindUi:function(f){var g=playctrl.player,h=f.guid,d=g.EVENTS,b=f.EVENTS,c;for(c in d){if(d.hasOwnProperty(c)){g.removeEventListener(d[c]+"."+h)}}for(c in b){if(b.hasOwnProperty(c)){f.removeEventListener(b[c]+"."+h)}}playctrl.removeEventListener("fetch:link."+h);f.setActive(false)},bindPlayListEvent:function(){},bindPlayerEvent:function(d,b){var c=d.player,f=b.guid;c.setEventListener(c.EVENTS.POSITIONCHANGE,T.fn.bind(function(g){this._onPosition(b,g.position)},this),f);c.setEventListener(c.EVENTS.PROGRESS,T.fn.bind(function(g){this._onProgress(b,g.progress)},this),f);c.setEventListener(c.EVENTS.STATECHANGE,T.fn.bind(function(g){this._onState(b,g.newState)},this),f)},bindSongInfoEvent:function(c,b){c.addEventListener("fetch:link",T.fn.bind(function(d){this._onSongInfo(b,d.song)},this),b.guid)},bindUIEvent:function(d,b){var c=d.player;b.addEventListener(b.EVENTS.POSITIONCHANGE,function(f){c.setCurrentPosition(d.getTotalTime()*f.percent)},b.guid);b.addEventListener(b.EVENTS.VOLCHANGE,function(f){c.setVolume(f.volume)},b.guid);b.addEventListener(b.EVENTS.TOGGLEPLAY,function(f){d.player[f.isPlay?"play":"pause"]()},b.guid);b.addEventListener(b.EVENTS.MUTECHANGE,function(f){c.setMute(f.mute)},b.guid)},_onSongInfo:function(f,h){if(f.widget.title){var d=f.createSongFilter(h);if(!d.songName||d.songName==="\u8be5\u6b4c\u66f2\u5df2\u4e0b\u67b6"){f.widget.title.addClass("grey")}else{f.widget.title.removeClass("grey")}f.widget.title.html(baidu.template(f.widget.title.tpl,d))}if(f.widget.lrc&&h){mbox.SongDataModel.getLrcContent(h,{success:function(i){f.widget.lrc.lrc("setLrc",i)},error:function(){f.widget.lrc.lrc("setLrc","")}})}if(f.widget.album){f.widget.album.html(baidu.template(f.widget.album.tpl,h));var c=f.widget.album.find("img");if(!c[0].src){var g=c.attr("data-src");g&&c.attr("src",g)}}if(f.widget.time){var b=this.playctrl.getTotalTime();f.widget.time.html(baidu.template(f.widget.time.tpl,{curTime:mbox.convertTime(0),totalTime:mbox.convertTime(b)}))}},_onPosition:function(c,d){var b=this.playctrl.getTotalTime();if(c.widget.slider&&!c.widget.slider.isSliding){c.widget.slider.box_slider("option","value",d*c.widget.slider.maxValue/b||0)}if(c.widget.lrc){c.widget.lrc.lrc("scrollTo",d)}if(c.widget.time){c.widget.time.html(baidu.template(c.widget.time.tpl,{curTime:mbox.convertTime(d),totalTime:mbox.convertTime(b)}))}},_onProgress:function(c,b){if(c.widget.slider&&!c.widget.slider.sliding){c.widget.slider.box_slider("progress",b*c.widget.slider.maxValue)}},_onState:function(c,b){if(c.widget.playBtn){var d=this.playctrl.player;playing=b===d.STATES.PLAY||b===d.STATES.PREBUFFER||b===d.STATES.BUFFERING;if(!playing){c.widget.playBtn.addClass("stop")}else{c.widget.playBtn.removeClass("stop")}}}}})(window);;window.__discarding&&__discarding("common/component/music_player");_.Module.define({path:"common/component/MusicPlayer",requires:[],sub:{initial:function(a,c){if(!window.playctrl){window.playctrl=new mbox.PlayCtrl()}this.api=playctrl.exportAPI();this.log=playctrl.log;this.controller=new mbox.Controller(playctrl);this.logList={"song-name a":"song_title","artist-name a":"artist_name","album-name a":"album_name",logo:"logo","lrc-btn":"lrc","download-btn":"download","go-to-listen-btn":"to_musicbox"};this.ui=[];var b=0;for(;b<a.length;b++){this.mboxInit(c[b],a[b],b)}this.eventInit()},mboxInit:function(a,b,e){var h=this.ui,j=this.logList,c=this.log,g=this.api,f=this.controller;h[e]=new mbox.UiCtrl($(a));if(typeof(b)!=="object"){var d=mbox.SongDataModel.createSongModel(b);mbox.SongDataModel.fetchSong(d[0],{success:function(i){h[e].tplToHtml(i,a,j,c);h[e].setShowLink(i,a)}})}else{if(b.hasLink!=true){b={hasLink:true,songId:b.song_id,songName:b.title,artistId:b.ting_uid,artistName:b.author,albumId:b.album_id,albumName:b.album_title,songPicBig:b.pic_big,songPicSmall:b.pic_small,songPicRadio:b.pic_radio,resourceType:b.resource_type,relateStatus:b.relate_status,copyType:b.copy_type,lrcLink:b.lrclink,rate:b.file_bitrate,songLink:b.file_link,showLink:b.show_link,format:b.file_extension,size:b.file_size,time:b.file_duration}}h[e].tplToHtml(b,a,j,c);h[e].setShowLink(b,a)}g.addSong(b);$(a).find(".ctrl-btn").click(function(){if(!h[e].$root.hasClass("active")){playctrl.player.stop();var k=i(e);setTimeout(k,100)}function i(l){return function(){f.bindUi(h[l],true);g.setPlayIndex(l,true)}}})},eventInit:function(){var a=$(document);a.delegate(".add-favour","click",function(){var c=this;var e=$(this).parents(".right-top").find($(".song-name")).tbattr("songid");var b=$.cookie("BDUSS");var d="http://tingapi.ting.baidu.com/v1/restserver/ting?method=baidu.ting.favorite.addSongFavorite&from=tieba";$.getJSON(d+"&callback=?",{songId:e},function(f){var g=f.error_code;if(g===22000||g===22322){$(c).addClass("add-favour-red")}else{if(g===22452){_.Module.use("common/component/LoginDialog",["",""])}}})}).delegate(".lrc-btn","click",function(){var b=$(this).parents(".right-top").find($(".song-name")).tbattr("songid");window.open("http://music.baidu.com/song/"+b+"#song_lyric")}).delegate(".download-btn","click",function(){var b=$(this).parents(".right-top").find($(".song-name")).tbattr("songid");window.open("http://music.baidu.com/song/"+b+"/download")}).delegate(".go-to-listen-btn","click",function(){var b=$(this).parents(".right-top").find($(".song-name")).tbattr("songid");window.open("http://music.baidu.com//box?&&__methodName=mboxCtrl.playSong&__argsValue="+b)})}}});;_.Module.define({path:"pb/widget/NoAutoVideo",requires:["common/component/MusicPlayer"],sub:{_configs:{},initial:function(e){try{null!=e&&(this._configs=$.extend(this._configs,e)),this.postWrapper=$("#j_p_postlist"),this.videoElem=null,this.run()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:23}),$.se({msg:(t.message||t.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:23}),console.log("errormsg:"+(t.message||t.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:23")}},run:function(){this._delMusic(),PageData.is_ipad?this._delIpadFlash():this._delFlash()},_getSearch:function(e){return e.replace(/http:\/\/box\.baidu\.com\/widget\/flash\/bdspacesong\.swf\?/g,"")},_getSearchValue:function(e,t){var a=t.replace(/^\?/,""),o={};if(!a)return void 0===e?o:void 0;a=a.split("&amp;");for(var i,s=0,r=a.length;r>s;s++)i=a[s].indexOf("="),i>0?o[a[s].substring(0,i)]=a[s].substring(i+1):o[a[s]]="";return void 0===e?o:o[e]},_delMusic:function(){var e=this.postWrapper.find(".BDE_Music"),t=this;"undefined"==typeof window._musiccount&&(window._musiccount=0),$.each(e,function(e,a){var o=$(a).tbattr("src"),i=t._getSearch(o),s=t._getSearchValue("song_id",i);if(s){var r=$('<div class="musicbox_con"></div>');$(a).replaceWith(r),t.musicPlayer?t.musicPlayer.mboxInit(r,s,_musiccount):(t.musicPlayer=t.use("common/component/MusicPlayer",[],[]),t.musicPlayer.mboxInit(r,s,_musiccount)),_musiccount++}else{o=o.replace(/autoplay=false/gi,"autoPlay=true");var n=$('<img style="cursor:pointer;display:block;" src="http://tb2.bdstatic.com/tb/static-pb/img/no_music_auto.png">');$(a).replaceWith(n),n.bind("click",function(){try{var e=t._genericMusicImage(o);$(this).fadeOut(100,function(){$(this).replaceWith(e)})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:95}),$.se({msg:(a.message||a.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:95}),console.log("errormsg:"+(a.message||a.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:95")}})}})},_genericMusicImage:function(e){var t='<embed width="402" height="95" class="BDE_Music" src="'+e+'" scale="noborder" allowscriptaccess="never" menu="false" loop="false" play="true" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" allowfullscreen="true" style="display:block;">';return $(t)},_delIpadFlash:function(){var e=this,t=this.postWrapper.find(".BDE_Flash");$.each(t,function(t,a){if("voteFlash"==$(a).tbattr("id"))return!0;var o=$(a).tbattr("vsrc"),i=null;if(o&&""!==o){o=$.tb.escapeHTML(o),i=e._getReplaceElem($(a).tbattr("vpic"));var s=$('<a target="_blank" href="'+o+'"></a>');s.append(i),$(a).replaceWith(s),s.bind("click",function(e){try{e.preventDefault(),window.open($(this).tbattr("href"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:132}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:132}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:132")}})}else i=$('<img src="http://tb2.bdstatic.com/tb/static-pb/img/noflash.png" alt="该设备暂不支持此视频播放">'),$(a).replaceWith(i)})},_delFlash:function(){var e=this,t=this.postWrapper.find(".BDE_Flash");if(!(t.length<1)){var a=!0;$.each(t,function(t,o){var i=$(o);if("voteFlash"==$(o).tbattr("id"))return!0;if(0==t&&1==e._configs.can_auto_play&&1==PageData.pager.cur_page){$.stats.track("首楼播放","平台化首楼视频播放统计");var s=i.parents(".l_post").data("field"),r=s&&s.content&&1==s.content.post_no;if(r)return i.css("display","block"),!0}var n=e._gettbattrs(o),c=(n.vsrc,!1);if(1===PageData.thread.is_ad&&a){var l=$(o).parents("div.l_post"),p=l.getData();1==p.content.floor||2==p.content.floor?c=!0:a=!1}e.videoElem=c?e._getAdReplaceElem():e._getReplaceElem(n.vpic),$(o).replaceWith(e.videoElem),e._bindPlayEvent(n)})}},_getReplaceElem:function(e){var t,a=this;return t=e?a._getVideoPic(e):a._getBaiduPicElem(e)},_getVideoPic:function(e){var t='<div class="vpic_wrap"><img class="vpic_img" src="'+e+'"/><span class="vpic_play"></span></div>',a=$(t);return a.hover(function(){$(this).addClass("vpic_hover")},function(){$(this).removeClass("vpic_hover")}),a},_getBaiduPicElem:function(){var e="http://tb2.bdstatic.com/tb/static-pb/img/no_autovideo_1.png",t="http://tb2.bdstatic.com/tb/static-pb/img/no_autovideo_2.png",a=$(document.createElement("img"));return a.tbattr("src",e),a.css("cursor","pointer"),a.hover(function(){$(this).tbattr("src",t)},function(){$(this).tbattr("src",e)}),a},_getAdReplaceElem:function(){var e=$(document.createElement("div"));e.tbattr({id:"ad_video_area","class":"ad_video_area"});var t=$('<div class="ad_video_bg"></div>');t.css({background:"url('"+(PageData.thread.video_url||"")+"')"});var a=$('<div class="ad_play_btn"></div>');return e.append(t).append(a).append($('<div class="ad_play_bar"></div>')),e.hover(function(){a.css({"background-position":"0 -64px"})},function(){a.css({"background-position":"0 0"})}),e.bind("click",function(){try{if(document.images){var e=new Image;e.src=PageData.ecomStatDomain+"video.php?page=pb&forumid="+(PageData.forum_id||"")+"&tid="+(PageData.thread.id||"")+"&t="+(new Date).getTime(),e=null}}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:270}),$.se({msg:(t.message||t.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:270}),console.log("errormsg:"+(t.message||t.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:270")}}),e},_gettbattrs:function(e){var t={};return t.src=$(e).tbattr("src"),t.width=$(e).tbattr("width"),t.height=$(e).tbattr("height"),t.scale=$(e).tbattr("scale"),t.allowscriptaccess=$(e).tbattr("allowscriptaccess"),t.menu=$(e).tbattr("menu"),t.loop=$(e).tbattr("loop"),t.play=$(e).tbattr("play"),t.wmode=$(e).tbattr("wmode"),t.type=$(e).tbattr("type"),t.pluginspage=$(e).tbattr("pluginspage"),t.allowfullscreen=$(e).tbattr("allowfullscreen"),t.flashvars="playMovie=true&auto=1&adss=0&isAutoPlay=true",t.vsrc=$.tb.escapeHTML($(e).tbattr("vsrc")||""),t.vpic=$.tb.escapeHTML($(e).tbattr("vpic")||""),t},_bindPlayEvent:function(e){var t=this,a=t.videoElem;$.browser.msie?a.bind("click",function(){try{var a,o=e.src.match(/[\w]+\.[\w]+(?=\/)/i)[0];a=null!=o&&o.indexOf("cntv")>=0?$(t._createVideoTagForOtherBrowser(e)):$(t._createVideoTagForIEBrowser(e)),$(this).replaceWith($(a)),$(a).css("display","block"),t._clickStats(e.src)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:314}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:314}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:314")}}):a.bind("click",function(){try{var a=t._createVideoTagForOtherBrowser(e),o=$(a);$(this).replaceWith($(o)),$(o).css("display","block"),t._clickStats(e.src)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:323}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:323}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:323")}})},_createVideoTagForOtherBrowser:function(e){var t=new Array;return t.push('<embed type="'+e.type+'" '),t.push(' class="BDE_Flash"'),t.push(' src="'+e.src+'"'),t.push(' width="'+e.width+'"'),t.push(' height="'+e.height+'"'),t.push(' scale="'+e.scale+'"'),t.push(' allowscriptaccess="never"'),t.push(' menu="'+e.menu+'"'),t.push(' loop="'+e.loop+'"'),t.push(' play="true"'),t.push(' womode="'+e.wmode+'"'),t.push(' pluginspage="'+e.pluginspage+'"'),t.push(' allowfullscreen="true"'),t.push(' flashvars="'+e.flashvars+'"'),t.push(' style="visibility:visible;">'),t.push("</embed>"),t.join("")},_createVideoTagForIEBrowser:function(e){var t=this,a='<object style="visibility:visible" class="BDE_Flash" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,22,0" width="'+e.width+'" height="'+e.height+'">',o=new Array;o.push('<param name="FlashVars" value="'+e.flashvars+'">'),o.push('<param name="Movie" value="'+e.src+'">'),o.push('<param name="Src" value="'+e.src+'">'),o.push('<param name="WMode" value="Transparent">'),o.push('<param name="Play" value="0">'),o.push('<param name="Loop" value="-1">'),o.push('<param name="Quality" value="High">'),o.push('<param name="Menu" value="0">'),o.push('<param name="AllowScriptAccess" value="never">'),o.push('<param name="Scale" value="NoScale">'),o.push('<param name="DeviceFont" value="0">'),o.push('<param name="EmbedMovie" value="0">'),o.push('<param name="BGColor" value="">'),o.push('<param name="MovieData" value="">'),o.push('<param name="AllowNetworking" value="all">'),o.push('<param name="AllowFullScreen" value="true">'),o.push(t._createVideoTagForOtherBrowser(e));var i=o.join("");return a+i+"</object>"},_clickStats:function(e){try{var t=e.match(/http:\/\/([^\/]*)\/.*/);if(null!=t&&null!=t[1]){var a=t[1];$.stats.sendRequest("fr=tb0_forum&st_type=videoclick&st_mod=pb&provider="+a)}}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"pb:widget/noAutoVideo/noAutoVideo.js",method:"",ln:396}),$.se({msg:(o.message||o.description).replace(/\s+/g,"-"),locator:"pb:widget/noAutoVideo/noAutoVideo.js",linenum:396}),console.log("errormsg:"+(o.message||o.description).replace(/\s+/g,"-"),"locator:pb:widget/noAutoVideo/noAutoVideo.js","linenum:396")}}}});!function(){var e=["吞噬星空","遮天","武动乾坤","凡人修仙传","神印王座","傲世九重天","将夜","杀神","圣王","长生不死"],i="THREAD_PAGE_TIMES",n=function(){var e=PageData.thread.thread_id;$("ul.l_posts_num").delegate("a","click",function(n){try{var a=$.cookie(i),l={},s=null,r="",c=!0;if(a){if(a.indexOf("@3")>0)return;s=a.split("|");for(var d=0,g=s.length;g>d;d++)r=s[d].split("@"),l[r[0]]=r[1]}return l[e]?(l[e]++,3==l[e]&&(o($.tb.unescapeHTML($(this).tbattr("href"))),c=!1)):l[e]=1,t(l),c}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"pb:widget/init/init.js",method:"",ln:38}),$.se({msg:(n.message||n.description).replace(/\s+/g,"-"),locator:"pb:widget/init/init.js",linenum:38}),console.log("errormsg:"+(n.message||n.description).replace(/\s+/g,"-"),"locator:pb:widget/init/init.js","linenum:38")}})},t=function(e){var n,t=[];for(var o in e)n=[o,"@",e[o]].join(""),t.push(n);$.cookie(i,t.join("|"))},o=function(e){var i=new $.modal;i.show();var n=$("#lzonly_cntn"),t=$('<div><div class="lzonly_tip"></div><div class="iknow_btn"></div><div class="lzonly_tip_close"></div></div>');t.css({position:"absolute","z-index":$.getzIndex,left:n.offset().left-190,top:n.offset().top-10}),$("body").append(t),$(window).scrollTop(0),$("div.iknow_btn,div.lzonly_tip_close").bind("click",function(){try{t.remove(),i.remove(),$.tb.location.setHref(e)}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"pb:widget/init/init.js",method:"",ln:62}),$.se({msg:(n.message||n.description).replace(/\s+/g,"-"),locator:"pb:widget/init/init.js",linenum:62}),console.log("errormsg:"+(n.message||n.description).replace(/\s+/g,"-"),"locator:pb:widget/init/init.js","linenum:62")}}),$(window).bind("resize",function(){t.css({left:n.offset().left-190})})};PageData.is_login||1!=PageData.is_lzl||-1==$.inArray(PageData.forum_name,e)||n()}(),function(e,i){var n,t=function(){n=i.setInterval(function(){var e="undefined"!=typeof i.bdPass_api_loginLite_loaded;if(e){i.clearInterval(n),n=null;var t=PageData.user.is_login;t||(bdPass.api.loginLite.getSuggestFormIndexArray(1),TbCom.process("User","buildLoginFrame",null,null,null,"recallmaillogin"))}},200)},o=e.tb.getDecodedSearch("src");"recallmail"==o&&e(t)}(jQuery,window);_.Module.define({path:"pb/widget/YingyinUrlTipType1",requires:["pb/widget/Favthread"],sub:{b_option:{wrap:$("body"),content:"",closeBtn:!1,arrow_dir:"up",arrow_pos:{left:30}},initial:function(e){try{this._bindEvent(),this.status=e}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",method:"",ln:27}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",linenum:27}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js","linenum:27")}},_bindEvent:function(){var e=this;$("#j_p_postlist").on({mouseenter:function(){var i=$(this);i.addClass("yingyin_underline"),e.yingyin_hdl=setTimeout(function(){e._show(i)},500),i.on("mouseleave",function(){i.removeClass("yingyin_underline"),clearTimeout(e.yingyin_hdl),clearTimeout(e.yingyin_close_hdl),e.yingyin_close_hdl=setTimeout(function(){e._hide(i)},1e3)})},click:function(i){try{var n=$(this);e._show(n)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",method:"",ln:53}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",linenum:53}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js","linenum:53")}}},".j_d_post_content span.j_d_post_yingyin_url, .j_lzl_s_p .lzl_content_main span.j_d_post_yingyin_url")},_adjustBbPos:function(e){var i=e.offset();this.bubble.setBubblePosition({left:i.left,top:i.top+e.height()})},_show:function(e){var i=this;if(i.yingyin_close_hdl&&clearTimeout(i.yingyin_close_hdl),i._sendStats("bbshow"),i.bubble)return i.bubble.hideBubble(),i._adjustBbPos(e),void i.bubble.showBubble();var n=e.offset(),t=['<div class="yingyin_bubble_wrap">','<p class="yingyin_tip">贴吧安卓客户端可直接观看影片</p>','<div class="yingyin_btn_container"><a href="http://c.tieba.baidu.com/c/s/download/pc?src=yingyin" target="_blank" class="ui_btn ui_btn_m yingyin_download"><span><em>立刻下载</em></span></a>','<span class="yingyin_save_cnt"><a href="javascript:void(0);" class="ui_btn ui_btn_sub_m yingyin_save"><span><em>收藏稍后看</em></span></a>','<div class="yingyin_favthr_tip"></div>',"</div></div>"].join(""),s=$.extend({},this.b_option);s.content=t;var l=n.top+e.height();s.bubble_css={left:n.left,top:l>0?l:0,width:248,height:102};var o={zIndex:$.getcurzIndex()},_=i.bubble=new UiBubbleTipBase(s);_.showBubble(o),_.j_bubble.addClass("yingyin_bubble_container"),_.j_bubble.find(".j_content, .j_body").height(102),_.j_bubble.find(".yingyin_bubble_wrap").height(72),_.j_bubble.on({mouseenter:function(){clearTimeout(i.yingyin_close_hdl)},mouseleave:function(){clearTimeout(i.yingyin_close_hdl),i.yingyin_close_hdl=setTimeout(function(){i._hide(e)},1e3)}}),0!==i.status&&_.j_bubble.find("a.yingyin_save em").text("已收藏"),_.j_bubble.find("a.yingyin_download").on({click:function(){try{i._sendStats("download")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",method:"",ln:127}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",linenum:127}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js","linenum:127")}}}),i.save=i.use("pb/widget/Favthread",[]),_.j_bubble.find("a.yingyin_save").on({click:function(){try{if(0===PageData.is_login)return i.bubble.hideBubble(),void TbCom.process("User","buildLoginFrame",null,null,null,null);0==i.status?(i._sendStats("save"),i.save.excute_open(function(e){if(0==e.error_no&&0==e.ret.type)_.j_bubble.find("a.yingyin_save em").text("已收藏"),i.status=1,i.save.show_tip("<span>贴子收藏成功，使用“</span><a target='_blank' href='http://c.tieba.baidu.com/c/s/download/pc?src=yingyin'>贴吧安卓客户端</a><span>”查看</span>",!0,_.j_bubble.find(".yingyin_favthr_tip"));else if(4==e.error_no)return i.bubble.hideBubble(),void TbCom.process("User","buildLoginFrame",null,null,null,null)})):i.save.excute_cancel(function(e){if(0==e.error_no&&0==e.ret.type)_.j_bubble.find("a.yingyin_save em").text("收藏稍后看"),i.status=0,i.save.show_tip("<span>取消收藏成功</span>",!1,_.j_bubble.find(".yingyin_favthr_tip"));else if(4==e.error_no)return void TbCom.process("User","buildLoginFrame",null,null,null,null)})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",method:"",ln:169}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js",linenum:169}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type1/yingyin_url_tip_type1.js","linenum:169")}}})},_sendStats:function(e){$.stats.sendRequest("bubble=yingyin&page=pb&function="+e)},_hide:function(){this.bubble&&this.bubble.hideBubble()}}});var BdParam={url:"",title:""},bdplayerUa=!1;_.Module.define({path:"pb/widget/YingyinUrlTipType2",requires:["pb/widget/Favthread"],sub:{b_option:{wrap:$("body"),content:"",closeBtn:!1,arrow_dir:"up",arrow_pos:{left:30}},isInstall:!1,initial:function(e){try{this._bindEvent(),this.status=e}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",method:"",ln:34}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",linenum:34}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js","linenum:34")}},_bindEvent:function(){var e=this;$("#j_p_postlist").on({mouseenter:function(){var i=$(this);i.addClass("yingyin_underline"),e.yingyin_hdl=setTimeout(function(){e._show(i)},500),i.on("mouseleave",function(){i.removeClass("yingyin_underline"),clearTimeout(e.yingyin_hdl),clearTimeout(e.yingyin_close_hdl),e.yingyin_close_hdl=setTimeout(function(){e._hide(i)},1e3)})},click:function(i){try{var n=$(this);e._show(n)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",method:"",ln:58}),$.se({msg:(i.message||i.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",linenum:58}),console.log("errormsg:"+(i.message||i.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js","linenum:58")}}},".j_d_post_content span.j_d_post_yingyin_url, .j_lzl_s_p .lzl_content_main span.j_d_post_yingyin_url")},_adjustBbPos:function(e){var i=e.offset();this.bubble.setBubblePosition({left:i.left,top:i.top+e.height()+10})},_show:function(e){BdParam.url=e.text(),BdParam.title="";var i=this;if(i.yingyin_close_hdl&&clearTimeout(i.yingyin_close_hdl),i._sendStats("bbshow"),i.bubble)return i.bubble.hideBubble(),i._adjustBbPos(e),void i.bubble.showBubble();var n=e.offset(),t=['<div class="yingyin_bubble_wrap">','<p class="yingyin_tip_2">贴吧安卓客户端和百度影音可直接观看影片</p>','<a href="javascript:void(0);" class="yingyin_save_2"><span><em>收藏稍后看>></em></span></a>','<div class="yingyin_btn_container_2">','<div class="yingyin_favthr_tip_2"></div>','<a href="http://c.tieba.baidu.com/c/s/download/pc?src=yingyin" target="_blank" class="ui_btn ui_btn_m yingyin_download"><span><em>立即在贴吧播放</em></span></a>','<a href="#" class="ui_btn ui_btn_sub_m yingyin_yun_play_2"><span><em>免费云播放</em></span></a>',"</div></div>"].join(""),s=$.extend({},this.b_option);s.content=t;var l=n.top+e.height()+10;s.bubble_css={left:n.left,top:l>0?l:0,width:300,height:105};var a={zIndex:$.getcurzIndex()},_=i.bubble=new UiBubbleTipBase(s);_.showBubble(a),_.j_bubble.addClass("yingyin_bubble_container"),_.j_bubble.find(".j_content, .j_body").height(105),_.j_bubble.find(".yingyin_bubble_wrap").height(78),_.j_bubble.on({mouseenter:function(){clearTimeout(i.yingyin_close_hdl)},mouseleave:function(){clearTimeout(i.yingyin_close_hdl),i.yingyin_close_hdl=setTimeout(function(){i._hide(e)},1e3)}}),0!==i.status&&_.j_bubble.find("a.yingyin_save_2 em").text("已收藏"),_.j_bubble.find("a.yingyin_download").on({click:function(){try{i._sendStats("download"),0==i.status&&_.j_bubble.find("a.yingyin_save_2").trigger("click")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",method:"",ln:137}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",linenum:137}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js","linenum:137")}}}),i.save=i.use("pb/widget/Favthread",[]),_.j_bubble.find("a.yingyin_save_2").on({click:function(){try{if(0===PageData.is_login)return i.bubble.hideBubble(),void TbCom.process("User","buildLoginFrame",null,null,null,null);0==i.status?(i._sendStats("save"),i.save.excute_open(function(e){if(0==e.error_no&&0==e.ret.type)_.j_bubble.find("a.yingyin_save_2 em").text("已收藏"),i.status=1,i.save.show_tip("<span>收藏成功，使用“</span><a target='_blank' href='http://c.tieba.baidu.com/c/s/download/pc?src=yingyin'>贴吧安卓客户端</a><span>”查看</span>",!0,_.j_bubble.find(".yingyin_favthr_tip_2"));else if(4==e.error_no)return i.bubble.hideBubble(),void TbCom.process("User","buildLoginFrame",null,null,null,null)})):i.save.excute_cancel(function(e){if(0==e.error_no&&0==e.ret.type)_.j_bubble.find("a.yingyin_save_2 em").text("收藏稍后看>>"),i.status=0,i.save.show_tip("<span>取消收藏成功</span>",!1,_.j_bubble.find(".yingyin_favthr_tip_2"));else if(4==e.error_no)return void TbCom.process("User","buildLoginFrame",null,null,null,null)})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",method:"",ln:177}),$.se({msg:(e.message||e.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",linenum:177}),console.log("errormsg:"+(e.message||e.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js","linenum:177")}}}),$('<script language="javascript" src="http://php.player.baidu.com/bdplayer/ua.php" charset="utf-8"></script>').appendTo("body"),$('<div id="Bdobj" style="width: 0px;height: 0px;"></div><div id="callbdplay" style="width: 0px;height: 0px;"></div>').appendTo("body"),$.JsLoadManager.use(["http://php.player.baidu.com/bdplayer/com_install.js"],function(){i.isInstall=bdplayer.IsInstall()?!0:!1}),$(".yingyin_yun_play_2").on("click",function(e){try{i._sendStats("yyplay");var n=$(this);i.isInstall?(e.preventDefault(),bdplayer.ClientPlay(BdParam.url,BdParam.title)):n.tbattr({href:"http://player.baidu.com/player3/index.html?tn=80",target:"_blank"})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",method:"",ln:206}),$.se({msg:(t.message||t.description).replace(/\s+/g,"-"),locator:"pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js",linenum:206}),console.log("errormsg:"+(t.message||t.description).replace(/\s+/g,"-"),"locator:pb:widget/yingyin_url_tip_type2/yingyin_url_tip_type2.js","linenum:206")}})},_sendStats:function(e){$.stats.sendRequest("bubble=yingyin&page=pb&function="+e)},_hide:function(){this.bubble&&this.bubble.hideBubble()}}});function HourGlass(t,e,a){this.hasEntered=!1,this.beatId="",this.rate=t?t:20,this.paras=e,this.isActive=a||PageData.user.is_login}_.Module.define({path:"pb/widget/Stat",sub:{initial:function(){try{NsLogLinker.bind(110),$.stats.scanPage(),this._hgTongji(),this._bdTongji(),this._wpoTongji()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"pb:widget/stat/stat.js",method:"",ln:11}),$.se({msg:(t.message||t.description).replace(/\s+/g,"-"),locator:"pb:widget/stat/stat.js",linenum:11}),console.log("errormsg:"+(t.message||t.description).replace(/\s+/g,"-"),"locator:pb:widget/stat/stat.js","linenum:11")}},_hgTongji:function(){var t=new HourGlass(20,{hg_mod:"pb",hg_uid:PageData.user.name_url,hg_kw:PageData.forum.name_url,hg_type:"bright"},!1);t.init();var e=["魔兽世界","2012","恐怖","LOL","英雄联盟","梦幻西游","坦克世界","穿越火线","魔兽玩家","洛奇英雄传","剑网3","三国杀","dnf红眼","sd敢达","问道","冒险岛","艾尔之光","dnf阿修罗","天龙网游","梦三国","dnf鬼泣","dnf召唤师","dnf剑魂","aion","dnf枪神","dnf武神","qq炫舞","qq三国","dnf商人","神武逍遥外传","dnf元素","蓝拳","psv","第九大陆","eve","精武堂","q宠大乐斗","倩女ol","dnf驱魔","dnf柔道","三国志12","dnf男气功","黑丝","维尼夫妇","路过的一只","les","减肥","寒武纪年","圣王","爱情","贴吧推广"];if($.inArray(PageData.forum.forum_name,e)){var a=new HourGlass(20,{fr:"nfrspb",fname:PageData.forum.name_url,v:1,bduid:$.cookie("BAIDUID"),uid:PageData.user.user_id},!0);a.init()}},_bdTongji:function(){var t="",e=0,a=document.cookie.match(/(^| )BAIDUID=(\w+)/);a&&(t=a[2]);for(var i=t.length-1;i>=0;i--)e+=t.charCodeAt(i);if(a&&2>e%10){var n="https:"==document.location.protocol?" https://":" http://";$.JsLoadManager.use([n+"hm.baidu.com/h.js?287705c8d9e2073d13275b18dbd746dc"],function(){Stats.sendRequest("fr=tb0_forum&st_mod=bdtj46dc&st_type=pb")})}},_wpoTongji:function(){"undefined"!=typeof alog&&(alog("set","alias",{monkey:"http://img.baidu.com/hunter/alog/monkey.min.js",element:"http://img.baidu.com/hunter/alog/element.min.js",speed:"http://tb1.bdstatic.com/tb/pms/wpo_alog_speed.js",feature:"http://img.baidu.com/hunter/alog/feature.min.js?t=20140514"}),0==parseInt(100*Math.random()/5)&&(alog("require",["monkey","element"],function(t){t.create({page:"tieba-pb",pid:"241",p:"14",hid:"762",postUrl:"http://nsclick.baidu.com/u.gif",reports:{refer:1,staytime:1}})}),alog("monkey.send","pageview",{now:+new Date}),alog("exception.create",{postUrl:"http://nsclick.baidu.com/u.gif",page:"tieba-pb",pid:"170",p:14}),0==parseInt(10*Math.random())&&alog("require","feature",function(t){t.create({dv:4,postUrl:"http://static.tieba.baidu.com/tb/pms/img/st.gif",page:"tieba-pb",p:14}),t.fire("commit")})),alog("speed.set","options",{sample:PageData.is_ipad?1:.01,product_id:14,page_id:1}))}}}),HourGlass.prototype={constructor:HourGlass,init:function(){this.isActive&&($("body").bind("mouseover",{obj:this},function(t){t.data.obj.enter()}),$("body").bind("mouseleave",{obj:this},function(t){t.data.obj.leave()}))},parasToQuery:function(){var t="";for(var e in this.paras)t+=e+"="+this.paras[e]+"&";return t.substr(0,t.length-1)},enter:function(){this.hasEntered||(this.hasEntered=!0,this.startBeat())},leave:function(){this.hasEntered&&(this.hasEntered=!1,this.stopBeat())},startBeat:function(){var t=this;this.beatId=setInterval(function(){t.beat()},1e3*t.rate)},stopBeat:function(){clearInterval(this.beatId)},beat:function(){var t=new Image;window["bd_hg2_"+(new Date).getTime()]=t,t.src="http://static.tieba.baidu.com/tb/img/hg/hg.gif?"+this.parasToQuery()+"&t="+(new Date).getTime(),t=null}};_.Module.define({path:"ihome/widget/Interaction",sub:{initial:function(n){n?(this.dataObj=n,this._bindEvents()):this._bindFloatEvents()},_resetDataObj:function(n){this.dataObj=n},_follow:function(n,o){var t=this;if(!PageData.user.is_login)return TbCom.process("User","buildLoginFrame"),!1;if(PageData.user.no_un)return TbCom.process("User","buildUnameFrame"),!1;var e=t._addLoading(n,0);$.tb.post("/home/post/follow",{un:o.un,tbs:o.tbs},function(o){o?0==o.no?t._clearLoading(n,e,0):1130036==o.no?t._showError("该用户不希望被他人关注",n,0):2260001==o.no?t._showError("操作太频繁，请歇歇！",n,0):t._showError("关注失败",n,0):t._showError("关注失败",n,0)})},_showError:function(n,o,t){var e=new $.dialog({html:'<p style="text-align:center">'+n+"<p>",width:300,height:30});e.bind("onclose",function(){var n=1==t?"btn_concern_done":"btn_concern";o.text("").removeClass().addClass(n)})},_addLoading:function(n,o){var t=$("<span></span>"),e="",r=0,a=[".","..","..."],i=["关注中","取消中"],s=setInterval(function(){e=a[r++%3],t.text(e)},400);return n.removeClass().addClass("btn_concern_loading"+o).text(i[o]).append(t),s},_clearLoading:function(n,o,t){var e=1==t?"btn_concern":"btn_concern_done";n.text("").removeClass().addClass(e),clearInterval(o)},_unfollow:function(n,o){var t=this;if(!PageData.user.is_login)return TbCom.process("User","buildLoginFrame"),!1;if(PageData.user.no_un)return TbCom.process("User","buildUnameFrame"),!1;var e=t._addLoading(n,1);$.tb.post("/home/post/unfollow",{un:o.un,tbs:o.tbs},function(o){o&&0==o.no?t._clearLoading(n,e,1):2260001==o.no?t._showError("操作太频繁，请歇歇！",n,0):t._showError("取消关注失败",n,1)})},_bindEvents:function(){var n=this;$("#userinfo_wrap").delegate(".btn_concern","click",function(){return n._follow($(this),n.dataObj),!1}),$("#userinfo_wrap").delegate(".btn_concern_done","click",function(){return n._unfollow($(this),n.dataObj),!1})},_bindFloatEvents:function(){var n=this;$("body").delegate(".card_headinfo_wrap .btn_concern","click",function(){return n._follow($(this),n.dataObj),!1}),$("body").delegate(".card_headinfo_wrap .btn_concern_done","click",function(){return n._unfollow($(this),n.dataObj),!1})}}});_.Module.define({path:"ihome/widget/MonthIcon",sub:{iconTitle:{201401:"摩羯座",201402:"水瓶座",201403:"双鱼座",201404:"白羊座",201405:"金牛座",201406:"双子座",201407:"巨蟹座",201408:"狮子座",201409:"处女座",201410:"天秤座",201411:"天蝎座",201412:"射手座"},initial:function(){},getMonthIcon:function(n,t){t=t||1;for(var i='<div class="month_icon_theme_'+t+'">',o="",e=201401;201412>=e;e++)o=n&&n[e]?" month_icon_"+e:" month_icon_gray_"+e,i+='<a href="/tbmall/monthicon" target="_blank" title="'+this.iconTitle[e]+'" class="'+o+'"></a>';return i+="</div>"}}});